(function(){const mt=document.createElement("link").relList;if(mt&&mt.supports&&mt.supports("modulepreload"))return;for(const Ct of document.querySelectorAll('link[rel="modulepreload"]'))xt(Ct);new MutationObserver(Ct=>{for(const Rt of Ct)if(Rt.type==="childList")for(const gt of Rt.addedNodes)gt.tagName==="LINK"&&gt.rel==="modulepreload"&&xt(gt)}).observe(document,{childList:!0,subtree:!0});function bt(Ct){const Rt={};return Ct.integrity&&(Rt.integrity=Ct.integrity),Ct.referrerPolicy&&(Rt.referrerPolicy=Ct.referrerPolicy),Ct.crossOrigin==="use-credentials"?Rt.credentials="include":Ct.crossOrigin==="anonymous"?Rt.credentials="omit":Rt.credentials="same-origin",Rt}function xt(Ct){if(Ct.ep)return;Ct.ep=!0;const Rt=bt(Ct);fetch(Ct.href,Rt)}})();var xterm={exports:{}};(function(at,mt){(function(bt,xt){at.exports=xt()})(globalThis,()=>(()=>{var bt={4567:function(gt,De,Ge){var Ke=this&&this.__decorate||function(Be,$e,Xe,tt){var Qe,st=arguments.length,Ze=st<3?$e:tt===null?tt=Object.getOwnPropertyDescriptor($e,Xe):tt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ze=Reflect.decorate(Be,$e,Xe,tt);else for(var rt=Be.length-1;rt>=0;rt--)(Qe=Be[rt])&&(Ze=(st<3?Qe(Ze):st>3?Qe($e,Xe,Ze):Qe($e,Xe))||Ze);return st>3&&Ze&&Object.defineProperty($e,Xe,Ze),Ze},Je=this&&this.__param||function(Be,$e){return function(Xe,tt){$e(Xe,tt,Be)}};Object.defineProperty(De,"__esModule",{value:!0}),De.AccessibilityManager=void 0;const Fe=Ge(9042),Ye=Ge(9924),et=Ge(844),it=Ge(4725),We=Ge(2585),p=Ge(3656);let He=De.AccessibilityManager=class extends et.Disposable{constructor(Be,$e,Xe,tt){super(),this._terminal=Be,this._coreBrowserService=Xe,this._renderService=tt,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let Qe=0;Qe<this._terminal.rows;Qe++)this._rowElements[Qe]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[Qe]);if(this._topBoundaryFocusListener=Qe=>this._handleBoundaryFocus(Qe,0),this._bottomBoundaryFocusListener=Qe=>this._handleBoundaryFocus(Qe,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new Ye.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(Qe=>this._handleResize(Qe.rows))),this.register(this._terminal.onRender(Qe=>this._refreshRows(Qe.start,Qe.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(Qe=>this._handleChar(Qe))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(Qe=>this._handleTab(Qe))),this.register(this._terminal.onKey(Qe=>this._handleKey(Qe.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,p.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,et.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(Be){for(let $e=0;$e<Be;$e++)this._handleChar(" ")}_handleChar(Be){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==Be&&(this._charsToAnnounce+=Be):this._charsToAnnounce+=Be,Be===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=Fe.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(Be){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(Be)||this._charsToConsume.push(Be)}_refreshRows(Be,$e){this._liveRegionDebouncer.refresh(Be,$e,this._terminal.rows)}_renderRows(Be,$e){const Xe=this._terminal.buffer,tt=Xe.lines.length.toString();for(let Qe=Be;Qe<=$e;Qe++){const st=Xe.lines.get(Xe.ydisp+Qe),Ze=[],rt=(st==null?void 0:st.translateToString(!0,void 0,void 0,Ze))||"",ot=(Xe.ydisp+Qe+1).toString(),dt=this._rowElements[Qe];dt&&(rt.length===0?(dt.innerText="Â ",this._rowColumns.set(dt,[0,1])):(dt.textContent=rt,this._rowColumns.set(dt,Ze)),dt.setAttribute("aria-posinset",ot),dt.setAttribute("aria-setsize",tt))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(Be,$e){const Xe=Be.target,tt=this._rowElements[$e===0?1:this._rowElements.length-2];if(Xe.getAttribute("aria-posinset")===($e===0?"1":`${this._terminal.buffer.lines.length}`)||Be.relatedTarget!==tt)return;let Qe,st;if($e===0?(Qe=Xe,st=this._rowElements.pop(),this._rowContainer.removeChild(st)):(Qe=this._rowElements.shift(),st=Xe,this._rowContainer.removeChild(Qe)),Qe.removeEventListener("focus",this._topBoundaryFocusListener),st.removeEventListener("focus",this._bottomBoundaryFocusListener),$e===0){const Ze=this._createAccessibilityTreeNode();this._rowElements.unshift(Ze),this._rowContainer.insertAdjacentElement("afterbegin",Ze)}else{const Ze=this._createAccessibilityTreeNode();this._rowElements.push(Ze),this._rowContainer.appendChild(Ze)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines($e===0?-1:1),this._rowElements[$e===0?1:this._rowElements.length-2].focus(),Be.preventDefault(),Be.stopImmediatePropagation()}_handleSelectionChange(){var rt;if(this._rowElements.length===0)return;const Be=document.getSelection();if(!Be)return;if(Be.isCollapsed)return void(this._rowContainer.contains(Be.anchorNode)&&this._terminal.clearSelection());if(!Be.anchorNode||!Be.focusNode)return void console.error("anchorNode and/or focusNode are null");let $e={node:Be.anchorNode,offset:Be.anchorOffset},Xe={node:Be.focusNode,offset:Be.focusOffset};if(($e.node.compareDocumentPosition(Xe.node)&Node.DOCUMENT_POSITION_PRECEDING||$e.node===Xe.node&&$e.offset>Xe.offset)&&([$e,Xe]=[Xe,$e]),$e.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&($e={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains($e.node))return;const tt=this._rowElements.slice(-1)[0];if(Xe.node.compareDocumentPosition(tt)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(Xe={node:tt,offset:((rt=tt.textContent)==null?void 0:rt.length)??0}),!this._rowContainer.contains(Xe.node))return;const Qe=({node:ot,offset:dt})=>{const ct=ot instanceof Text?ot.parentNode:ot;let lt=parseInt(ct==null?void 0:ct.getAttribute("aria-posinset"),10)-1;if(isNaN(lt))return console.warn("row is invalid. Race condition?"),null;const ft=this._rowColumns.get(ct);if(!ft)return console.warn("columns is null. Race condition?"),null;let pt=dt<ft.length?ft[dt]:ft.slice(-1)[0]+1;return pt>=this._terminal.cols&&(++lt,pt=0),{row:lt,column:pt}},st=Qe($e),Ze=Qe(Xe);if(st&&Ze){if(st.row>Ze.row||st.row===Ze.row&&st.column>=Ze.column)throw new Error("invalid range");this._terminal.select(st.column,st.row,(Ze.row-st.row)*this._terminal.cols-st.column+Ze.column)}}_handleResize(Be){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let $e=this._rowContainer.children.length;$e<this._terminal.rows;$e++)this._rowElements[$e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[$e]);for(;this._rowElements.length>Be;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const Be=this._coreBrowserService.mainDocument.createElement("div");return Be.setAttribute("role","listitem"),Be.tabIndex=-1,this._refreshRowDimensions(Be),Be}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let Be=0;Be<this._terminal.rows;Be++)this._refreshRowDimensions(this._rowElements[Be])}}_refreshRowDimensions(Be){Be.style.height=`${this._renderService.dimensions.css.cell.height}px`}};De.AccessibilityManager=He=Ke([Je(1,We.IInstantiationService),Je(2,it.ICoreBrowserService),Je(3,it.IRenderService)],He)},3614:(gt,De)=>{function Ge(Ye){return Ye.replace(/\r?\n/g,"\r")}function Ke(Ye,et){return et?"\x1B[200~"+Ye+"\x1B[201~":Ye}function Je(Ye,et,it,We){Ye=Ke(Ye=Ge(Ye),it.decPrivateModes.bracketedPasteMode&&We.rawOptions.ignoreBracketedPasteMode!==!0),it.triggerDataEvent(Ye,!0),et.value=""}function Fe(Ye,et,it){const We=it.getBoundingClientRect(),p=Ye.clientX-We.left-10,He=Ye.clientY-We.top-10;et.style.width="20px",et.style.height="20px",et.style.left=`${p}px`,et.style.top=`${He}px`,et.style.zIndex="1000",et.focus()}Object.defineProperty(De,"__esModule",{value:!0}),De.rightClickHandler=De.moveTextAreaUnderMouseCursor=De.paste=De.handlePasteEvent=De.copyHandler=De.bracketTextForPaste=De.prepareTextForTerminal=void 0,De.prepareTextForTerminal=Ge,De.bracketTextForPaste=Ke,De.copyHandler=function(Ye,et){Ye.clipboardData&&Ye.clipboardData.setData("text/plain",et.selectionText),Ye.preventDefault()},De.handlePasteEvent=function(Ye,et,it,We){Ye.stopPropagation(),Ye.clipboardData&&Je(Ye.clipboardData.getData("text/plain"),et,it,We)},De.paste=Je,De.moveTextAreaUnderMouseCursor=Fe,De.rightClickHandler=function(Ye,et,it,We,p){Fe(Ye,et,it),p&&We.rightClickSelect(Ye),et.value=We.selectionText,et.select()}},7239:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.ColorContrastCache=void 0;const Ke=Ge(1505);De.ColorContrastCache=class{constructor(){this._color=new Ke.TwoKeyMap,this._css=new Ke.TwoKeyMap}setCss(Je,Fe,Ye){this._css.set(Je,Fe,Ye)}getCss(Je,Fe){return this._css.get(Je,Fe)}setColor(Je,Fe,Ye){this._color.set(Je,Fe,Ye)}getColor(Je,Fe){return this._color.get(Je,Fe)}clear(){this._color.clear(),this._css.clear()}}},3656:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.addDisposableDomListener=void 0,De.addDisposableDomListener=function(Ge,Ke,Je,Fe){Ge.addEventListener(Ke,Je,Fe);let Ye=!1;return{dispose:()=>{Ye||(Ye=!0,Ge.removeEventListener(Ke,Je,Fe))}}}},3551:function(gt,De,Ge){var Ke=this&&this.__decorate||function(He,Be,$e,Xe){var tt,Qe=arguments.length,st=Qe<3?Be:Xe===null?Xe=Object.getOwnPropertyDescriptor(Be,$e):Xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(He,Be,$e,Xe);else for(var Ze=He.length-1;Ze>=0;Ze--)(tt=He[Ze])&&(st=(Qe<3?tt(st):Qe>3?tt(Be,$e,st):tt(Be,$e))||st);return Qe>3&&st&&Object.defineProperty(Be,$e,st),st},Je=this&&this.__param||function(He,Be){return function($e,Xe){Be($e,Xe,He)}};Object.defineProperty(De,"__esModule",{value:!0}),De.Linkifier=void 0;const Fe=Ge(3656),Ye=Ge(8460),et=Ge(844),it=Ge(2585),We=Ge(4725);let p=De.Linkifier=class extends et.Disposable{get currentLink(){return this._currentLink}constructor(He,Be,$e,Xe,tt){super(),this._element=He,this._mouseService=Be,this._renderService=$e,this._bufferService=Xe,this._linkProviderService=tt,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new Ye.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new Ye.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,et.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,et.toDisposable)(()=>{var Qe;this._lastMouseEvent=void 0,(Qe=this._activeProviderReplies)==null||Qe.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,Fe.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,Fe.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,Fe.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,Fe.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(He){this._lastMouseEvent=He;const Be=this._positionFromMouseEvent(He,this._element,this._mouseService);if(!Be)return;this._isMouseOut=!1;const $e=He.composedPath();for(let Xe=0;Xe<$e.length;Xe++){const tt=$e[Xe];if(tt.classList.contains("xterm"))break;if(tt.classList.contains("xterm-hover"))return}this._lastBufferCell&&Be.x===this._lastBufferCell.x&&Be.y===this._lastBufferCell.y||(this._handleHover(Be),this._lastBufferCell=Be)}_handleHover(He){if(this._activeLine!==He.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(He,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,He)||(this._clearCurrentLink(),this._askForLink(He,!0))}_askForLink(He,Be){var Xe,tt;this._activeProviderReplies&&Be||((Xe=this._activeProviderReplies)==null||Xe.forEach(Qe=>{Qe==null||Qe.forEach(st=>{st.link.dispose&&st.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=He.y);let $e=!1;for(const[Qe,st]of this._linkProviderService.linkProviders.entries())Be?(tt=this._activeProviderReplies)!=null&&tt.get(Qe)&&($e=this._checkLinkProviderResult(Qe,He,$e)):st.provideLinks(He.y,Ze=>{var ot,dt;if(this._isMouseOut)return;const rt=Ze==null?void 0:Ze.map(ct=>({link:ct}));(ot=this._activeProviderReplies)==null||ot.set(Qe,rt),$e=this._checkLinkProviderResult(Qe,He,$e),((dt=this._activeProviderReplies)==null?void 0:dt.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(He.y,this._activeProviderReplies)})}_removeIntersectingLinks(He,Be){const $e=new Set;for(let Xe=0;Xe<Be.size;Xe++){const tt=Be.get(Xe);if(tt)for(let Qe=0;Qe<tt.length;Qe++){const st=tt[Qe],Ze=st.link.range.start.y<He?0:st.link.range.start.x,rt=st.link.range.end.y>He?this._bufferService.cols:st.link.range.end.x;for(let ot=Ze;ot<=rt;ot++){if($e.has(ot)){tt.splice(Qe--,1);break}$e.add(ot)}}}}_checkLinkProviderResult(He,Be,$e){var Qe;if(!this._activeProviderReplies)return $e;const Xe=this._activeProviderReplies.get(He);let tt=!1;for(let st=0;st<He;st++)this._activeProviderReplies.has(st)&&!this._activeProviderReplies.get(st)||(tt=!0);if(!tt&&Xe){const st=Xe.find(Ze=>this._linkAtPosition(Ze.link,Be));st&&($e=!0,this._handleNewLink(st))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!$e)for(let st=0;st<this._activeProviderReplies.size;st++){const Ze=(Qe=this._activeProviderReplies.get(st))==null?void 0:Qe.find(rt=>this._linkAtPosition(rt.link,Be));if(Ze){$e=!0,this._handleNewLink(Ze);break}}return $e}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(He){if(!this._currentLink)return;const Be=this._positionFromMouseEvent(He,this._element,this._mouseService);Be&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,Be)&&this._currentLink.link.activate(He,this._currentLink.link.text)}_clearCurrentLink(He,Be){this._currentLink&&this._lastMouseEvent&&(!He||!Be||this._currentLink.link.range.start.y>=He&&this._currentLink.link.range.end.y<=Be)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,et.disposeArray)(this._linkCacheDisposables))}_handleNewLink(He){if(!this._lastMouseEvent)return;const Be=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);Be&&this._linkAtPosition(He.link,Be)&&(this._currentLink=He,this._currentLink.state={decorations:{underline:He.link.decorations===void 0||He.link.decorations.underline,pointerCursor:He.link.decorations===void 0||He.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,He.link,this._lastMouseEvent),He.link.decorations={},Object.defineProperties(He.link.decorations,{pointerCursor:{get:()=>{var $e,Xe;return(Xe=($e=this._currentLink)==null?void 0:$e.state)==null?void 0:Xe.decorations.pointerCursor},set:$e=>{var Xe;(Xe=this._currentLink)!=null&&Xe.state&&this._currentLink.state.decorations.pointerCursor!==$e&&(this._currentLink.state.decorations.pointerCursor=$e,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",$e))}},underline:{get:()=>{var $e,Xe;return(Xe=($e=this._currentLink)==null?void 0:$e.state)==null?void 0:Xe.decorations.underline},set:$e=>{var Xe,tt,Qe;(Xe=this._currentLink)!=null&&Xe.state&&((Qe=(tt=this._currentLink)==null?void 0:tt.state)==null?void 0:Qe.decorations.underline)!==$e&&(this._currentLink.state.decorations.underline=$e,this._currentLink.state.isHovered&&this._fireUnderlineEvent(He.link,$e))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange($e=>{if(!this._currentLink)return;const Xe=$e.start===0?0:$e.start+1+this._bufferService.buffer.ydisp,tt=this._bufferService.buffer.ydisp+1+$e.end;if(this._currentLink.link.range.start.y>=Xe&&this._currentLink.link.range.end.y<=tt&&(this._clearCurrentLink(Xe,tt),this._lastMouseEvent)){const Qe=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);Qe&&this._askForLink(Qe,!1)}})))}_linkHover(He,Be,$e){var Xe;(Xe=this._currentLink)!=null&&Xe.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(Be,!0),this._currentLink.state.decorations.pointerCursor&&He.classList.add("xterm-cursor-pointer")),Be.hover&&Be.hover($e,Be.text)}_fireUnderlineEvent(He,Be){const $e=He.range,Xe=this._bufferService.buffer.ydisp,tt=this._createLinkUnderlineEvent($e.start.x-1,$e.start.y-Xe-1,$e.end.x,$e.end.y-Xe-1,void 0);(Be?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(tt)}_linkLeave(He,Be,$e){var Xe;(Xe=this._currentLink)!=null&&Xe.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(Be,!1),this._currentLink.state.decorations.pointerCursor&&He.classList.remove("xterm-cursor-pointer")),Be.leave&&Be.leave($e,Be.text)}_linkAtPosition(He,Be){const $e=He.range.start.y*this._bufferService.cols+He.range.start.x,Xe=He.range.end.y*this._bufferService.cols+He.range.end.x,tt=Be.y*this._bufferService.cols+Be.x;return $e<=tt&&tt<=Xe}_positionFromMouseEvent(He,Be,$e){const Xe=$e.getCoords(He,Be,this._bufferService.cols,this._bufferService.rows);if(Xe)return{x:Xe[0],y:Xe[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(He,Be,$e,Xe,tt){return{x1:He,y1:Be,x2:$e,y2:Xe,cols:this._bufferService.cols,fg:tt}}};De.Linkifier=p=Ke([Je(1,We.IMouseService),Je(2,We.IRenderService),Je(3,it.IBufferService),Je(4,We.ILinkProviderService)],p)},9042:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.tooMuchOutput=De.promptLabel=void 0,De.promptLabel="Terminal input",De.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(gt,De,Ge){var Ke=this&&this.__decorate||function(We,p,He,Be){var $e,Xe=arguments.length,tt=Xe<3?p:Be===null?Be=Object.getOwnPropertyDescriptor(p,He):Be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tt=Reflect.decorate(We,p,He,Be);else for(var Qe=We.length-1;Qe>=0;Qe--)($e=We[Qe])&&(tt=(Xe<3?$e(tt):Xe>3?$e(p,He,tt):$e(p,He))||tt);return Xe>3&&tt&&Object.defineProperty(p,He,tt),tt},Je=this&&this.__param||function(We,p){return function(He,Be){p(He,Be,We)}};Object.defineProperty(De,"__esModule",{value:!0}),De.OscLinkProvider=void 0;const Fe=Ge(511),Ye=Ge(2585);let et=De.OscLinkProvider=class{constructor(We,p,He){this._bufferService=We,this._optionsService=p,this._oscLinkService=He}provideLinks(We,p){var rt;const He=this._bufferService.buffer.lines.get(We-1);if(!He)return void p(void 0);const Be=[],$e=this._optionsService.rawOptions.linkHandler,Xe=new Fe.CellData,tt=He.getTrimmedLength();let Qe=-1,st=-1,Ze=!1;for(let ot=0;ot<tt;ot++)if(st!==-1||He.hasContent(ot)){if(He.loadCell(ot,Xe),Xe.hasExtendedAttrs()&&Xe.extended.urlId){if(st===-1){st=ot,Qe=Xe.extended.urlId;continue}Ze=Xe.extended.urlId!==Qe}else st!==-1&&(Ze=!0);if(Ze||st!==-1&&ot===tt-1){const dt=(rt=this._oscLinkService.getLinkData(Qe))==null?void 0:rt.uri;if(dt){const ct={start:{x:st+1,y:We},end:{x:ot+(Ze||ot!==tt-1?0:1),y:We}};let lt=!1;if(!($e!=null&&$e.allowNonHttpProtocols))try{const ft=new URL(dt);["http:","https:"].includes(ft.protocol)||(lt=!0)}catch{lt=!0}lt||Be.push({text:dt,range:ct,activate:(ft,pt)=>$e?$e.activate(ft,pt,ct):it(0,pt),hover:(ft,pt)=>{var Et;return(Et=$e==null?void 0:$e.hover)==null?void 0:Et.call($e,ft,pt,ct)},leave:(ft,pt)=>{var Et;return(Et=$e==null?void 0:$e.leave)==null?void 0:Et.call($e,ft,pt,ct)}})}Ze=!1,Xe.hasExtendedAttrs()&&Xe.extended.urlId?(st=ot,Qe=Xe.extended.urlId):(st=-1,Qe=-1)}}p(Be)}};function it(We,p){if(confirm(`Do you want to navigate to ${p}?

WARNING: This link could potentially be dangerous`)){const He=window.open();if(He){try{He.opener=null}catch{}He.location.href=p}else console.warn("Opening link blocked as opener could not be cleared")}}De.OscLinkProvider=et=Ke([Je(0,Ye.IBufferService),Je(1,Ye.IOptionsService),Je(2,Ye.IOscLinkService)],et)},6193:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.RenderDebouncer=void 0,De.RenderDebouncer=class{constructor(Ge,Ke){this._renderCallback=Ge,this._coreBrowserService=Ke,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(Ge){return this._refreshCallbacks.push(Ge),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(Ge,Ke,Je){this._rowCount=Je,Ge=Ge!==void 0?Ge:0,Ke=Ke!==void 0?Ke:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,Ge):Ge,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,Ke):Ke,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const Ge=Math.max(this._rowStart,0),Ke=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(Ge,Ke),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const Ge of this._refreshCallbacks)Ge(0);this._refreshCallbacks=[]}}},3236:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.Terminal=void 0;const Ke=Ge(3614),Je=Ge(3656),Fe=Ge(3551),Ye=Ge(9042),et=Ge(3730),it=Ge(1680),We=Ge(3107),p=Ge(5744),He=Ge(2950),Be=Ge(1296),$e=Ge(428),Xe=Ge(4269),tt=Ge(5114),Qe=Ge(8934),st=Ge(3230),Ze=Ge(9312),rt=Ge(4725),ot=Ge(6731),dt=Ge(8055),ct=Ge(8969),lt=Ge(8460),ft=Ge(844),pt=Ge(6114),Et=Ge(8437),yt=Ge(2584),wt=Ge(7399),nt=Ge(5941),ht=Ge(9074),_t=Ge(2585),vt=Ge(5435),Lt=Ge(4567),Dt=Ge(779);class Bt extends ct.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(St={}){super(St),this.browser=pt,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new ft.MutableDisposable),this._onCursorMove=this.register(new lt.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new lt.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new lt.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new lt.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new lt.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new lt.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new lt.EventEmitter),this._onBlur=this.register(new lt.EventEmitter),this._onA11yCharEmitter=this.register(new lt.EventEmitter),this._onA11yTabEmitter=this.register(new lt.EventEmitter),this._onWillOpen=this.register(new lt.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(ht.DecorationService),this._instantiationService.setService(_t.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Dt.LinkProviderService),this._instantiationService.setService(rt.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(et.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((ut,kt)=>this.refresh(ut,kt))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(ut=>this._reportWindowsOptions(ut))),this.register(this._inputHandler.onColor(ut=>this._handleColorEvent(ut))),this.register((0,lt.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,lt.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,lt.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,lt.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(ut=>this._afterResize(ut.cols,ut.rows))),this.register((0,ft.toDisposable)(()=>{var ut,kt;this._customKeyEventHandler=void 0,(kt=(ut=this.element)==null?void 0:ut.parentNode)==null||kt.removeChild(this.element)}))}_handleColorEvent(St){if(this._themeService)for(const ut of St){let kt,At="";switch(ut.index){case 256:kt="foreground",At="10";break;case 257:kt="background",At="11";break;case 258:kt="cursor",At="12";break;default:kt="ansi",At="4;"+ut.index}switch(ut.type){case 0:const Ot=dt.color.toColorRGB(kt==="ansi"?this._themeService.colors.ansi[ut.index]:this._themeService.colors[kt]);this.coreService.triggerDataEvent(`${yt.C0.ESC}]${At};${(0,nt.toRgbString)(Ot)}${yt.C1_ESCAPED.ST}`);break;case 1:if(kt==="ansi")this._themeService.modifyColors(Tt=>Tt.ansi[ut.index]=dt.channels.toColor(...ut.color));else{const Tt=kt;this._themeService.modifyColors(Ft=>Ft[Tt]=dt.channels.toColor(...ut.color))}break;case 2:this._themeService.restoreColor(ut.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(St){St?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Lt.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(St){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(yt.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var St;return(St=this.textarea)==null?void 0:St.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(yt.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const St=this.buffer.ybase+this.buffer.y,ut=this.buffer.lines.get(St);if(!ut)return;const kt=Math.min(this.buffer.x,this.cols-1),At=this._renderService.dimensions.css.cell.height,Ot=ut.getWidth(kt),Tt=this._renderService.dimensions.css.cell.width*Ot,Ft=this.buffer.y*this._renderService.dimensions.css.cell.height,It=kt*this._renderService.dimensions.css.cell.width;this.textarea.style.left=It+"px",this.textarea.style.top=Ft+"px",this.textarea.style.width=Tt+"px",this.textarea.style.height=At+"px",this.textarea.style.lineHeight=At+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,Je.addDisposableDomListener)(this.element,"copy",ut=>{this.hasSelection()&&(0,Ke.copyHandler)(ut,this._selectionService)}));const St=ut=>(0,Ke.handlePasteEvent)(ut,this.textarea,this.coreService,this.optionsService);this.register((0,Je.addDisposableDomListener)(this.textarea,"paste",St)),this.register((0,Je.addDisposableDomListener)(this.element,"paste",St)),pt.isFirefox?this.register((0,Je.addDisposableDomListener)(this.element,"mousedown",ut=>{ut.button===2&&(0,Ke.rightClickHandler)(ut,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,Je.addDisposableDomListener)(this.element,"contextmenu",ut=>{(0,Ke.rightClickHandler)(ut,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),pt.isLinux&&this.register((0,Je.addDisposableDomListener)(this.element,"auxclick",ut=>{ut.button===1&&(0,Ke.moveTextAreaUnderMouseCursor)(ut,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,Je.addDisposableDomListener)(this.textarea,"keyup",St=>this._keyUp(St),!0)),this.register((0,Je.addDisposableDomListener)(this.textarea,"keydown",St=>this._keyDown(St),!0)),this.register((0,Je.addDisposableDomListener)(this.textarea,"keypress",St=>this._keyPress(St),!0)),this.register((0,Je.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,Je.addDisposableDomListener)(this.textarea,"compositionupdate",St=>this._compositionHelper.compositionupdate(St))),this.register((0,Je.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,Je.addDisposableDomListener)(this.textarea,"input",St=>this._inputEvent(St),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(St){var kt;if(!St)throw new Error("Terminal requires a parent element.");if(St.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((kt=this.element)==null?void 0:kt.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=St.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),St.appendChild(this.element);const ut=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ut.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,Je.addDisposableDomListener)(this.screenElement,"mousemove",At=>this.updateCursorStyle(At))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ut.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Ye.promptLabel),pt.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(tt.CoreBrowserService,this.textarea,St.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(rt.ICoreBrowserService,this._coreBrowserService),this.register((0,Je.addDisposableDomListener)(this.textarea,"focus",At=>this._handleTextAreaFocus(At))),this.register((0,Je.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance($e.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(rt.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(ot.ThemeService),this._instantiationService.setService(rt.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Xe.CharacterJoinerService),this._instantiationService.setService(rt.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(st.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(rt.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(At=>this._onRender.fire(At))),this.onResize(At=>this._renderService.resize(At.cols,At.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(He.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(Qe.MouseService),this._instantiationService.setService(rt.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(Fe.Linkifier,this.screenElement)),this.element.appendChild(ut);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(it.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(At=>this.scrollLines(At.amount,At.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(Ze.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(rt.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(At=>this.scrollLines(At.amount,At.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(At=>this._renderService.handleSelectionChanged(At.start,At.end,At.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(At=>{this.textarea.value=At,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(At=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,Je.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(We.BufferDecorationRenderer,this.screenElement)),this.register((0,Je.addDisposableDomListener)(this.element,"mousedown",At=>this._selectionService.handleMouseDown(At))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Lt.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",At=>this._handleScreenReaderModeOptionChange(At))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(p.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",At=>{!this._overviewRulerRenderer&&At&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(p.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(Be.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const St=this,ut=this.element;function kt(Tt){const Ft=St._mouseService.getMouseReportCoords(Tt,St.screenElement);if(!Ft)return!1;let It,zt;switch(Tt.overrideType||Tt.type){case"mousemove":zt=32,Tt.buttons===void 0?(It=3,Tt.button!==void 0&&(It=Tt.button<3?Tt.button:3)):It=1&Tt.buttons?0:4&Tt.buttons?1:2&Tt.buttons?2:3;break;case"mouseup":zt=0,It=Tt.button<3?Tt.button:3;break;case"mousedown":zt=1,It=Tt.button<3?Tt.button:3;break;case"wheel":if(St._customWheelEventHandler&&St._customWheelEventHandler(Tt)===!1||St.viewport.getLinesScrolled(Tt)===0)return!1;zt=Tt.deltaY<0?0:1,It=4;break;default:return!1}return!(zt===void 0||It===void 0||It>4)&&St.coreMouseService.triggerMouseEvent({col:Ft.col,row:Ft.row,x:Ft.x,y:Ft.y,button:It,action:zt,ctrl:Tt.ctrlKey,alt:Tt.altKey,shift:Tt.shiftKey})}const At={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Ot={mouseup:Tt=>(kt(Tt),Tt.buttons||(this._document.removeEventListener("mouseup",At.mouseup),At.mousedrag&&this._document.removeEventListener("mousemove",At.mousedrag)),this.cancel(Tt)),wheel:Tt=>(kt(Tt),this.cancel(Tt,!0)),mousedrag:Tt=>{Tt.buttons&&kt(Tt)},mousemove:Tt=>{Tt.buttons||kt(Tt)}};this.register(this.coreMouseService.onProtocolChange(Tt=>{Tt?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Tt)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Tt?At.mousemove||(ut.addEventListener("mousemove",Ot.mousemove),At.mousemove=Ot.mousemove):(ut.removeEventListener("mousemove",At.mousemove),At.mousemove=null),16&Tt?At.wheel||(ut.addEventListener("wheel",Ot.wheel,{passive:!1}),At.wheel=Ot.wheel):(ut.removeEventListener("wheel",At.wheel),At.wheel=null),2&Tt?At.mouseup||(At.mouseup=Ot.mouseup):(this._document.removeEventListener("mouseup",At.mouseup),At.mouseup=null),4&Tt?At.mousedrag||(At.mousedrag=Ot.mousedrag):(this._document.removeEventListener("mousemove",At.mousedrag),At.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,Je.addDisposableDomListener)(ut,"mousedown",Tt=>{if(Tt.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Tt))return kt(Tt),At.mouseup&&this._document.addEventListener("mouseup",At.mouseup),At.mousedrag&&this._document.addEventListener("mousemove",At.mousedrag),this.cancel(Tt)})),this.register((0,Je.addDisposableDomListener)(ut,"wheel",Tt=>{if(!At.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Tt)===!1)return!1;if(!this.buffer.hasScrollback){const Ft=this.viewport.getLinesScrolled(Tt);if(Ft===0)return;const It=yt.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Tt.deltaY<0?"A":"B");let zt="";for(let Kt=0;Kt<Math.abs(Ft);Kt++)zt+=It;return this.coreService.triggerDataEvent(zt,!0),this.cancel(Tt,!0)}return this.viewport.handleWheel(Tt)?this.cancel(Tt):void 0}},{passive:!1})),this.register((0,Je.addDisposableDomListener)(ut,"touchstart",Tt=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Tt),this.cancel(Tt)},{passive:!0})),this.register((0,Je.addDisposableDomListener)(ut,"touchmove",Tt=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Tt)?void 0:this.cancel(Tt)},{passive:!1}))}refresh(St,ut){var kt;(kt=this._renderService)==null||kt.refreshRows(St,ut)}updateCursorStyle(St){var ut;(ut=this._selectionService)!=null&&ut.shouldColumnSelect(St)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(St,ut,kt=0){var At;kt===1?(super.scrollLines(St,ut,kt),this.refresh(0,this.rows-1)):(At=this.viewport)==null||At.scrollLines(St)}paste(St){(0,Ke.paste)(St,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(St){this._customKeyEventHandler=St}attachCustomWheelEventHandler(St){this._customWheelEventHandler=St}registerLinkProvider(St){return this._linkProviderService.registerLinkProvider(St)}registerCharacterJoiner(St){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const ut=this._characterJoinerService.register(St);return this.refresh(0,this.rows-1),ut}deregisterCharacterJoiner(St){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(St)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(St){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+St)}registerDecoration(St){return this._decorationService.registerDecoration(St)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(St,ut,kt){this._selectionService.setSelection(St,ut,kt)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var St;(St=this._selectionService)==null||St.clearSelection()}selectAll(){var St;(St=this._selectionService)==null||St.selectAll()}selectLines(St,ut){var kt;(kt=this._selectionService)==null||kt.selectLines(St,ut)}_keyDown(St){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(St)===!1)return!1;const ut=this.browser.isMac&&this.options.macOptionIsMeta&&St.altKey;if(!ut&&!this._compositionHelper.keydown(St))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;ut||St.key!=="Dead"&&St.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const kt=(0,wt.evaluateKeyboardEvent)(St,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(St),kt.type===3||kt.type===2){const At=this.rows-1;return this.scrollLines(kt.type===2?-At:At),this.cancel(St,!0)}return kt.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,St)||(kt.cancel&&this.cancel(St,!0),!kt.key||!!(St.key&&!St.ctrlKey&&!St.altKey&&!St.metaKey&&St.key.length===1&&St.key.charCodeAt(0)>=65&&St.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(kt.key!==yt.C0.ETX&&kt.key!==yt.C0.CR||(this.textarea.value=""),this._onKey.fire({key:kt.key,domEvent:St}),this._showCursor(),this.coreService.triggerDataEvent(kt.key,!0),!this.optionsService.rawOptions.screenReaderMode||St.altKey||St.ctrlKey?this.cancel(St,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(St,ut){const kt=St.isMac&&!this.options.macOptionIsMeta&&ut.altKey&&!ut.ctrlKey&&!ut.metaKey||St.isWindows&&ut.altKey&&ut.ctrlKey&&!ut.metaKey||St.isWindows&&ut.getModifierState("AltGraph");return ut.type==="keypress"?kt:kt&&(!ut.keyCode||ut.keyCode>47)}_keyUp(St){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(St)===!1||(function(ut){return ut.keyCode===16||ut.keyCode===17||ut.keyCode===18}(St)||this.focus(),this.updateCursorStyle(St),this._keyPressHandled=!1)}_keyPress(St){let ut;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(St)===!1)return!1;if(this.cancel(St),St.charCode)ut=St.charCode;else if(St.which===null||St.which===void 0)ut=St.keyCode;else{if(St.which===0||St.charCode===0)return!1;ut=St.which}return!(!ut||(St.altKey||St.ctrlKey||St.metaKey)&&!this._isThirdLevelShift(this.browser,St)||(ut=String.fromCharCode(ut),this._onKey.fire({key:ut,domEvent:St}),this._showCursor(),this.coreService.triggerDataEvent(ut,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(St){if(St.data&&St.inputType==="insertText"&&(!St.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const ut=St.data;return this.coreService.triggerDataEvent(ut,!0),this.cancel(St),!0}return!1}resize(St,ut){St!==this.cols||ut!==this.rows?super.resize(St,ut):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(St,ut){var kt,At;(kt=this._charSizeService)==null||kt.measure(),(At=this.viewport)==null||At.syncScrollArea(!0)}clear(){var St;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let ut=1;ut<this.rows;ut++)this.buffer.lines.push(this.buffer.getBlankLine(Et.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(St=this.viewport)==null||St.reset(),this.refresh(0,this.rows-1)}}reset(){var ut,kt;this.options.rows=this.rows,this.options.cols=this.cols;const St=this._customKeyEventHandler;this._setup(),super.reset(),(ut=this._selectionService)==null||ut.reset(),this._decorationService.reset(),(kt=this.viewport)==null||kt.reset(),this._customKeyEventHandler=St,this.refresh(0,this.rows-1)}clearTextureAtlas(){var St;(St=this._renderService)==null||St.clearTextureAtlas()}_reportFocus(){var St;(St=this.element)!=null&&St.classList.contains("focus")?this.coreService.triggerDataEvent(yt.C0.ESC+"[I"):this.coreService.triggerDataEvent(yt.C0.ESC+"[O")}_reportWindowsOptions(St){if(this._renderService)switch(St){case vt.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const ut=this._renderService.dimensions.css.canvas.width.toFixed(0),kt=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${yt.C0.ESC}[4;${kt};${ut}t`);break;case vt.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const At=this._renderService.dimensions.css.cell.width.toFixed(0),Ot=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${yt.C0.ESC}[6;${Ot};${At}t`)}}cancel(St,ut){if(this.options.cancelEvents||ut)return St.preventDefault(),St.stopPropagation(),!1}}De.Terminal=Bt},9924:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.TimeBasedDebouncer=void 0,De.TimeBasedDebouncer=class{constructor(Ge,Ke=1e3){this._renderCallback=Ge,this._debounceThresholdMS=Ke,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(Ge,Ke,Je){this._rowCount=Je,Ge=Ge!==void 0?Ge:0,Ke=Ke!==void 0?Ke:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,Ge):Ge,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,Ke):Ke;const Fe=Date.now();if(Fe-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=Fe,this._innerRefresh();else if(!this._additionalRefreshRequested){const Ye=Fe-this._lastRefreshMs,et=this._debounceThresholdMS-Ye;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},et)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const Ge=Math.max(this._rowStart,0),Ke=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(Ge,Ke)}}},1680:function(gt,De,Ge){var Ke=this&&this.__decorate||function(He,Be,$e,Xe){var tt,Qe=arguments.length,st=Qe<3?Be:Xe===null?Xe=Object.getOwnPropertyDescriptor(Be,$e):Xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(He,Be,$e,Xe);else for(var Ze=He.length-1;Ze>=0;Ze--)(tt=He[Ze])&&(st=(Qe<3?tt(st):Qe>3?tt(Be,$e,st):tt(Be,$e))||st);return Qe>3&&st&&Object.defineProperty(Be,$e,st),st},Je=this&&this.__param||function(He,Be){return function($e,Xe){Be($e,Xe,He)}};Object.defineProperty(De,"__esModule",{value:!0}),De.Viewport=void 0;const Fe=Ge(3656),Ye=Ge(4725),et=Ge(8460),it=Ge(844),We=Ge(2585);let p=De.Viewport=class extends it.Disposable{constructor(He,Be,$e,Xe,tt,Qe,st,Ze){super(),this._viewportElement=He,this._scrollArea=Be,this._bufferService=$e,this._optionsService=Xe,this._charSizeService=tt,this._renderService=Qe,this._coreBrowserService=st,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new et.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,Fe.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(rt=>this._activeBuffer=rt.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(rt=>this._renderDimensions=rt)),this._handleThemeChange(Ze.colors),this.register(Ze.onChangeColors(rt=>this._handleThemeChange(rt))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(He){this._viewportElement.style.backgroundColor=He.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(He){if(He)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const Be=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==Be&&(this._lastRecordedBufferHeight=Be,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const He=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==He&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=He),this._refreshAnimationFrame=null}syncScrollArea(He=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(He);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(He)}_handleScroll(He){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const Be=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:Be,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const He=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(He*(this._smoothScrollState.target-this._smoothScrollState.origin)),He<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(He,Be){const $e=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(Be<0&&this._viewportElement.scrollTop!==0||Be>0&&$e<this._lastRecordedBufferHeight)||(He.cancelable&&He.preventDefault(),!1)}handleWheel(He){const Be=this._getPixelsScrolled(He);return Be!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+Be:this._smoothScrollState.target+=Be,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=Be,this._bubbleScroll(He,Be))}scrollLines(He){if(He!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const Be=He*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+Be,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:He,suppressScrollEvent:!1})}_getPixelsScrolled(He){if(He.deltaY===0||He.shiftKey)return 0;let Be=this._applyScrollModifier(He.deltaY,He);return He.deltaMode===WheelEvent.DOM_DELTA_LINE?Be*=this._currentRowHeight:He.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(Be*=this._currentRowHeight*this._bufferService.rows),Be}getBufferElements(He,Be){var Ze;let $e,Xe="";const tt=[],Qe=Be??this._bufferService.buffer.lines.length,st=this._bufferService.buffer.lines;for(let rt=He;rt<Qe;rt++){const ot=st.get(rt);if(!ot)continue;const dt=(Ze=st.get(rt+1))==null?void 0:Ze.isWrapped;if(Xe+=ot.translateToString(!dt),!dt||rt===st.length-1){const ct=document.createElement("div");ct.textContent=Xe,tt.push(ct),Xe.length>0&&($e=ct),Xe=""}}return{bufferElements:tt,cursorElement:$e}}getLinesScrolled(He){if(He.deltaY===0||He.shiftKey)return 0;let Be=this._applyScrollModifier(He.deltaY,He);return He.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(Be/=this._currentRowHeight+0,this._wheelPartialScroll+=Be,Be=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):He.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(Be*=this._bufferService.rows),Be}_applyScrollModifier(He,Be){const $e=this._optionsService.rawOptions.fastScrollModifier;return $e==="alt"&&Be.altKey||$e==="ctrl"&&Be.ctrlKey||$e==="shift"&&Be.shiftKey?He*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:He*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(He){this._lastTouchY=He.touches[0].pageY}handleTouchMove(He){const Be=this._lastTouchY-He.touches[0].pageY;return this._lastTouchY=He.touches[0].pageY,Be!==0&&(this._viewportElement.scrollTop+=Be,this._bubbleScroll(He,Be))}};De.Viewport=p=Ke([Je(2,We.IBufferService),Je(3,We.IOptionsService),Je(4,Ye.ICharSizeService),Je(5,Ye.IRenderService),Je(6,Ye.ICoreBrowserService),Je(7,Ye.IThemeService)],p)},3107:function(gt,De,Ge){var Ke=this&&this.__decorate||function(We,p,He,Be){var $e,Xe=arguments.length,tt=Xe<3?p:Be===null?Be=Object.getOwnPropertyDescriptor(p,He):Be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tt=Reflect.decorate(We,p,He,Be);else for(var Qe=We.length-1;Qe>=0;Qe--)($e=We[Qe])&&(tt=(Xe<3?$e(tt):Xe>3?$e(p,He,tt):$e(p,He))||tt);return Xe>3&&tt&&Object.defineProperty(p,He,tt),tt},Je=this&&this.__param||function(We,p){return function(He,Be){p(He,Be,We)}};Object.defineProperty(De,"__esModule",{value:!0}),De.BufferDecorationRenderer=void 0;const Fe=Ge(4725),Ye=Ge(844),et=Ge(2585);let it=De.BufferDecorationRenderer=class extends Ye.Disposable{constructor(We,p,He,Be,$e){super(),this._screenElement=We,this._bufferService=p,this._coreBrowserService=He,this._decorationService=Be,this._renderService=$e,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(Xe=>this._removeDecoration(Xe))),this.register((0,Ye.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const We of this._decorationService.decorations)this._renderDecoration(We);this._dimensionsChanged=!1}_renderDecoration(We){this._refreshStyle(We),this._dimensionsChanged&&this._refreshXPosition(We)}_createElement(We){var Be;const p=this._coreBrowserService.mainDocument.createElement("div");p.classList.add("xterm-decoration"),p.classList.toggle("xterm-decoration-top-layer",((Be=We==null?void 0:We.options)==null?void 0:Be.layer)==="top"),p.style.width=`${Math.round((We.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,p.style.height=(We.options.height||1)*this._renderService.dimensions.css.cell.height+"px",p.style.top=(We.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",p.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const He=We.options.x??0;return He&&He>this._bufferService.cols&&(p.style.display="none"),this._refreshXPosition(We,p),p}_refreshStyle(We){const p=We.marker.line-this._bufferService.buffers.active.ydisp;if(p<0||p>=this._bufferService.rows)We.element&&(We.element.style.display="none",We.onRenderEmitter.fire(We.element));else{let He=this._decorationElements.get(We);He||(He=this._createElement(We),We.element=He,this._decorationElements.set(We,He),this._container.appendChild(He),We.onDispose(()=>{this._decorationElements.delete(We),He.remove()})),He.style.top=p*this._renderService.dimensions.css.cell.height+"px",He.style.display=this._altBufferIsActive?"none":"block",We.onRenderEmitter.fire(He)}}_refreshXPosition(We,p=We.element){if(!p)return;const He=We.options.x??0;(We.options.anchor||"left")==="right"?p.style.right=He?He*this._renderService.dimensions.css.cell.width+"px":"":p.style.left=He?He*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(We){var p;(p=this._decorationElements.get(We))==null||p.remove(),this._decorationElements.delete(We),We.dispose()}};De.BufferDecorationRenderer=it=Ke([Je(1,et.IBufferService),Je(2,Fe.ICoreBrowserService),Je(3,et.IDecorationService),Je(4,Fe.IRenderService)],it)},5871:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.ColorZoneStore=void 0,De.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(Ge){if(Ge.options.overviewRulerOptions){for(const Ke of this._zones)if(Ke.color===Ge.options.overviewRulerOptions.color&&Ke.position===Ge.options.overviewRulerOptions.position){if(this._lineIntersectsZone(Ke,Ge.marker.line))return;if(this._lineAdjacentToZone(Ke,Ge.marker.line,Ge.options.overviewRulerOptions.position))return void this._addLineToZone(Ke,Ge.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=Ge.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=Ge.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=Ge.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=Ge.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:Ge.options.overviewRulerOptions.color,position:Ge.options.overviewRulerOptions.position,startBufferLine:Ge.marker.line,endBufferLine:Ge.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(Ge){this._linePadding=Ge}_lineIntersectsZone(Ge,Ke){return Ke>=Ge.startBufferLine&&Ke<=Ge.endBufferLine}_lineAdjacentToZone(Ge,Ke,Je){return Ke>=Ge.startBufferLine-this._linePadding[Je||"full"]&&Ke<=Ge.endBufferLine+this._linePadding[Je||"full"]}_addLineToZone(Ge,Ke){Ge.startBufferLine=Math.min(Ge.startBufferLine,Ke),Ge.endBufferLine=Math.max(Ge.endBufferLine,Ke)}}},5744:function(gt,De,Ge){var Ke=this&&this.__decorate||function($e,Xe,tt,Qe){var st,Ze=arguments.length,rt=Ze<3?Xe:Qe===null?Qe=Object.getOwnPropertyDescriptor(Xe,tt):Qe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")rt=Reflect.decorate($e,Xe,tt,Qe);else for(var ot=$e.length-1;ot>=0;ot--)(st=$e[ot])&&(rt=(Ze<3?st(rt):Ze>3?st(Xe,tt,rt):st(Xe,tt))||rt);return Ze>3&&rt&&Object.defineProperty(Xe,tt,rt),rt},Je=this&&this.__param||function($e,Xe){return function(tt,Qe){Xe(tt,Qe,$e)}};Object.defineProperty(De,"__esModule",{value:!0}),De.OverviewRulerRenderer=void 0;const Fe=Ge(5871),Ye=Ge(4725),et=Ge(844),it=Ge(2585),We={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0},He={full:0,left:0,center:0,right:0};let Be=De.OverviewRulerRenderer=class extends et.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor($e,Xe,tt,Qe,st,Ze,rt){var dt;super(),this._viewportElement=$e,this._screenElement=Xe,this._bufferService=tt,this._decorationService=Qe,this._renderService=st,this._optionsService=Ze,this._coreBrowserService=rt,this._colorZoneStore=new Fe.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(dt=this._viewportElement.parentElement)==null||dt.insertBefore(this._canvas,this._viewportElement);const ot=this._canvas.getContext("2d");if(!ot)throw new Error("Ctx cannot be null");this._ctx=ot,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,et.toDisposable)(()=>{var ct;(ct=this._canvas)==null||ct.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const $e=Math.floor(this._canvas.width/3),Xe=Math.ceil(this._canvas.width/3);p.full=this._canvas.width,p.left=$e,p.center=Xe,p.right=$e,this._refreshDrawHeightConstants(),He.full=0,He.left=0,He.center=p.left,He.right=p.left+p.center}_refreshDrawHeightConstants(){We.full=Math.round(2*this._coreBrowserService.dpr);const $e=this._canvas.height/this._bufferService.buffer.lines.length,Xe=Math.round(Math.max(Math.min($e,12),6)*this._coreBrowserService.dpr);We.left=Xe,We.center=Xe,We.right=Xe}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*We.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*We.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*We.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*We.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const Xe of this._decorationService.decorations)this._colorZoneStore.addDecoration(Xe);this._ctx.lineWidth=1;const $e=this._colorZoneStore.zones;for(const Xe of $e)Xe.position!=="full"&&this._renderColorZone(Xe);for(const Xe of $e)Xe.position==="full"&&this._renderColorZone(Xe);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone($e){this._ctx.fillStyle=$e.color,this._ctx.fillRect(He[$e.position||"full"],Math.round((this._canvas.height-1)*($e.startBufferLine/this._bufferService.buffers.active.lines.length)-We[$e.position||"full"]/2),p[$e.position||"full"],Math.round((this._canvas.height-1)*(($e.endBufferLine-$e.startBufferLine)/this._bufferService.buffers.active.lines.length)+We[$e.position||"full"]))}_queueRefresh($e,Xe){this._shouldUpdateDimensions=$e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=Xe||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};De.OverviewRulerRenderer=Be=Ke([Je(2,it.IBufferService),Je(3,it.IDecorationService),Je(4,Ye.IRenderService),Je(5,it.IOptionsService),Je(6,Ye.ICoreBrowserService)],Be)},2950:function(gt,De,Ge){var Ke=this&&this.__decorate||function(We,p,He,Be){var $e,Xe=arguments.length,tt=Xe<3?p:Be===null?Be=Object.getOwnPropertyDescriptor(p,He):Be;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")tt=Reflect.decorate(We,p,He,Be);else for(var Qe=We.length-1;Qe>=0;Qe--)($e=We[Qe])&&(tt=(Xe<3?$e(tt):Xe>3?$e(p,He,tt):$e(p,He))||tt);return Xe>3&&tt&&Object.defineProperty(p,He,tt),tt},Je=this&&this.__param||function(We,p){return function(He,Be){p(He,Be,We)}};Object.defineProperty(De,"__esModule",{value:!0}),De.CompositionHelper=void 0;const Fe=Ge(4725),Ye=Ge(2585),et=Ge(2584);let it=De.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(We,p,He,Be,$e,Xe){this._textarea=We,this._compositionView=p,this._bufferService=He,this._optionsService=Be,this._coreService=$e,this._renderService=Xe,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(We){this._compositionView.textContent=We.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(We){if(this._isComposing||this._isSendingComposition){if(We.keyCode===229||We.keyCode===16||We.keyCode===17||We.keyCode===18)return!1;this._finalizeComposition(!1)}return We.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(We){if(this._compositionView.classList.remove("active"),this._isComposing=!1,We){const p={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let He;this._isSendingComposition=!1,p.start+=this._dataAlreadySent.length,He=this._isComposing?this._textarea.value.substring(p.start,p.end):this._textarea.value.substring(p.start),He.length>0&&this._coreService.triggerDataEvent(He,!0)}},0)}else{this._isSendingComposition=!1;const p=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(p,!0)}}_handleAnyTextareaChanges(){const We=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const p=this._textarea.value,He=p.replace(We,"");this._dataAlreadySent=He,p.length>We.length?this._coreService.triggerDataEvent(He,!0):p.length<We.length?this._coreService.triggerDataEvent(`${et.C0.DEL}`,!0):p.length===We.length&&p!==We&&this._coreService.triggerDataEvent(p,!0)}},0)}updateCompositionElements(We){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const p=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),He=this._renderService.dimensions.css.cell.height,Be=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,$e=p*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=$e+"px",this._compositionView.style.top=Be+"px",this._compositionView.style.height=He+"px",this._compositionView.style.lineHeight=He+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const Xe=this._compositionView.getBoundingClientRect();this._textarea.style.left=$e+"px",this._textarea.style.top=Be+"px",this._textarea.style.width=Math.max(Xe.width,1)+"px",this._textarea.style.height=Math.max(Xe.height,1)+"px",this._textarea.style.lineHeight=Xe.height+"px"}We||setTimeout(()=>this.updateCompositionElements(!0),0)}}};De.CompositionHelper=it=Ke([Je(2,Ye.IBufferService),Je(3,Ye.IOptionsService),Je(4,Ye.ICoreService),Je(5,Fe.IRenderService)],it)},9806:(gt,De)=>{function Ge(Ke,Je,Fe){const Ye=Fe.getBoundingClientRect(),et=Ke.getComputedStyle(Fe),it=parseInt(et.getPropertyValue("padding-left")),We=parseInt(et.getPropertyValue("padding-top"));return[Je.clientX-Ye.left-it,Je.clientY-Ye.top-We]}Object.defineProperty(De,"__esModule",{value:!0}),De.getCoords=De.getCoordsRelativeToElement=void 0,De.getCoordsRelativeToElement=Ge,De.getCoords=function(Ke,Je,Fe,Ye,et,it,We,p,He){if(!it)return;const Be=Ge(Ke,Je,Fe);return Be?(Be[0]=Math.ceil((Be[0]+(He?We/2:0))/We),Be[1]=Math.ceil(Be[1]/p),Be[0]=Math.min(Math.max(Be[0],1),Ye+(He?1:0)),Be[1]=Math.min(Math.max(Be[1],1),et),Be):void 0}},9504:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.moveToCellSequence=void 0;const Ke=Ge(2584);function Je(p,He,Be,$e){const Xe=p-Fe(p,Be),tt=He-Fe(He,Be),Qe=Math.abs(Xe-tt)-function(st,Ze,rt){let ot=0;const dt=st-Fe(st,rt),ct=Ze-Fe(Ze,rt);for(let lt=0;lt<Math.abs(dt-ct);lt++){const ft=Ye(st,Ze)==="A"?-1:1,pt=rt.buffer.lines.get(dt+ft*lt);pt!=null&&pt.isWrapped&&ot++}return ot}(p,He,Be);return We(Qe,it(Ye(p,He),$e))}function Fe(p,He){let Be=0,$e=He.buffer.lines.get(p),Xe=$e==null?void 0:$e.isWrapped;for(;Xe&&p>=0&&p<He.rows;)Be++,$e=He.buffer.lines.get(--p),Xe=$e==null?void 0:$e.isWrapped;return Be}function Ye(p,He){return p>He?"A":"B"}function et(p,He,Be,$e,Xe,tt){let Qe=p,st=He,Ze="";for(;Qe!==Be||st!==$e;)Qe+=Xe?1:-1,Xe&&Qe>tt.cols-1?(Ze+=tt.buffer.translateBufferLineToString(st,!1,p,Qe),Qe=0,p=0,st++):!Xe&&Qe<0&&(Ze+=tt.buffer.translateBufferLineToString(st,!1,0,p+1),Qe=tt.cols-1,p=Qe,st--);return Ze+tt.buffer.translateBufferLineToString(st,!1,p,Qe)}function it(p,He){const Be=He?"O":"[";return Ke.C0.ESC+Be+p}function We(p,He){p=Math.floor(p);let Be="";for(let $e=0;$e<p;$e++)Be+=He;return Be}De.moveToCellSequence=function(p,He,Be,$e){const Xe=Be.buffer.x,tt=Be.buffer.y;if(!Be.buffer.hasScrollback)return function(Ze,rt,ot,dt,ct,lt){return Je(rt,dt,ct,lt).length===0?"":We(et(Ze,rt,Ze,rt-Fe(rt,ct),!1,ct).length,it("D",lt))}(Xe,tt,0,He,Be,$e)+Je(tt,He,Be,$e)+function(Ze,rt,ot,dt,ct,lt){let ft;ft=Je(rt,dt,ct,lt).length>0?dt-Fe(dt,ct):rt;const pt=dt,Et=function(yt,wt,nt,ht,_t,vt){let Lt;return Lt=Je(nt,ht,_t,vt).length>0?ht-Fe(ht,_t):wt,yt<nt&&Lt<=ht||yt>=nt&&Lt<ht?"C":"D"}(Ze,rt,ot,dt,ct,lt);return We(et(Ze,ft,ot,pt,Et==="C",ct).length,it(Et,lt))}(Xe,tt,p,He,Be,$e);let Qe;if(tt===He)return Qe=Xe>p?"D":"C",We(Math.abs(Xe-p),it(Qe,$e));Qe=tt>He?"D":"C";const st=Math.abs(tt-He);return We(function(Ze,rt){return rt.cols-Ze}(tt>He?p:Xe,Be)+(st-1)*Be.cols+1+((tt>He?Xe:p)-1),it(Qe,$e))}},1296:function(gt,De,Ge){var Ke=this&&this.__decorate||function(lt,ft,pt,Et){var yt,wt=arguments.length,nt=wt<3?ft:Et===null?Et=Object.getOwnPropertyDescriptor(ft,pt):Et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")nt=Reflect.decorate(lt,ft,pt,Et);else for(var ht=lt.length-1;ht>=0;ht--)(yt=lt[ht])&&(nt=(wt<3?yt(nt):wt>3?yt(ft,pt,nt):yt(ft,pt))||nt);return wt>3&&nt&&Object.defineProperty(ft,pt,nt),nt},Je=this&&this.__param||function(lt,ft){return function(pt,Et){ft(pt,Et,lt)}};Object.defineProperty(De,"__esModule",{value:!0}),De.DomRenderer=void 0;const Fe=Ge(3787),Ye=Ge(2550),et=Ge(2223),it=Ge(6171),We=Ge(6052),p=Ge(4725),He=Ge(8055),Be=Ge(8460),$e=Ge(844),Xe=Ge(2585),tt="xterm-dom-renderer-owner-",Qe="xterm-rows",st="xterm-fg-",Ze="xterm-bg-",rt="xterm-focus",ot="xterm-selection";let dt=1,ct=De.DomRenderer=class extends $e.Disposable{constructor(lt,ft,pt,Et,yt,wt,nt,ht,_t,vt,Lt,Dt,Bt){super(),this._terminal=lt,this._document=ft,this._element=pt,this._screenElement=Et,this._viewportElement=yt,this._helperContainer=wt,this._linkifier2=nt,this._charSizeService=_t,this._optionsService=vt,this._bufferService=Lt,this._coreBrowserService=Dt,this._themeService=Bt,this._terminalClass=dt++,this._rowElements=[],this._selectionRenderModel=(0,We.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new Be.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(Qe),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(ot),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,it.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(Mt=>this._injectCss(Mt))),this._injectCss(this._themeService.colors),this._rowFactory=ht.createInstance(Fe.DomRendererRowFactory,document),this._element.classList.add(tt+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(Mt=>this._handleLinkHover(Mt))),this.register(this._linkifier2.onHideLinkUnderline(Mt=>this._handleLinkLeave(Mt))),this.register((0,$e.toDisposable)(()=>{this._element.classList.remove(tt+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Ye.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const lt=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*lt,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*lt),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/lt),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/lt),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const pt of this._rowElements)pt.style.width=`${this.dimensions.css.canvas.width}px`,pt.style.height=`${this.dimensions.css.cell.height}px`,pt.style.lineHeight=`${this.dimensions.css.cell.height}px`,pt.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const ft=`${this._terminalSelector} .${Qe} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=ft,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(lt){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let ft=`${this._terminalSelector} .${Qe} { color: ${lt.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;ft+=`${this._terminalSelector} .${Qe} .xterm-dim { color: ${He.color.multiplyOpacity(lt.foreground,.5).css};}`,ft+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const pt=`blink_underline_${this._terminalClass}`,Et=`blink_bar_${this._terminalClass}`,yt=`blink_block_${this._terminalClass}`;ft+=`@keyframes ${pt} { 50% {  border-bottom-style: hidden; }}`,ft+=`@keyframes ${Et} { 50% {  box-shadow: none; }}`,ft+=`@keyframes ${yt} { 0% {  background-color: ${lt.cursor.css};  color: ${lt.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${lt.cursor.css}; }}`,ft+=`${this._terminalSelector} .${Qe}.${rt} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${pt} 1s step-end infinite;}${this._terminalSelector} .${Qe}.${rt} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Et} 1s step-end infinite;}${this._terminalSelector} .${Qe}.${rt} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${yt} 1s step-end infinite;}${this._terminalSelector} .${Qe} .xterm-cursor.xterm-cursor-block { background-color: ${lt.cursor.css}; color: ${lt.cursorAccent.css};}${this._terminalSelector} .${Qe} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${lt.cursor.css} !important; color: ${lt.cursorAccent.css} !important;}${this._terminalSelector} .${Qe} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${lt.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Qe} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${lt.cursor.css} inset;}${this._terminalSelector} .${Qe} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${lt.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,ft+=`${this._terminalSelector} .${ot} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${ot} div { position: absolute; background-color: ${lt.selectionBackgroundOpaque.css};}${this._terminalSelector} .${ot} div { position: absolute; background-color: ${lt.selectionInactiveBackgroundOpaque.css};}`;for(const[wt,nt]of lt.ansi.entries())ft+=`${this._terminalSelector} .${st}${wt} { color: ${nt.css}; }${this._terminalSelector} .${st}${wt}.xterm-dim { color: ${He.color.multiplyOpacity(nt,.5).css}; }${this._terminalSelector} .${Ze}${wt} { background-color: ${nt.css}; }`;ft+=`${this._terminalSelector} .${st}${et.INVERTED_DEFAULT_COLOR} { color: ${He.color.opaque(lt.background).css}; }${this._terminalSelector} .${st}${et.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${He.color.multiplyOpacity(He.color.opaque(lt.background),.5).css}; }${this._terminalSelector} .${Ze}${et.INVERTED_DEFAULT_COLOR} { background-color: ${lt.foreground.css}; }`,this._themeStyleElement.textContent=ft}_setDefaultSpacing(){const lt=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${lt}px`,this._rowFactory.defaultSpacing=lt}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(lt,ft){for(let pt=this._rowElements.length;pt<=ft;pt++){const Et=this._document.createElement("div");this._rowContainer.appendChild(Et),this._rowElements.push(Et)}for(;this._rowElements.length>ft;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(lt,ft){this._refreshRowElements(lt,ft),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(rt),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(rt),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(lt,ft,pt){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(lt,ft,pt),this.renderRows(0,this._bufferService.rows-1),!lt||!ft)return;this._selectionRenderModel.update(this._terminal,lt,ft,pt);const Et=this._selectionRenderModel.viewportStartRow,yt=this._selectionRenderModel.viewportEndRow,wt=this._selectionRenderModel.viewportCappedStartRow,nt=this._selectionRenderModel.viewportCappedEndRow;if(wt>=this._bufferService.rows||nt<0)return;const ht=this._document.createDocumentFragment();if(pt){const _t=lt[0]>ft[0];ht.appendChild(this._createSelectionElement(wt,_t?ft[0]:lt[0],_t?lt[0]:ft[0],nt-wt+1))}else{const _t=Et===wt?lt[0]:0,vt=wt===yt?ft[0]:this._bufferService.cols;ht.appendChild(this._createSelectionElement(wt,_t,vt));const Lt=nt-wt-1;if(ht.appendChild(this._createSelectionElement(wt+1,0,this._bufferService.cols,Lt)),wt!==nt){const Dt=yt===nt?ft[0]:this._bufferService.cols;ht.appendChild(this._createSelectionElement(nt,0,Dt))}}this._selectionContainer.appendChild(ht)}_createSelectionElement(lt,ft,pt,Et=1){const yt=this._document.createElement("div"),wt=ft*this.dimensions.css.cell.width;let nt=this.dimensions.css.cell.width*(pt-ft);return wt+nt>this.dimensions.css.canvas.width&&(nt=this.dimensions.css.canvas.width-wt),yt.style.height=Et*this.dimensions.css.cell.height+"px",yt.style.top=lt*this.dimensions.css.cell.height+"px",yt.style.left=`${wt}px`,yt.style.width=`${nt}px`,yt}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const lt of this._rowElements)lt.replaceChildren()}renderRows(lt,ft){const pt=this._bufferService.buffer,Et=pt.ybase+pt.y,yt=Math.min(pt.x,this._bufferService.cols-1),wt=this._optionsService.rawOptions.cursorBlink,nt=this._optionsService.rawOptions.cursorStyle,ht=this._optionsService.rawOptions.cursorInactiveStyle;for(let _t=lt;_t<=ft;_t++){const vt=_t+pt.ydisp,Lt=this._rowElements[_t],Dt=pt.lines.get(vt);if(!Lt||!Dt)break;Lt.replaceChildren(...this._rowFactory.createRow(Dt,vt,vt===Et,nt,ht,yt,wt,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${tt}${this._terminalClass}`}_handleLinkHover(lt){this._setCellUnderline(lt.x1,lt.x2,lt.y1,lt.y2,lt.cols,!0)}_handleLinkLeave(lt){this._setCellUnderline(lt.x1,lt.x2,lt.y1,lt.y2,lt.cols,!1)}_setCellUnderline(lt,ft,pt,Et,yt,wt){pt<0&&(lt=0),Et<0&&(ft=0);const nt=this._bufferService.rows-1;pt=Math.max(Math.min(pt,nt),0),Et=Math.max(Math.min(Et,nt),0),yt=Math.min(yt,this._bufferService.cols);const ht=this._bufferService.buffer,_t=ht.ybase+ht.y,vt=Math.min(ht.x,yt-1),Lt=this._optionsService.rawOptions.cursorBlink,Dt=this._optionsService.rawOptions.cursorStyle,Bt=this._optionsService.rawOptions.cursorInactiveStyle;for(let Mt=pt;Mt<=Et;++Mt){const St=Mt+ht.ydisp,ut=this._rowElements[Mt],kt=ht.lines.get(St);if(!ut||!kt)break;ut.replaceChildren(...this._rowFactory.createRow(kt,St,St===_t,Dt,Bt,vt,Lt,this.dimensions.css.cell.width,this._widthCache,wt?Mt===pt?lt:0:-1,wt?(Mt===Et?ft:yt)-1:-1))}}};De.DomRenderer=ct=Ke([Je(7,Xe.IInstantiationService),Je(8,p.ICharSizeService),Je(9,Xe.IOptionsService),Je(10,Xe.IBufferService),Je(11,p.ICoreBrowserService),Je(12,p.IThemeService)],ct)},3787:function(gt,De,Ge){var Ke=this&&this.__decorate||function(Qe,st,Ze,rt){var ot,dt=arguments.length,ct=dt<3?st:rt===null?rt=Object.getOwnPropertyDescriptor(st,Ze):rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ct=Reflect.decorate(Qe,st,Ze,rt);else for(var lt=Qe.length-1;lt>=0;lt--)(ot=Qe[lt])&&(ct=(dt<3?ot(ct):dt>3?ot(st,Ze,ct):ot(st,Ze))||ct);return dt>3&&ct&&Object.defineProperty(st,Ze,ct),ct},Je=this&&this.__param||function(Qe,st){return function(Ze,rt){st(Ze,rt,Qe)}};Object.defineProperty(De,"__esModule",{value:!0}),De.DomRendererRowFactory=void 0;const Fe=Ge(2223),Ye=Ge(643),et=Ge(511),it=Ge(2585),We=Ge(8055),p=Ge(4725),He=Ge(4269),Be=Ge(6171),$e=Ge(3734);let Xe=De.DomRendererRowFactory=class{constructor(Qe,st,Ze,rt,ot,dt,ct){this._document=Qe,this._characterJoinerService=st,this._optionsService=Ze,this._coreBrowserService=rt,this._coreService=ot,this._decorationService=dt,this._themeService=ct,this._workCell=new et.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(Qe,st,Ze){this._selectionStart=Qe,this._selectionEnd=st,this._columnSelectMode=Ze}createRow(Qe,st,Ze,rt,ot,dt,ct,lt,ft,pt,Et){const yt=[],wt=this._characterJoinerService.getJoinedCharacters(st),nt=this._themeService.colors;let ht,_t=Qe.getNoBgTrimmedLength();Ze&&_t<dt+1&&(_t=dt+1);let vt=0,Lt="",Dt=0,Bt=0,Mt=0,St=!1,ut=0,kt=!1,At=0;const Ot=[],Tt=pt!==-1&&Et!==-1;for(let Ft=0;Ft<_t;Ft++){Qe.loadCell(Ft,this._workCell);let It=this._workCell.getWidth();if(It===0)continue;let zt=!1,Kt=Ft,$t=this._workCell;if(wt.length>0&&Ft===wt[0][0]){zt=!0;const Ht=wt.shift();$t=new He.JoinedCellData(this._workCell,Qe.translateToString(!0,Ht[0],Ht[1]),Ht[1]-Ht[0]),Kt=Ht[1]-1,It=$t.getWidth()}const Zt=this._isCellInSelection(Ft,st),ei=Ze&&Ft===dt,jt=Tt&&Ft>=pt&&Ft<=Et;let Nt=!1;this._decorationService.forEachDecorationAtCell(Ft,st,void 0,Ht=>{Nt=!0});let Wt=$t.getChars()||Ye.WHITESPACE_CELL_CHAR;if(Wt===" "&&($t.isUnderline()||$t.isOverline())&&(Wt="Â "),At=It*lt-ft.get(Wt,$t.isBold(),$t.isItalic()),ht){if(vt&&(Zt&&kt||!Zt&&!kt&&$t.bg===Dt)&&(Zt&&kt&&nt.selectionForeground||$t.fg===Bt)&&$t.extended.ext===Mt&&jt===St&&At===ut&&!ei&&!zt&&!Nt){$t.isInvisible()?Lt+=Ye.WHITESPACE_CELL_CHAR:Lt+=Wt,vt++;continue}vt&&(ht.textContent=Lt),ht=this._document.createElement("span"),vt=0,Lt=""}else ht=this._document.createElement("span");if(Dt=$t.bg,Bt=$t.fg,Mt=$t.extended.ext,St=jt,ut=At,kt=Zt,zt&&dt>=Ft&&dt<=Kt&&(dt=Ft),!this._coreService.isCursorHidden&&ei&&this._coreService.isCursorInitialized){if(Ot.push("xterm-cursor"),this._coreBrowserService.isFocused)ct&&Ot.push("xterm-cursor-blink"),Ot.push(rt==="bar"?"xterm-cursor-bar":rt==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(ot)switch(ot){case"outline":Ot.push("xterm-cursor-outline");break;case"block":Ot.push("xterm-cursor-block");break;case"bar":Ot.push("xterm-cursor-bar");break;case"underline":Ot.push("xterm-cursor-underline")}}if($t.isBold()&&Ot.push("xterm-bold"),$t.isItalic()&&Ot.push("xterm-italic"),$t.isDim()&&Ot.push("xterm-dim"),Lt=$t.isInvisible()?Ye.WHITESPACE_CELL_CHAR:$t.getChars()||Ye.WHITESPACE_CELL_CHAR,$t.isUnderline()&&(Ot.push(`xterm-underline-${$t.extended.underlineStyle}`),Lt===" "&&(Lt="Â "),!$t.isUnderlineColorDefault()))if($t.isUnderlineColorRGB())ht.style.textDecorationColor=`rgb(${$e.AttributeData.toColorRGB($t.getUnderlineColor()).join(",")})`;else{let Ht=$t.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&$t.isBold()&&Ht<8&&(Ht+=8),ht.style.textDecorationColor=nt.ansi[Ht].css}$t.isOverline()&&(Ot.push("xterm-overline"),Lt===" "&&(Lt="Â ")),$t.isStrikethrough()&&Ot.push("xterm-strikethrough"),jt&&(ht.style.textDecoration="underline");let Pt=$t.getFgColor(),Ut=$t.getFgColorMode(),Gt=$t.getBgColor(),Vt=$t.getBgColorMode();const Qt=!!$t.isInverse();if(Qt){const Ht=Pt;Pt=Gt,Gt=Ht;const ti=Ut;Ut=Vt,Vt=ti}let Yt,Jt,Xt,qt=!1;switch(this._decorationService.forEachDecorationAtCell(Ft,st,void 0,Ht=>{Ht.options.layer!=="top"&&qt||(Ht.backgroundColorRGB&&(Vt=50331648,Gt=Ht.backgroundColorRGB.rgba>>8&16777215,Yt=Ht.backgroundColorRGB),Ht.foregroundColorRGB&&(Ut=50331648,Pt=Ht.foregroundColorRGB.rgba>>8&16777215,Jt=Ht.foregroundColorRGB),qt=Ht.options.layer==="top")}),!qt&&Zt&&(Yt=this._coreBrowserService.isFocused?nt.selectionBackgroundOpaque:nt.selectionInactiveBackgroundOpaque,Gt=Yt.rgba>>8&16777215,Vt=50331648,qt=!0,nt.selectionForeground&&(Ut=50331648,Pt=nt.selectionForeground.rgba>>8&16777215,Jt=nt.selectionForeground)),qt&&Ot.push("xterm-decoration-top"),Vt){case 16777216:case 33554432:Xt=nt.ansi[Gt],Ot.push(`xterm-bg-${Gt}`);break;case 50331648:Xt=We.channels.toColor(Gt>>16,Gt>>8&255,255&Gt),this._addStyle(ht,`background-color:#${tt((Gt>>>0).toString(16),"0",6)}`);break;default:Qt?(Xt=nt.foreground,Ot.push(`xterm-bg-${Fe.INVERTED_DEFAULT_COLOR}`)):Xt=nt.background}switch(Yt||$t.isDim()&&(Yt=We.color.multiplyOpacity(Xt,.5)),Ut){case 16777216:case 33554432:$t.isBold()&&Pt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Pt+=8),this._applyMinimumContrast(ht,Xt,nt.ansi[Pt],$t,Yt,void 0)||Ot.push(`xterm-fg-${Pt}`);break;case 50331648:const Ht=We.channels.toColor(Pt>>16&255,Pt>>8&255,255&Pt);this._applyMinimumContrast(ht,Xt,Ht,$t,Yt,Jt)||this._addStyle(ht,`color:#${tt(Pt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(ht,Xt,nt.foreground,$t,Yt,Jt)||Qt&&Ot.push(`xterm-fg-${Fe.INVERTED_DEFAULT_COLOR}`)}Ot.length&&(ht.className=Ot.join(" "),Ot.length=0),ei||zt||Nt?ht.textContent=Lt:vt++,At!==this.defaultSpacing&&(ht.style.letterSpacing=`${At}px`),yt.push(ht),Ft=Kt}return ht&&vt&&(ht.textContent=Lt),yt}_applyMinimumContrast(Qe,st,Ze,rt,ot,dt){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,Be.treatGlyphAsBackgroundColor)(rt.getCode()))return!1;const ct=this._getContrastCache(rt);let lt;if(ot||dt||(lt=ct.getColor(st.rgba,Ze.rgba)),lt===void 0){const ft=this._optionsService.rawOptions.minimumContrastRatio/(rt.isDim()?2:1);lt=We.color.ensureContrastRatio(ot||st,dt||Ze,ft),ct.setColor((ot||st).rgba,(dt||Ze).rgba,lt??null)}return!!lt&&(this._addStyle(Qe,`color:${lt.css}`),!0)}_getContrastCache(Qe){return Qe.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(Qe,st){Qe.setAttribute("style",`${Qe.getAttribute("style")||""}${st};`)}_isCellInSelection(Qe,st){const Ze=this._selectionStart,rt=this._selectionEnd;return!(!Ze||!rt)&&(this._columnSelectMode?Ze[0]<=rt[0]?Qe>=Ze[0]&&st>=Ze[1]&&Qe<rt[0]&&st<=rt[1]:Qe<Ze[0]&&st>=Ze[1]&&Qe>=rt[0]&&st<=rt[1]:st>Ze[1]&&st<rt[1]||Ze[1]===rt[1]&&st===Ze[1]&&Qe>=Ze[0]&&Qe<rt[0]||Ze[1]<rt[1]&&st===rt[1]&&Qe<rt[0]||Ze[1]<rt[1]&&st===Ze[1]&&Qe>=Ze[0])}};function tt(Qe,st,Ze){for(;Qe.length<Ze;)Qe=st+Qe;return Qe}De.DomRendererRowFactory=Xe=Ke([Je(1,p.ICharacterJoinerService),Je(2,it.IOptionsService),Je(3,p.ICoreBrowserService),Je(4,it.ICoreService),Je(5,it.IDecorationService),Je(6,p.IThemeService)],Xe)},2550:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.WidthCache=void 0,De.WidthCache=class{constructor(Ge,Ke){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=Ge.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const Je=Ge.createElement("span");Je.classList.add("xterm-char-measure-element");const Fe=Ge.createElement("span");Fe.classList.add("xterm-char-measure-element"),Fe.style.fontWeight="bold";const Ye=Ge.createElement("span");Ye.classList.add("xterm-char-measure-element"),Ye.style.fontStyle="italic";const et=Ge.createElement("span");et.classList.add("xterm-char-measure-element"),et.style.fontWeight="bold",et.style.fontStyle="italic",this._measureElements=[Je,Fe,Ye,et],this._container.appendChild(Je),this._container.appendChild(Fe),this._container.appendChild(Ye),this._container.appendChild(et),Ke.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(Ge,Ke,Je,Fe){Ge===this._font&&Ke===this._fontSize&&Je===this._weight&&Fe===this._weightBold||(this._font=Ge,this._fontSize=Ke,this._weight=Je,this._weightBold=Fe,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${Je}`,this._measureElements[1].style.fontWeight=`${Fe}`,this._measureElements[2].style.fontWeight=`${Je}`,this._measureElements[3].style.fontWeight=`${Fe}`,this.clear())}get(Ge,Ke,Je){let Fe=0;if(!Ke&&!Je&&Ge.length===1&&(Fe=Ge.charCodeAt(0))<256){if(this._flat[Fe]!==-9999)return this._flat[Fe];const it=this._measure(Ge,0);return it>0&&(this._flat[Fe]=it),it}let Ye=Ge;Ke&&(Ye+="B"),Je&&(Ye+="I");let et=this._holey.get(Ye);if(et===void 0){let it=0;Ke&&(it|=1),Je&&(it|=2),et=this._measure(Ge,it),et>0&&this._holey.set(Ye,et)}return et}_measure(Ge,Ke){const Je=this._measureElements[Ke];return Je.textContent=Ge.repeat(32),Je.offsetWidth/32}}},2223:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.TEXT_BASELINE=De.DIM_OPACITY=De.INVERTED_DEFAULT_COLOR=void 0;const Ke=Ge(6114);De.INVERTED_DEFAULT_COLOR=257,De.DIM_OPACITY=.5,De.TEXT_BASELINE=Ke.isFirefox||Ke.isLegacyEdge?"bottom":"ideographic"},6171:(gt,De)=>{function Ge(Je){return 57508<=Je&&Je<=57558}function Ke(Je){return Je>=128512&&Je<=128591||Je>=127744&&Je<=128511||Je>=128640&&Je<=128767||Je>=9728&&Je<=9983||Je>=9984&&Je<=10175||Je>=65024&&Je<=65039||Je>=129280&&Je<=129535||Je>=127462&&Je<=127487}Object.defineProperty(De,"__esModule",{value:!0}),De.computeNextVariantOffset=De.createRenderDimensions=De.treatGlyphAsBackgroundColor=De.allowRescaling=De.isEmoji=De.isRestrictedPowerlineGlyph=De.isPowerlineGlyph=De.throwIfFalsy=void 0,De.throwIfFalsy=function(Je){if(!Je)throw new Error("value must not be falsy");return Je},De.isPowerlineGlyph=Ge,De.isRestrictedPowerlineGlyph=function(Je){return 57520<=Je&&Je<=57527},De.isEmoji=Ke,De.allowRescaling=function(Je,Fe,Ye,et){return Fe===1&&Ye>Math.ceil(1.5*et)&&Je!==void 0&&Je>255&&!Ke(Je)&&!Ge(Je)&&!function(it){return 57344<=it&&it<=63743}(Je)},De.treatGlyphAsBackgroundColor=function(Je){return Ge(Je)||function(Fe){return 9472<=Fe&&Fe<=9631}(Je)},De.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},De.computeNextVariantOffset=function(Je,Fe,Ye=0){return(Je-(2*Math.round(Fe)-Ye))%(2*Math.round(Fe))}},6052:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.createSelectionRenderModel=void 0;class Ge{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(Je,Fe,Ye,et=!1){if(this.selectionStart=Fe,this.selectionEnd=Ye,!Fe||!Ye||Fe[0]===Ye[0]&&Fe[1]===Ye[1])return void this.clear();const it=Je.buffers.active.ydisp,We=Fe[1]-it,p=Ye[1]-it,He=Math.max(We,0),Be=Math.min(p,Je.rows-1);He>=Je.rows||Be<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=et,this.viewportStartRow=We,this.viewportEndRow=p,this.viewportCappedStartRow=He,this.viewportCappedEndRow=Be,this.startCol=Fe[0],this.endCol=Ye[0])}isCellSelected(Je,Fe,Ye){return!!this.hasSelection&&(Ye-=Je.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?Fe>=this.startCol&&Ye>=this.viewportCappedStartRow&&Fe<this.endCol&&Ye<=this.viewportCappedEndRow:Fe<this.startCol&&Ye>=this.viewportCappedStartRow&&Fe>=this.endCol&&Ye<=this.viewportCappedEndRow:Ye>this.viewportStartRow&&Ye<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&Ye===this.viewportStartRow&&Fe>=this.startCol&&Fe<this.endCol||this.viewportStartRow<this.viewportEndRow&&Ye===this.viewportEndRow&&Fe<this.endCol||this.viewportStartRow<this.viewportEndRow&&Ye===this.viewportStartRow&&Fe>=this.startCol)}}De.createSelectionRenderModel=function(){return new Ge}},456:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.SelectionModel=void 0,De.SelectionModel=class{constructor(Ge){this._bufferService=Ge,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const Ge=this.selectionStart[0]+this.selectionStartLength;return Ge>this._bufferService.cols?Ge%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(Ge/this._bufferService.cols)-1]:[Ge%this._bufferService.cols,this.selectionStart[1]+Math.floor(Ge/this._bufferService.cols)]:[Ge,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const Ge=this.selectionStart[0]+this.selectionStartLength;return Ge>this._bufferService.cols?[Ge%this._bufferService.cols,this.selectionStart[1]+Math.floor(Ge/this._bufferService.cols)]:[Math.max(Ge,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const Ge=this.selectionStart,Ke=this.selectionEnd;return!(!Ge||!Ke)&&(Ge[1]>Ke[1]||Ge[1]===Ke[1]&&Ge[0]>Ke[0])}handleTrim(Ge){return this.selectionStart&&(this.selectionStart[1]-=Ge),this.selectionEnd&&(this.selectionEnd[1]-=Ge),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(gt,De,Ge){var Ke=this&&this.__decorate||function(Be,$e,Xe,tt){var Qe,st=arguments.length,Ze=st<3?$e:tt===null?tt=Object.getOwnPropertyDescriptor($e,Xe):tt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ze=Reflect.decorate(Be,$e,Xe,tt);else for(var rt=Be.length-1;rt>=0;rt--)(Qe=Be[rt])&&(Ze=(st<3?Qe(Ze):st>3?Qe($e,Xe,Ze):Qe($e,Xe))||Ze);return st>3&&Ze&&Object.defineProperty($e,Xe,Ze),Ze},Je=this&&this.__param||function(Be,$e){return function(Xe,tt){$e(Xe,tt,Be)}};Object.defineProperty(De,"__esModule",{value:!0}),De.CharSizeService=void 0;const Fe=Ge(2585),Ye=Ge(8460),et=Ge(844);let it=De.CharSizeService=class extends et.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(Be,$e,Xe){super(),this._optionsService=Xe,this.width=0,this.height=0,this._onCharSizeChange=this.register(new Ye.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new He(this._optionsService))}catch{this._measureStrategy=this.register(new p(Be,$e,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const Be=this._measureStrategy.measure();Be.width===this.width&&Be.height===this.height||(this.width=Be.width,this.height=Be.height,this._onCharSizeChange.fire())}};De.CharSizeService=it=Ke([Je(2,Fe.IOptionsService)],it);class We extends et.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet($e,Xe){$e!==void 0&&$e>0&&Xe!==void 0&&Xe>0&&(this._result.width=$e,this._result.height=Xe)}}class p extends We{constructor($e,Xe,tt){super(),this._document=$e,this._parentElement=Xe,this._optionsService=tt,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class He extends We{constructor($e){super(),this._optionsService=$e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const Xe=this._ctx.measureText("W");if(!("width"in Xe&&"fontBoundingBoxAscent"in Xe&&"fontBoundingBoxDescent"in Xe))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const $e=this._ctx.measureText("W");return this._validateAndSet($e.width,$e.fontBoundingBoxAscent+$e.fontBoundingBoxDescent),this._result}}},4269:function(gt,De,Ge){var Ke=this&&this.__decorate||function(He,Be,$e,Xe){var tt,Qe=arguments.length,st=Qe<3?Be:Xe===null?Xe=Object.getOwnPropertyDescriptor(Be,$e):Xe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(He,Be,$e,Xe);else for(var Ze=He.length-1;Ze>=0;Ze--)(tt=He[Ze])&&(st=(Qe<3?tt(st):Qe>3?tt(Be,$e,st):tt(Be,$e))||st);return Qe>3&&st&&Object.defineProperty(Be,$e,st),st},Je=this&&this.__param||function(He,Be){return function($e,Xe){Be($e,Xe,He)}};Object.defineProperty(De,"__esModule",{value:!0}),De.CharacterJoinerService=De.JoinedCellData=void 0;const Fe=Ge(3734),Ye=Ge(643),et=Ge(511),it=Ge(2585);class We extends Fe.AttributeData{constructor(Be,$e,Xe){super(),this.content=0,this.combinedData="",this.fg=Be.fg,this.bg=Be.bg,this.combinedData=$e,this._width=Xe}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(Be){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}De.JoinedCellData=We;let p=De.CharacterJoinerService=class ci{constructor(Be){this._bufferService=Be,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new et.CellData}register(Be){const $e={id:this._nextCharacterJoinerId++,handler:Be};return this._characterJoiners.push($e),$e.id}deregister(Be){for(let $e=0;$e<this._characterJoiners.length;$e++)if(this._characterJoiners[$e].id===Be)return this._characterJoiners.splice($e,1),!0;return!1}getJoinedCharacters(Be){if(this._characterJoiners.length===0)return[];const $e=this._bufferService.buffer.lines.get(Be);if(!$e||$e.length===0)return[];const Xe=[],tt=$e.translateToString(!0);let Qe=0,st=0,Ze=0,rt=$e.getFg(0),ot=$e.getBg(0);for(let dt=0;dt<$e.getTrimmedLength();dt++)if($e.loadCell(dt,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==rt||this._workCell.bg!==ot){if(dt-Qe>1){const ct=this._getJoinedRanges(tt,Ze,st,$e,Qe);for(let lt=0;lt<ct.length;lt++)Xe.push(ct[lt])}Qe=dt,Ze=st,rt=this._workCell.fg,ot=this._workCell.bg}st+=this._workCell.getChars().length||Ye.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-Qe>1){const dt=this._getJoinedRanges(tt,Ze,st,$e,Qe);for(let ct=0;ct<dt.length;ct++)Xe.push(dt[ct])}return Xe}_getJoinedRanges(Be,$e,Xe,tt,Qe){const st=Be.substring($e,Xe);let Ze=[];try{Ze=this._characterJoiners[0].handler(st)}catch(rt){console.error(rt)}for(let rt=1;rt<this._characterJoiners.length;rt++)try{const ot=this._characterJoiners[rt].handler(st);for(let dt=0;dt<ot.length;dt++)ci._mergeRanges(Ze,ot[dt])}catch(ot){console.error(ot)}return this._stringRangesToCellRanges(Ze,tt,Qe),Ze}_stringRangesToCellRanges(Be,$e,Xe){let tt=0,Qe=!1,st=0,Ze=Be[tt];if(Ze){for(let rt=Xe;rt<this._bufferService.cols;rt++){const ot=$e.getWidth(rt),dt=$e.getString(rt).length||Ye.WHITESPACE_CELL_CHAR.length;if(ot!==0){if(!Qe&&Ze[0]<=st&&(Ze[0]=rt,Qe=!0),Ze[1]<=st){if(Ze[1]=rt,Ze=Be[++tt],!Ze)break;Ze[0]<=st?(Ze[0]=rt,Qe=!0):Qe=!1}st+=dt}}Ze&&(Ze[1]=this._bufferService.cols)}}static _mergeRanges(Be,$e){let Xe=!1;for(let tt=0;tt<Be.length;tt++){const Qe=Be[tt];if(Xe){if($e[1]<=Qe[0])return Be[tt-1][1]=$e[1],Be;if($e[1]<=Qe[1])return Be[tt-1][1]=Math.max($e[1],Qe[1]),Be.splice(tt,1),Be;Be.splice(tt,1),tt--}else{if($e[1]<=Qe[0])return Be.splice(tt,0,$e),Be;if($e[1]<=Qe[1])return Qe[0]=Math.min($e[0],Qe[0]),Be;$e[0]<Qe[1]&&(Qe[0]=Math.min($e[0],Qe[0]),Xe=!0)}}return Xe?Be[Be.length-1][1]=$e[1]:Be.push($e),Be}};De.CharacterJoinerService=p=Ke([Je(0,it.IBufferService)],p)},5114:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CoreBrowserService=void 0;const Ke=Ge(844),Je=Ge(8460),Fe=Ge(3656);class Ye extends Ke.Disposable{constructor(We,p,He){super(),this._textarea=We,this._window=p,this.mainDocument=He,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new et(this._window),this._onDprChange=this.register(new Je.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new Je.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(Be=>this._screenDprMonitor.setWindow(Be))),this.register((0,Je.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(We){this._window!==We&&(this._window=We,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}De.CoreBrowserService=Ye;class et extends Ke.Disposable{constructor(We){super(),this._parentWindow=We,this._windowResizeListener=this.register(new Ke.MutableDisposable),this._onDprChange=this.register(new Je.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,Ke.toDisposable)(()=>this.clearListener()))}setWindow(We){this._parentWindow=We,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,Fe.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var We;this._outerListener&&((We=this._resolutionMediaMatchList)==null||We.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.LinkProviderService=void 0;const Ke=Ge(844);class Je extends Ke.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,Ke.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(Ye){return this.linkProviders.push(Ye),{dispose:()=>{const et=this.linkProviders.indexOf(Ye);et!==-1&&this.linkProviders.splice(et,1)}}}}De.LinkProviderService=Je},8934:function(gt,De,Ge){var Ke=this&&this.__decorate||function(it,We,p,He){var Be,$e=arguments.length,Xe=$e<3?We:He===null?He=Object.getOwnPropertyDescriptor(We,p):He;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Xe=Reflect.decorate(it,We,p,He);else for(var tt=it.length-1;tt>=0;tt--)(Be=it[tt])&&(Xe=($e<3?Be(Xe):$e>3?Be(We,p,Xe):Be(We,p))||Xe);return $e>3&&Xe&&Object.defineProperty(We,p,Xe),Xe},Je=this&&this.__param||function(it,We){return function(p,He){We(p,He,it)}};Object.defineProperty(De,"__esModule",{value:!0}),De.MouseService=void 0;const Fe=Ge(4725),Ye=Ge(9806);let et=De.MouseService=class{constructor(it,We){this._renderService=it,this._charSizeService=We}getCoords(it,We,p,He,Be){return(0,Ye.getCoords)(window,it,We,p,He,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,Be)}getMouseReportCoords(it,We){const p=(0,Ye.getCoordsRelativeToElement)(window,it,We);if(this._charSizeService.hasValidSize)return p[0]=Math.min(Math.max(p[0],0),this._renderService.dimensions.css.canvas.width-1),p[1]=Math.min(Math.max(p[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(p[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(p[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(p[0]),y:Math.floor(p[1])}}};De.MouseService=et=Ke([Je(0,Fe.IRenderService),Je(1,Fe.ICharSizeService)],et)},3230:function(gt,De,Ge){var Ke=this&&this.__decorate||function(Be,$e,Xe,tt){var Qe,st=arguments.length,Ze=st<3?$e:tt===null?tt=Object.getOwnPropertyDescriptor($e,Xe):tt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ze=Reflect.decorate(Be,$e,Xe,tt);else for(var rt=Be.length-1;rt>=0;rt--)(Qe=Be[rt])&&(Ze=(st<3?Qe(Ze):st>3?Qe($e,Xe,Ze):Qe($e,Xe))||Ze);return st>3&&Ze&&Object.defineProperty($e,Xe,Ze),Ze},Je=this&&this.__param||function(Be,$e){return function(Xe,tt){$e(Xe,tt,Be)}};Object.defineProperty(De,"__esModule",{value:!0}),De.RenderService=void 0;const Fe=Ge(6193),Ye=Ge(4725),et=Ge(8460),it=Ge(844),We=Ge(7226),p=Ge(2585);let He=De.RenderService=class extends it.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(Be,$e,Xe,tt,Qe,st,Ze,rt){super(),this._rowCount=Be,this._charSizeService=tt,this._renderer=this.register(new it.MutableDisposable),this._pausedResizeTask=new We.DebouncedIdleTask,this._observerDisposable=this.register(new it.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new et.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new et.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new et.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new et.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new Fe.RenderDebouncer((ot,dt)=>this._renderRows(ot,dt),Ze),this.register(this._renderDebouncer),this.register(Ze.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(st.onResize(()=>this._fullRefresh())),this.register(st.buffers.onBufferActivate(()=>{var ot;return(ot=this._renderer.value)==null?void 0:ot.clear()})),this.register(Xe.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(Qe.onDecorationRegistered(()=>this._fullRefresh())),this.register(Qe.onDecorationRemoved(()=>this._fullRefresh())),this.register(Xe.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(st.cols,st.rows),this._fullRefresh()})),this.register(Xe.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(st.buffer.y,st.buffer.y,!0))),this.register(rt.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(Ze.window,$e),this.register(Ze.onWindowChange(ot=>this._registerIntersectionObserver(ot,$e)))}_registerIntersectionObserver(Be,$e){if("IntersectionObserver"in Be){const Xe=new Be.IntersectionObserver(tt=>this._handleIntersectionChange(tt[tt.length-1]),{threshold:0});Xe.observe($e),this._observerDisposable.value=(0,it.toDisposable)(()=>Xe.disconnect())}}_handleIntersectionChange(Be){this._isPaused=Be.isIntersecting===void 0?Be.intersectionRatio===0:!Be.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(Be,$e,Xe=!1){this._isPaused?this._needsFullRefresh=!0:(Xe||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(Be,$e,this._rowCount))}_renderRows(Be,$e){this._renderer.value&&(Be=Math.min(Be,this._rowCount-1),$e=Math.min($e,this._rowCount-1),this._renderer.value.renderRows(Be,$e),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:Be,end:$e}),this._onRender.fire({start:Be,end:$e}),this._isNextRenderRedrawOnly=!0)}resize(Be,$e){this._rowCount=$e,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(Be){this._renderer.value=Be,this._renderer.value&&(this._renderer.value.onRequestRedraw($e=>this.refreshRows($e.start,$e.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(Be){return this._renderDebouncer.addRefreshCallback(Be)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var Be,$e;this._renderer.value&&(($e=(Be=this._renderer.value).clearTextureAtlas)==null||$e.call(Be),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(Be,$e){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var Xe;return(Xe=this._renderer.value)==null?void 0:Xe.handleResize(Be,$e)}):this._renderer.value.handleResize(Be,$e),this._fullRefresh())}handleCharSizeChanged(){var Be;(Be=this._renderer.value)==null||Be.handleCharSizeChanged()}handleBlur(){var Be;(Be=this._renderer.value)==null||Be.handleBlur()}handleFocus(){var Be;(Be=this._renderer.value)==null||Be.handleFocus()}handleSelectionChanged(Be,$e,Xe){var tt;this._selectionState.start=Be,this._selectionState.end=$e,this._selectionState.columnSelectMode=Xe,(tt=this._renderer.value)==null||tt.handleSelectionChanged(Be,$e,Xe)}handleCursorMove(){var Be;(Be=this._renderer.value)==null||Be.handleCursorMove()}clear(){var Be;(Be=this._renderer.value)==null||Be.clear()}};De.RenderService=He=Ke([Je(2,p.IOptionsService),Je(3,Ye.ICharSizeService),Je(4,p.IDecorationService),Je(5,p.IBufferService),Je(6,Ye.ICoreBrowserService),Je(7,Ye.IThemeService)],He)},9312:function(gt,De,Ge){var Ke=this&&this.__decorate||function(Ze,rt,ot,dt){var ct,lt=arguments.length,ft=lt<3?rt:dt===null?dt=Object.getOwnPropertyDescriptor(rt,ot):dt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ft=Reflect.decorate(Ze,rt,ot,dt);else for(var pt=Ze.length-1;pt>=0;pt--)(ct=Ze[pt])&&(ft=(lt<3?ct(ft):lt>3?ct(rt,ot,ft):ct(rt,ot))||ft);return lt>3&&ft&&Object.defineProperty(rt,ot,ft),ft},Je=this&&this.__param||function(Ze,rt){return function(ot,dt){rt(ot,dt,Ze)}};Object.defineProperty(De,"__esModule",{value:!0}),De.SelectionService=void 0;const Fe=Ge(9806),Ye=Ge(9504),et=Ge(456),it=Ge(4725),We=Ge(8460),p=Ge(844),He=Ge(6114),Be=Ge(4841),$e=Ge(511),Xe=Ge(2585),tt="Â ",Qe=new RegExp(tt,"g");let st=De.SelectionService=class extends p.Disposable{constructor(Ze,rt,ot,dt,ct,lt,ft,pt,Et){super(),this._element=Ze,this._screenElement=rt,this._linkifier=ot,this._bufferService=dt,this._coreService=ct,this._mouseService=lt,this._optionsService=ft,this._renderService=pt,this._coreBrowserService=Et,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new $e.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new We.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new We.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new We.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new We.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=yt=>this._handleMouseMove(yt),this._mouseUpListener=yt=>this._handleMouseUp(yt),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(yt=>this._handleTrim(yt)),this.register(this._bufferService.buffers.onBufferActivate(yt=>this._handleBufferActivate(yt))),this.enable(),this._model=new et.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,p.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const Ze=this._model.finalSelectionStart,rt=this._model.finalSelectionEnd;return!(!Ze||!rt||Ze[0]===rt[0]&&Ze[1]===rt[1])}get selectionText(){const Ze=this._model.finalSelectionStart,rt=this._model.finalSelectionEnd;if(!Ze||!rt)return"";const ot=this._bufferService.buffer,dt=[];if(this._activeSelectionMode===3){if(Ze[0]===rt[0])return"";const ct=Ze[0]<rt[0]?Ze[0]:rt[0],lt=Ze[0]<rt[0]?rt[0]:Ze[0];for(let ft=Ze[1];ft<=rt[1];ft++){const pt=ot.translateBufferLineToString(ft,!0,ct,lt);dt.push(pt)}}else{const ct=Ze[1]===rt[1]?rt[0]:void 0;dt.push(ot.translateBufferLineToString(Ze[1],!0,Ze[0],ct));for(let lt=Ze[1]+1;lt<=rt[1]-1;lt++){const ft=ot.lines.get(lt),pt=ot.translateBufferLineToString(lt,!0);ft!=null&&ft.isWrapped?dt[dt.length-1]+=pt:dt.push(pt)}if(Ze[1]!==rt[1]){const lt=ot.lines.get(rt[1]),ft=ot.translateBufferLineToString(rt[1],!0,0,rt[0]);lt&&lt.isWrapped?dt[dt.length-1]+=ft:dt.push(ft)}}return dt.map(ct=>ct.replace(Qe," ")).join(He.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(Ze){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),He.isLinux&&Ze&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(Ze){const rt=this._getMouseBufferCoords(Ze),ot=this._model.finalSelectionStart,dt=this._model.finalSelectionEnd;return!!(ot&&dt&&rt)&&this._areCoordsInSelection(rt,ot,dt)}isCellInSelection(Ze,rt){const ot=this._model.finalSelectionStart,dt=this._model.finalSelectionEnd;return!(!ot||!dt)&&this._areCoordsInSelection([Ze,rt],ot,dt)}_areCoordsInSelection(Ze,rt,ot){return Ze[1]>rt[1]&&Ze[1]<ot[1]||rt[1]===ot[1]&&Ze[1]===rt[1]&&Ze[0]>=rt[0]&&Ze[0]<ot[0]||rt[1]<ot[1]&&Ze[1]===ot[1]&&Ze[0]<ot[0]||rt[1]<ot[1]&&Ze[1]===rt[1]&&Ze[0]>=rt[0]}_selectWordAtCursor(Ze,rt){var ct,lt;const ot=(lt=(ct=this._linkifier.currentLink)==null?void 0:ct.link)==null?void 0:lt.range;if(ot)return this._model.selectionStart=[ot.start.x-1,ot.start.y-1],this._model.selectionStartLength=(0,Be.getRangeLength)(ot,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const dt=this._getMouseBufferCoords(Ze);return!!dt&&(this._selectWordAt(dt,rt),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(Ze,rt){this._model.clearSelection(),Ze=Math.max(Ze,0),rt=Math.min(rt,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,Ze],this._model.selectionEnd=[this._bufferService.cols,rt],this.refresh(),this._onSelectionChange.fire()}_handleTrim(Ze){this._model.handleTrim(Ze)&&this.refresh()}_getMouseBufferCoords(Ze){const rt=this._mouseService.getCoords(Ze,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(rt)return rt[0]--,rt[1]--,rt[1]+=this._bufferService.buffer.ydisp,rt}_getMouseEventScrollAmount(Ze){let rt=(0,Fe.getCoordsRelativeToElement)(this._coreBrowserService.window,Ze,this._screenElement)[1];const ot=this._renderService.dimensions.css.canvas.height;return rt>=0&&rt<=ot?0:(rt>ot&&(rt-=ot),rt=Math.min(Math.max(rt,-50),50),rt/=50,rt/Math.abs(rt)+Math.round(14*rt))}shouldForceSelection(Ze){return He.isMac?Ze.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:Ze.shiftKey}handleMouseDown(Ze){if(this._mouseDownTimeStamp=Ze.timeStamp,(Ze.button!==2||!this.hasSelection)&&Ze.button===0){if(!this._enabled){if(!this.shouldForceSelection(Ze))return;Ze.stopPropagation()}Ze.preventDefault(),this._dragScrollAmount=0,this._enabled&&Ze.shiftKey?this._handleIncrementalClick(Ze):Ze.detail===1?this._handleSingleClick(Ze):Ze.detail===2?this._handleDoubleClick(Ze):Ze.detail===3&&this._handleTripleClick(Ze),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(Ze){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(Ze))}_handleSingleClick(Ze){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(Ze)?3:0,this._model.selectionStart=this._getMouseBufferCoords(Ze),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const rt=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);rt&&rt.length!==this._model.selectionStart[0]&&rt.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(Ze){this._selectWordAtCursor(Ze,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(Ze){const rt=this._getMouseBufferCoords(Ze);rt&&(this._activeSelectionMode=2,this._selectLineAt(rt[1]))}shouldColumnSelect(Ze){return Ze.altKey&&!(He.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(Ze){if(Ze.stopImmediatePropagation(),!this._model.selectionStart)return;const rt=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(Ze),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(Ze),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const ot=this._bufferService.buffer;if(this._model.selectionEnd[1]<ot.lines.length){const dt=ot.lines.get(this._model.selectionEnd[1]);dt&&dt.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}rt&&rt[0]===this._model.selectionEnd[0]&&rt[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const Ze=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(Ze.ydisp+this._bufferService.rows,Ze.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=Ze.ydisp),this.refresh()}}_handleMouseUp(Ze){const rt=Ze.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&rt<500&&Ze.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const ot=this._mouseService.getCoords(Ze,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(ot&&ot[0]!==void 0&&ot[1]!==void 0){const dt=(0,Ye.moveToCellSequence)(ot[0]-1,ot[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(dt,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const Ze=this._model.finalSelectionStart,rt=this._model.finalSelectionEnd,ot=!(!Ze||!rt||Ze[0]===rt[0]&&Ze[1]===rt[1]);ot?Ze&&rt&&(this._oldSelectionStart&&this._oldSelectionEnd&&Ze[0]===this._oldSelectionStart[0]&&Ze[1]===this._oldSelectionStart[1]&&rt[0]===this._oldSelectionEnd[0]&&rt[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(Ze,rt,ot)):this._oldHasSelection&&this._fireOnSelectionChange(Ze,rt,ot)}_fireOnSelectionChange(Ze,rt,ot){this._oldSelectionStart=Ze,this._oldSelectionEnd=rt,this._oldHasSelection=ot,this._onSelectionChange.fire()}_handleBufferActivate(Ze){this.clearSelection(),this._trimListener.dispose(),this._trimListener=Ze.activeBuffer.lines.onTrim(rt=>this._handleTrim(rt))}_convertViewportColToCharacterIndex(Ze,rt){let ot=rt;for(let dt=0;rt>=dt;dt++){const ct=Ze.loadCell(dt,this._workCell).getChars().length;this._workCell.getWidth()===0?ot--:ct>1&&rt!==dt&&(ot+=ct-1)}return ot}setSelection(Ze,rt,ot){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[Ze,rt],this._model.selectionStartLength=ot,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(Ze){this._isClickInSelection(Ze)||(this._selectWordAtCursor(Ze,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(Ze,rt,ot=!0,dt=!0){if(Ze[0]>=this._bufferService.cols)return;const ct=this._bufferService.buffer,lt=ct.lines.get(Ze[1]);if(!lt)return;const ft=ct.translateBufferLineToString(Ze[1],!1);let pt=this._convertViewportColToCharacterIndex(lt,Ze[0]),Et=pt;const yt=Ze[0]-pt;let wt=0,nt=0,ht=0,_t=0;if(ft.charAt(pt)===" "){for(;pt>0&&ft.charAt(pt-1)===" ";)pt--;for(;Et<ft.length&&ft.charAt(Et+1)===" ";)Et++}else{let Dt=Ze[0],Bt=Ze[0];lt.getWidth(Dt)===0&&(wt++,Dt--),lt.getWidth(Bt)===2&&(nt++,Bt++);const Mt=lt.getString(Bt).length;for(Mt>1&&(_t+=Mt-1,Et+=Mt-1);Dt>0&&pt>0&&!this._isCharWordSeparator(lt.loadCell(Dt-1,this._workCell));){lt.loadCell(Dt-1,this._workCell);const St=this._workCell.getChars().length;this._workCell.getWidth()===0?(wt++,Dt--):St>1&&(ht+=St-1,pt-=St-1),pt--,Dt--}for(;Bt<lt.length&&Et+1<ft.length&&!this._isCharWordSeparator(lt.loadCell(Bt+1,this._workCell));){lt.loadCell(Bt+1,this._workCell);const St=this._workCell.getChars().length;this._workCell.getWidth()===2?(nt++,Bt++):St>1&&(_t+=St-1,Et+=St-1),Et++,Bt++}}Et++;let vt=pt+yt-wt+ht,Lt=Math.min(this._bufferService.cols,Et-pt+wt+nt-ht-_t);if(rt||ft.slice(pt,Et).trim()!==""){if(ot&&vt===0&&lt.getCodePoint(0)!==32){const Dt=ct.lines.get(Ze[1]-1);if(Dt&&lt.isWrapped&&Dt.getCodePoint(this._bufferService.cols-1)!==32){const Bt=this._getWordAt([this._bufferService.cols-1,Ze[1]-1],!1,!0,!1);if(Bt){const Mt=this._bufferService.cols-Bt.start;vt-=Mt,Lt+=Mt}}}if(dt&&vt+Lt===this._bufferService.cols&&lt.getCodePoint(this._bufferService.cols-1)!==32){const Dt=ct.lines.get(Ze[1]+1);if(Dt!=null&&Dt.isWrapped&&Dt.getCodePoint(0)!==32){const Bt=this._getWordAt([0,Ze[1]+1],!1,!1,!0);Bt&&(Lt+=Bt.length)}}return{start:vt,length:Lt}}}_selectWordAt(Ze,rt){const ot=this._getWordAt(Ze,rt);if(ot){for(;ot.start<0;)ot.start+=this._bufferService.cols,Ze[1]--;this._model.selectionStart=[ot.start,Ze[1]],this._model.selectionStartLength=ot.length}}_selectToWordAt(Ze){const rt=this._getWordAt(Ze,!0);if(rt){let ot=Ze[1];for(;rt.start<0;)rt.start+=this._bufferService.cols,ot--;if(!this._model.areSelectionValuesReversed())for(;rt.start+rt.length>this._bufferService.cols;)rt.length-=this._bufferService.cols,ot++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?rt.start:rt.start+rt.length,ot]}}_isCharWordSeparator(Ze){return Ze.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(Ze.getChars())>=0}_selectLineAt(Ze){const rt=this._bufferService.buffer.getWrappedRangeForLine(Ze),ot={start:{x:0,y:rt.first},end:{x:this._bufferService.cols-1,y:rt.last}};this._model.selectionStart=[0,rt.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,Be.getRangeLength)(ot,this._bufferService.cols)}};De.SelectionService=st=Ke([Je(3,Xe.IBufferService),Je(4,Xe.ICoreService),Je(5,it.IMouseService),Je(6,Xe.IOptionsService),Je(7,it.IRenderService),Je(8,it.ICoreBrowserService)],st)},4725:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.ILinkProviderService=De.IThemeService=De.ICharacterJoinerService=De.ISelectionService=De.IRenderService=De.IMouseService=De.ICoreBrowserService=De.ICharSizeService=void 0;const Ke=Ge(8343);De.ICharSizeService=(0,Ke.createDecorator)("CharSizeService"),De.ICoreBrowserService=(0,Ke.createDecorator)("CoreBrowserService"),De.IMouseService=(0,Ke.createDecorator)("MouseService"),De.IRenderService=(0,Ke.createDecorator)("RenderService"),De.ISelectionService=(0,Ke.createDecorator)("SelectionService"),De.ICharacterJoinerService=(0,Ke.createDecorator)("CharacterJoinerService"),De.IThemeService=(0,Ke.createDecorator)("ThemeService"),De.ILinkProviderService=(0,Ke.createDecorator)("LinkProviderService")},6731:function(gt,De,Ge){var Ke=this&&this.__decorate||function(st,Ze,rt,ot){var dt,ct=arguments.length,lt=ct<3?Ze:ot===null?ot=Object.getOwnPropertyDescriptor(Ze,rt):ot;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")lt=Reflect.decorate(st,Ze,rt,ot);else for(var ft=st.length-1;ft>=0;ft--)(dt=st[ft])&&(lt=(ct<3?dt(lt):ct>3?dt(Ze,rt,lt):dt(Ze,rt))||lt);return ct>3&&lt&&Object.defineProperty(Ze,rt,lt),lt},Je=this&&this.__param||function(st,Ze){return function(rt,ot){Ze(rt,ot,st)}};Object.defineProperty(De,"__esModule",{value:!0}),De.ThemeService=De.DEFAULT_ANSI_COLORS=void 0;const Fe=Ge(7239),Ye=Ge(8055),et=Ge(8460),it=Ge(844),We=Ge(2585),p=Ye.css.toColor("#ffffff"),He=Ye.css.toColor("#000000"),Be=Ye.css.toColor("#ffffff"),$e=Ye.css.toColor("#000000"),Xe={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};De.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const st=[Ye.css.toColor("#2e3436"),Ye.css.toColor("#cc0000"),Ye.css.toColor("#4e9a06"),Ye.css.toColor("#c4a000"),Ye.css.toColor("#3465a4"),Ye.css.toColor("#75507b"),Ye.css.toColor("#06989a"),Ye.css.toColor("#d3d7cf"),Ye.css.toColor("#555753"),Ye.css.toColor("#ef2929"),Ye.css.toColor("#8ae234"),Ye.css.toColor("#fce94f"),Ye.css.toColor("#729fcf"),Ye.css.toColor("#ad7fa8"),Ye.css.toColor("#34e2e2"),Ye.css.toColor("#eeeeec")],Ze=[0,95,135,175,215,255];for(let rt=0;rt<216;rt++){const ot=Ze[rt/36%6|0],dt=Ze[rt/6%6|0],ct=Ze[rt%6];st.push({css:Ye.channels.toCss(ot,dt,ct),rgba:Ye.channels.toRgba(ot,dt,ct)})}for(let rt=0;rt<24;rt++){const ot=8+10*rt;st.push({css:Ye.channels.toCss(ot,ot,ot),rgba:Ye.channels.toRgba(ot,ot,ot)})}return st})());let tt=De.ThemeService=class extends it.Disposable{get colors(){return this._colors}constructor(st){super(),this._optionsService=st,this._contrastCache=new Fe.ColorContrastCache,this._halfContrastCache=new Fe.ColorContrastCache,this._onChangeColors=this.register(new et.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:p,background:He,cursor:Be,cursorAccent:$e,selectionForeground:void 0,selectionBackgroundTransparent:Xe,selectionBackgroundOpaque:Ye.color.blend(He,Xe),selectionInactiveBackgroundTransparent:Xe,selectionInactiveBackgroundOpaque:Ye.color.blend(He,Xe),ansi:De.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(st={}){const Ze=this._colors;if(Ze.foreground=Qe(st.foreground,p),Ze.background=Qe(st.background,He),Ze.cursor=Qe(st.cursor,Be),Ze.cursorAccent=Qe(st.cursorAccent,$e),Ze.selectionBackgroundTransparent=Qe(st.selectionBackground,Xe),Ze.selectionBackgroundOpaque=Ye.color.blend(Ze.background,Ze.selectionBackgroundTransparent),Ze.selectionInactiveBackgroundTransparent=Qe(st.selectionInactiveBackground,Ze.selectionBackgroundTransparent),Ze.selectionInactiveBackgroundOpaque=Ye.color.blend(Ze.background,Ze.selectionInactiveBackgroundTransparent),Ze.selectionForeground=st.selectionForeground?Qe(st.selectionForeground,Ye.NULL_COLOR):void 0,Ze.selectionForeground===Ye.NULL_COLOR&&(Ze.selectionForeground=void 0),Ye.color.isOpaque(Ze.selectionBackgroundTransparent)&&(Ze.selectionBackgroundTransparent=Ye.color.opacity(Ze.selectionBackgroundTransparent,.3)),Ye.color.isOpaque(Ze.selectionInactiveBackgroundTransparent)&&(Ze.selectionInactiveBackgroundTransparent=Ye.color.opacity(Ze.selectionInactiveBackgroundTransparent,.3)),Ze.ansi=De.DEFAULT_ANSI_COLORS.slice(),Ze.ansi[0]=Qe(st.black,De.DEFAULT_ANSI_COLORS[0]),Ze.ansi[1]=Qe(st.red,De.DEFAULT_ANSI_COLORS[1]),Ze.ansi[2]=Qe(st.green,De.DEFAULT_ANSI_COLORS[2]),Ze.ansi[3]=Qe(st.yellow,De.DEFAULT_ANSI_COLORS[3]),Ze.ansi[4]=Qe(st.blue,De.DEFAULT_ANSI_COLORS[4]),Ze.ansi[5]=Qe(st.magenta,De.DEFAULT_ANSI_COLORS[5]),Ze.ansi[6]=Qe(st.cyan,De.DEFAULT_ANSI_COLORS[6]),Ze.ansi[7]=Qe(st.white,De.DEFAULT_ANSI_COLORS[7]),Ze.ansi[8]=Qe(st.brightBlack,De.DEFAULT_ANSI_COLORS[8]),Ze.ansi[9]=Qe(st.brightRed,De.DEFAULT_ANSI_COLORS[9]),Ze.ansi[10]=Qe(st.brightGreen,De.DEFAULT_ANSI_COLORS[10]),Ze.ansi[11]=Qe(st.brightYellow,De.DEFAULT_ANSI_COLORS[11]),Ze.ansi[12]=Qe(st.brightBlue,De.DEFAULT_ANSI_COLORS[12]),Ze.ansi[13]=Qe(st.brightMagenta,De.DEFAULT_ANSI_COLORS[13]),Ze.ansi[14]=Qe(st.brightCyan,De.DEFAULT_ANSI_COLORS[14]),Ze.ansi[15]=Qe(st.brightWhite,De.DEFAULT_ANSI_COLORS[15]),st.extendedAnsi){const rt=Math.min(Ze.ansi.length-16,st.extendedAnsi.length);for(let ot=0;ot<rt;ot++)Ze.ansi[ot+16]=Qe(st.extendedAnsi[ot],De.DEFAULT_ANSI_COLORS[ot+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(st){this._restoreColor(st),this._onChangeColors.fire(this.colors)}_restoreColor(st){if(st!==void 0)switch(st){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[st]=this._restoreColors.ansi[st]}else for(let Ze=0;Ze<this._restoreColors.ansi.length;++Ze)this._colors.ansi[Ze]=this._restoreColors.ansi[Ze]}modifyColors(st){st(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function Qe(st,Ze){if(st!==void 0)try{return Ye.css.toColor(st)}catch{}return Ze}De.ThemeService=tt=Ke([Je(0,We.IOptionsService)],tt)},6349:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CircularList=void 0;const Ke=Ge(8460),Je=Ge(844);class Fe extends Je.Disposable{constructor(et){super(),this._maxLength=et,this.onDeleteEmitter=this.register(new Ke.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new Ke.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new Ke.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(et){if(this._maxLength===et)return;const it=new Array(et);for(let We=0;We<Math.min(et,this.length);We++)it[We]=this._array[this._getCyclicIndex(We)];this._array=it,this._maxLength=et,this._startIndex=0}get length(){return this._length}set length(et){if(et>this._length)for(let it=this._length;it<et;it++)this._array[it]=void 0;this._length=et}get(et){return this._array[this._getCyclicIndex(et)]}set(et,it){this._array[this._getCyclicIndex(et)]=it}push(et){this._array[this._getCyclicIndex(this._length)]=et,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(et,it,...We){if(it){for(let p=et;p<this._length-it;p++)this._array[this._getCyclicIndex(p)]=this._array[this._getCyclicIndex(p+it)];this._length-=it,this.onDeleteEmitter.fire({index:et,amount:it})}for(let p=this._length-1;p>=et;p--)this._array[this._getCyclicIndex(p+We.length)]=this._array[this._getCyclicIndex(p)];for(let p=0;p<We.length;p++)this._array[this._getCyclicIndex(et+p)]=We[p];if(We.length&&this.onInsertEmitter.fire({index:et,amount:We.length}),this._length+We.length>this._maxLength){const p=this._length+We.length-this._maxLength;this._startIndex+=p,this._length=this._maxLength,this.onTrimEmitter.fire(p)}else this._length+=We.length}trimStart(et){et>this._length&&(et=this._length),this._startIndex+=et,this._length-=et,this.onTrimEmitter.fire(et)}shiftElements(et,it,We){if(!(it<=0)){if(et<0||et>=this._length)throw new Error("start argument out of range");if(et+We<0)throw new Error("Cannot shift elements in list beyond index 0");if(We>0){for(let He=it-1;He>=0;He--)this.set(et+He+We,this.get(et+He));const p=et+it+We-this._length;if(p>0)for(this._length+=p;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let p=0;p<it;p++)this.set(et+p+We,this.get(et+p))}}_getCyclicIndex(et){return(this._startIndex+et)%this._maxLength}}De.CircularList=Fe},1439:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.clone=void 0,De.clone=function Ge(Ke,Je=5){if(typeof Ke!="object")return Ke;const Fe=Array.isArray(Ke)?[]:{};for(const Ye in Ke)Fe[Ye]=Je<=1?Ke[Ye]:Ke[Ye]&&Ge(Ke[Ye],Je-1);return Fe}},8055:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.contrastRatio=De.toPaddedHex=De.rgba=De.rgb=De.css=De.color=De.channels=De.NULL_COLOR=void 0;let Ge=0,Ke=0,Je=0,Fe=0;var Ye,et,it,We,p;function He($e){const Xe=$e.toString(16);return Xe.length<2?"0"+Xe:Xe}function Be($e,Xe){return $e<Xe?(Xe+.05)/($e+.05):($e+.05)/(Xe+.05)}De.NULL_COLOR={css:"#00000000",rgba:0},function($e){$e.toCss=function(Xe,tt,Qe,st){return st!==void 0?`#${He(Xe)}${He(tt)}${He(Qe)}${He(st)}`:`#${He(Xe)}${He(tt)}${He(Qe)}`},$e.toRgba=function(Xe,tt,Qe,st=255){return(Xe<<24|tt<<16|Qe<<8|st)>>>0},$e.toColor=function(Xe,tt,Qe,st){return{css:$e.toCss(Xe,tt,Qe,st),rgba:$e.toRgba(Xe,tt,Qe,st)}}}(Ye||(De.channels=Ye={})),function($e){function Xe(tt,Qe){return Fe=Math.round(255*Qe),[Ge,Ke,Je]=p.toChannels(tt.rgba),{css:Ye.toCss(Ge,Ke,Je,Fe),rgba:Ye.toRgba(Ge,Ke,Je,Fe)}}$e.blend=function(tt,Qe){if(Fe=(255&Qe.rgba)/255,Fe===1)return{css:Qe.css,rgba:Qe.rgba};const st=Qe.rgba>>24&255,Ze=Qe.rgba>>16&255,rt=Qe.rgba>>8&255,ot=tt.rgba>>24&255,dt=tt.rgba>>16&255,ct=tt.rgba>>8&255;return Ge=ot+Math.round((st-ot)*Fe),Ke=dt+Math.round((Ze-dt)*Fe),Je=ct+Math.round((rt-ct)*Fe),{css:Ye.toCss(Ge,Ke,Je),rgba:Ye.toRgba(Ge,Ke,Je)}},$e.isOpaque=function(tt){return(255&tt.rgba)==255},$e.ensureContrastRatio=function(tt,Qe,st){const Ze=p.ensureContrastRatio(tt.rgba,Qe.rgba,st);if(Ze)return Ye.toColor(Ze>>24&255,Ze>>16&255,Ze>>8&255)},$e.opaque=function(tt){const Qe=(255|tt.rgba)>>>0;return[Ge,Ke,Je]=p.toChannels(Qe),{css:Ye.toCss(Ge,Ke,Je),rgba:Qe}},$e.opacity=Xe,$e.multiplyOpacity=function(tt,Qe){return Fe=255&tt.rgba,Xe(tt,Fe*Qe/255)},$e.toColorRGB=function(tt){return[tt.rgba>>24&255,tt.rgba>>16&255,tt.rgba>>8&255]}}(et||(De.color=et={})),function($e){let Xe,tt;try{const Qe=document.createElement("canvas");Qe.width=1,Qe.height=1;const st=Qe.getContext("2d",{willReadFrequently:!0});st&&(Xe=st,Xe.globalCompositeOperation="copy",tt=Xe.createLinearGradient(0,0,1,1))}catch{}$e.toColor=function(Qe){if(Qe.match(/#[\da-f]{3,8}/i))switch(Qe.length){case 4:return Ge=parseInt(Qe.slice(1,2).repeat(2),16),Ke=parseInt(Qe.slice(2,3).repeat(2),16),Je=parseInt(Qe.slice(3,4).repeat(2),16),Ye.toColor(Ge,Ke,Je);case 5:return Ge=parseInt(Qe.slice(1,2).repeat(2),16),Ke=parseInt(Qe.slice(2,3).repeat(2),16),Je=parseInt(Qe.slice(3,4).repeat(2),16),Fe=parseInt(Qe.slice(4,5).repeat(2),16),Ye.toColor(Ge,Ke,Je,Fe);case 7:return{css:Qe,rgba:(parseInt(Qe.slice(1),16)<<8|255)>>>0};case 9:return{css:Qe,rgba:parseInt(Qe.slice(1),16)>>>0}}const st=Qe.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(st)return Ge=parseInt(st[1]),Ke=parseInt(st[2]),Je=parseInt(st[3]),Fe=Math.round(255*(st[5]===void 0?1:parseFloat(st[5]))),Ye.toColor(Ge,Ke,Je,Fe);if(!Xe||!tt)throw new Error("css.toColor: Unsupported css format");if(Xe.fillStyle=tt,Xe.fillStyle=Qe,typeof Xe.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(Xe.fillRect(0,0,1,1),[Ge,Ke,Je,Fe]=Xe.getImageData(0,0,1,1).data,Fe!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Ye.toRgba(Ge,Ke,Je,Fe),css:Qe}}}(it||(De.css=it={})),function($e){function Xe(tt,Qe,st){const Ze=tt/255,rt=Qe/255,ot=st/255;return .2126*(Ze<=.03928?Ze/12.92:Math.pow((Ze+.055)/1.055,2.4))+.7152*(rt<=.03928?rt/12.92:Math.pow((rt+.055)/1.055,2.4))+.0722*(ot<=.03928?ot/12.92:Math.pow((ot+.055)/1.055,2.4))}$e.relativeLuminance=function(tt){return Xe(tt>>16&255,tt>>8&255,255&tt)},$e.relativeLuminance2=Xe}(We||(De.rgb=We={})),function($e){function Xe(Qe,st,Ze){const rt=Qe>>24&255,ot=Qe>>16&255,dt=Qe>>8&255;let ct=st>>24&255,lt=st>>16&255,ft=st>>8&255,pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));for(;pt<Ze&&(ct>0||lt>0||ft>0);)ct-=Math.max(0,Math.ceil(.1*ct)),lt-=Math.max(0,Math.ceil(.1*lt)),ft-=Math.max(0,Math.ceil(.1*ft)),pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));return(ct<<24|lt<<16|ft<<8|255)>>>0}function tt(Qe,st,Ze){const rt=Qe>>24&255,ot=Qe>>16&255,dt=Qe>>8&255;let ct=st>>24&255,lt=st>>16&255,ft=st>>8&255,pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));for(;pt<Ze&&(ct<255||lt<255||ft<255);)ct=Math.min(255,ct+Math.ceil(.1*(255-ct))),lt=Math.min(255,lt+Math.ceil(.1*(255-lt))),ft=Math.min(255,ft+Math.ceil(.1*(255-ft))),pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));return(ct<<24|lt<<16|ft<<8|255)>>>0}$e.blend=function(Qe,st){if(Fe=(255&st)/255,Fe===1)return st;const Ze=st>>24&255,rt=st>>16&255,ot=st>>8&255,dt=Qe>>24&255,ct=Qe>>16&255,lt=Qe>>8&255;return Ge=dt+Math.round((Ze-dt)*Fe),Ke=ct+Math.round((rt-ct)*Fe),Je=lt+Math.round((ot-lt)*Fe),Ye.toRgba(Ge,Ke,Je)},$e.ensureContrastRatio=function(Qe,st,Ze){const rt=We.relativeLuminance(Qe>>8),ot=We.relativeLuminance(st>>8);if(Be(rt,ot)<Ze){if(ot<rt){const lt=Xe(Qe,st,Ze),ft=Be(rt,We.relativeLuminance(lt>>8));if(ft<Ze){const pt=tt(Qe,st,Ze);return ft>Be(rt,We.relativeLuminance(pt>>8))?lt:pt}return lt}const dt=tt(Qe,st,Ze),ct=Be(rt,We.relativeLuminance(dt>>8));if(ct<Ze){const lt=Xe(Qe,st,Ze);return ct>Be(rt,We.relativeLuminance(lt>>8))?dt:lt}return dt}},$e.reduceLuminance=Xe,$e.increaseLuminance=tt,$e.toChannels=function(Qe){return[Qe>>24&255,Qe>>16&255,Qe>>8&255,255&Qe]}}(p||(De.rgba=p={})),De.toPaddedHex=He,De.contrastRatio=Be},8969:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CoreTerminal=void 0;const Ke=Ge(844),Je=Ge(2585),Fe=Ge(4348),Ye=Ge(7866),et=Ge(744),it=Ge(7302),We=Ge(6975),p=Ge(8460),He=Ge(1753),Be=Ge(1480),$e=Ge(7994),Xe=Ge(9282),tt=Ge(5435),Qe=Ge(5981),st=Ge(2660);let Ze=!1;class rt extends Ke.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new p.EventEmitter),this._onScroll.event(dt=>{var ct;(ct=this._onScrollApi)==null||ct.fire(dt.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(dt){for(const ct in dt)this.optionsService.options[ct]=dt[ct]}constructor(dt){super(),this._windowsWrappingHeuristics=this.register(new Ke.MutableDisposable),this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new p.EventEmitter),this._instantiationService=new Fe.InstantiationService,this.optionsService=this.register(new it.OptionsService(dt)),this._instantiationService.setService(Je.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(et.BufferService)),this._instantiationService.setService(Je.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(Ye.LogService)),this._instantiationService.setService(Je.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(We.CoreService)),this._instantiationService.setService(Je.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(He.CoreMouseService)),this._instantiationService.setService(Je.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(Be.UnicodeService)),this._instantiationService.setService(Je.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance($e.CharsetService),this._instantiationService.setService(Je.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(st.OscLinkService),this._instantiationService.setService(Je.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new tt.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,p.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,p.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,p.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,p.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(ct=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(ct=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new Qe.WriteBuffer((ct,lt)=>this._inputHandler.parse(ct,lt))),this.register((0,p.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(dt,ct){this._writeBuffer.write(dt,ct)}writeSync(dt,ct){this._logService.logLevel<=Je.LogLevelEnum.WARN&&!Ze&&(this._logService.warn("writeSync is unreliable and will be removed soon."),Ze=!0),this._writeBuffer.writeSync(dt,ct)}input(dt,ct=!0){this.coreService.triggerDataEvent(dt,ct)}resize(dt,ct){isNaN(dt)||isNaN(ct)||(dt=Math.max(dt,et.MINIMUM_COLS),ct=Math.max(ct,et.MINIMUM_ROWS),this._bufferService.resize(dt,ct))}scroll(dt,ct=!1){this._bufferService.scroll(dt,ct)}scrollLines(dt,ct,lt){this._bufferService.scrollLines(dt,ct,lt)}scrollPages(dt){this.scrollLines(dt*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(dt){const ct=dt-this._bufferService.buffer.ydisp;ct!==0&&this.scrollLines(ct)}registerEscHandler(dt,ct){return this._inputHandler.registerEscHandler(dt,ct)}registerDcsHandler(dt,ct){return this._inputHandler.registerDcsHandler(dt,ct)}registerCsiHandler(dt,ct){return this._inputHandler.registerCsiHandler(dt,ct)}registerOscHandler(dt,ct){return this._inputHandler.registerOscHandler(dt,ct)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let dt=!1;const ct=this.optionsService.rawOptions.windowsPty;ct&&ct.buildNumber!==void 0&&ct.buildNumber!==void 0?dt=ct.backend==="conpty"&&ct.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(dt=!0),dt?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const dt=[];dt.push(this.onLineFeed(Xe.updateWindowsModeWrappedState.bind(null,this._bufferService))),dt.push(this.registerCsiHandler({final:"H"},()=>((0,Xe.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,Ke.toDisposable)(()=>{for(const ct of dt)ct.dispose()})}}}De.CoreTerminal=rt},8460:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.runAndSubscribe=De.forwardEvent=De.EventEmitter=void 0,De.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=Ge=>(this._listeners.push(Ge),{dispose:()=>{if(!this._disposed){for(let Ke=0;Ke<this._listeners.length;Ke++)if(this._listeners[Ke]===Ge)return void this._listeners.splice(Ke,1)}}})),this._event}fire(Ge,Ke){const Je=[];for(let Fe=0;Fe<this._listeners.length;Fe++)Je.push(this._listeners[Fe]);for(let Fe=0;Fe<Je.length;Fe++)Je[Fe].call(void 0,Ge,Ke)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},De.forwardEvent=function(Ge,Ke){return Ge(Je=>Ke.fire(Je))},De.runAndSubscribe=function(Ge,Ke){return Ke(void 0),Ge(Je=>Ke(Je))}},5435:function(gt,De,Ge){var Ke=this&&this.__decorate||function(wt,nt,ht,_t){var vt,Lt=arguments.length,Dt=Lt<3?nt:_t===null?_t=Object.getOwnPropertyDescriptor(nt,ht):_t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Dt=Reflect.decorate(wt,nt,ht,_t);else for(var Bt=wt.length-1;Bt>=0;Bt--)(vt=wt[Bt])&&(Dt=(Lt<3?vt(Dt):Lt>3?vt(nt,ht,Dt):vt(nt,ht))||Dt);return Lt>3&&Dt&&Object.defineProperty(nt,ht,Dt),Dt},Je=this&&this.__param||function(wt,nt){return function(ht,_t){nt(ht,_t,wt)}};Object.defineProperty(De,"__esModule",{value:!0}),De.InputHandler=De.WindowsOptionsReportType=void 0;const Fe=Ge(2584),Ye=Ge(7116),et=Ge(2015),it=Ge(844),We=Ge(482),p=Ge(8437),He=Ge(8460),Be=Ge(643),$e=Ge(511),Xe=Ge(3734),tt=Ge(2585),Qe=Ge(1480),st=Ge(6242),Ze=Ge(6351),rt=Ge(5941),ot={"(":0,")":1,"*":2,"+":3,"-":1,".":2},dt=131072;function ct(wt,nt){if(wt>24)return nt.setWinLines||!1;switch(wt){case 1:return!!nt.restoreWin;case 2:return!!nt.minimizeWin;case 3:return!!nt.setWinPosition;case 4:return!!nt.setWinSizePixels;case 5:return!!nt.raiseWin;case 6:return!!nt.lowerWin;case 7:return!!nt.refreshWin;case 8:return!!nt.setWinSizeChars;case 9:return!!nt.maximizeWin;case 10:return!!nt.fullscreenWin;case 11:return!!nt.getWinState;case 13:return!!nt.getWinPosition;case 14:return!!nt.getWinSizePixels;case 15:return!!nt.getScreenSizePixels;case 16:return!!nt.getCellSizePixels;case 18:return!!nt.getWinSizeChars;case 19:return!!nt.getScreenSizeChars;case 20:return!!nt.getIconTitle;case 21:return!!nt.getWinTitle;case 22:return!!nt.pushTitle;case 23:return!!nt.popTitle;case 24:return!!nt.setWinLines}return!1}var lt;(function(wt){wt[wt.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",wt[wt.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(lt||(De.WindowsOptionsReportType=lt={}));let ft=0;class pt extends it.Disposable{getAttrData(){return this._curAttrData}constructor(nt,ht,_t,vt,Lt,Dt,Bt,Mt,St=new et.EscapeSequenceParser){super(),this._bufferService=nt,this._charsetService=ht,this._coreService=_t,this._logService=vt,this._optionsService=Lt,this._oscLinkService=Dt,this._coreMouseService=Bt,this._unicodeService=Mt,this._parser=St,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new We.StringToUtf32,this._utf8Decoder=new We.Utf8ToUtf32,this._workCell=new $e.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=p.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new He.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new He.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new He.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new He.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new He.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new He.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new He.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new He.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new He.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new He.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new He.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new He.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new He.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Et(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(ut=>this._activeBuffer=ut.activeBuffer)),this._parser.setCsiHandlerFallback((ut,kt)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(ut),params:kt.toArray()})}),this._parser.setEscHandlerFallback(ut=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(ut)})}),this._parser.setExecuteHandlerFallback(ut=>{this._logService.debug("Unknown EXECUTE code: ",{code:ut})}),this._parser.setOscHandlerFallback((ut,kt,At)=>{this._logService.debug("Unknown OSC code: ",{identifier:ut,action:kt,data:At})}),this._parser.setDcsHandlerFallback((ut,kt,At)=>{kt==="HOOK"&&(At=At.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(ut),action:kt,payload:At})}),this._parser.setPrintHandler((ut,kt,At)=>this.print(ut,kt,At)),this._parser.registerCsiHandler({final:"@"},ut=>this.insertChars(ut)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},ut=>this.scrollLeft(ut)),this._parser.registerCsiHandler({final:"A"},ut=>this.cursorUp(ut)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},ut=>this.scrollRight(ut)),this._parser.registerCsiHandler({final:"B"},ut=>this.cursorDown(ut)),this._parser.registerCsiHandler({final:"C"},ut=>this.cursorForward(ut)),this._parser.registerCsiHandler({final:"D"},ut=>this.cursorBackward(ut)),this._parser.registerCsiHandler({final:"E"},ut=>this.cursorNextLine(ut)),this._parser.registerCsiHandler({final:"F"},ut=>this.cursorPrecedingLine(ut)),this._parser.registerCsiHandler({final:"G"},ut=>this.cursorCharAbsolute(ut)),this._parser.registerCsiHandler({final:"H"},ut=>this.cursorPosition(ut)),this._parser.registerCsiHandler({final:"I"},ut=>this.cursorForwardTab(ut)),this._parser.registerCsiHandler({final:"J"},ut=>this.eraseInDisplay(ut,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},ut=>this.eraseInDisplay(ut,!0)),this._parser.registerCsiHandler({final:"K"},ut=>this.eraseInLine(ut,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},ut=>this.eraseInLine(ut,!0)),this._parser.registerCsiHandler({final:"L"},ut=>this.insertLines(ut)),this._parser.registerCsiHandler({final:"M"},ut=>this.deleteLines(ut)),this._parser.registerCsiHandler({final:"P"},ut=>this.deleteChars(ut)),this._parser.registerCsiHandler({final:"S"},ut=>this.scrollUp(ut)),this._parser.registerCsiHandler({final:"T"},ut=>this.scrollDown(ut)),this._parser.registerCsiHandler({final:"X"},ut=>this.eraseChars(ut)),this._parser.registerCsiHandler({final:"Z"},ut=>this.cursorBackwardTab(ut)),this._parser.registerCsiHandler({final:"`"},ut=>this.charPosAbsolute(ut)),this._parser.registerCsiHandler({final:"a"},ut=>this.hPositionRelative(ut)),this._parser.registerCsiHandler({final:"b"},ut=>this.repeatPrecedingCharacter(ut)),this._parser.registerCsiHandler({final:"c"},ut=>this.sendDeviceAttributesPrimary(ut)),this._parser.registerCsiHandler({prefix:">",final:"c"},ut=>this.sendDeviceAttributesSecondary(ut)),this._parser.registerCsiHandler({final:"d"},ut=>this.linePosAbsolute(ut)),this._parser.registerCsiHandler({final:"e"},ut=>this.vPositionRelative(ut)),this._parser.registerCsiHandler({final:"f"},ut=>this.hVPosition(ut)),this._parser.registerCsiHandler({final:"g"},ut=>this.tabClear(ut)),this._parser.registerCsiHandler({final:"h"},ut=>this.setMode(ut)),this._parser.registerCsiHandler({prefix:"?",final:"h"},ut=>this.setModePrivate(ut)),this._parser.registerCsiHandler({final:"l"},ut=>this.resetMode(ut)),this._parser.registerCsiHandler({prefix:"?",final:"l"},ut=>this.resetModePrivate(ut)),this._parser.registerCsiHandler({final:"m"},ut=>this.charAttributes(ut)),this._parser.registerCsiHandler({final:"n"},ut=>this.deviceStatus(ut)),this._parser.registerCsiHandler({prefix:"?",final:"n"},ut=>this.deviceStatusPrivate(ut)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},ut=>this.softReset(ut)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},ut=>this.setCursorStyle(ut)),this._parser.registerCsiHandler({final:"r"},ut=>this.setScrollRegion(ut)),this._parser.registerCsiHandler({final:"s"},ut=>this.saveCursor(ut)),this._parser.registerCsiHandler({final:"t"},ut=>this.windowOptions(ut)),this._parser.registerCsiHandler({final:"u"},ut=>this.restoreCursor(ut)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},ut=>this.insertColumns(ut)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},ut=>this.deleteColumns(ut)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},ut=>this.selectProtected(ut)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},ut=>this.requestMode(ut,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},ut=>this.requestMode(ut,!1)),this._parser.setExecuteHandler(Fe.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(Fe.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(Fe.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(Fe.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(Fe.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(Fe.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(Fe.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(Fe.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(Fe.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Fe.C1.IND,()=>this.index()),this._parser.setExecuteHandler(Fe.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Fe.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new st.OscHandler(ut=>(this.setTitle(ut),this.setIconName(ut),!0))),this._parser.registerOscHandler(1,new st.OscHandler(ut=>this.setIconName(ut))),this._parser.registerOscHandler(2,new st.OscHandler(ut=>this.setTitle(ut))),this._parser.registerOscHandler(4,new st.OscHandler(ut=>this.setOrReportIndexedColor(ut))),this._parser.registerOscHandler(8,new st.OscHandler(ut=>this.setHyperlink(ut))),this._parser.registerOscHandler(10,new st.OscHandler(ut=>this.setOrReportFgColor(ut))),this._parser.registerOscHandler(11,new st.OscHandler(ut=>this.setOrReportBgColor(ut))),this._parser.registerOscHandler(12,new st.OscHandler(ut=>this.setOrReportCursorColor(ut))),this._parser.registerOscHandler(104,new st.OscHandler(ut=>this.restoreIndexedColor(ut))),this._parser.registerOscHandler(110,new st.OscHandler(ut=>this.restoreFgColor(ut))),this._parser.registerOscHandler(111,new st.OscHandler(ut=>this.restoreBgColor(ut))),this._parser.registerOscHandler(112,new st.OscHandler(ut=>this.restoreCursorColor(ut))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const ut in Ye.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:ut},()=>this.selectCharset("("+ut)),this._parser.registerEscHandler({intermediates:")",final:ut},()=>this.selectCharset(")"+ut)),this._parser.registerEscHandler({intermediates:"*",final:ut},()=>this.selectCharset("*"+ut)),this._parser.registerEscHandler({intermediates:"+",final:ut},()=>this.selectCharset("+"+ut)),this._parser.registerEscHandler({intermediates:"-",final:ut},()=>this.selectCharset("-"+ut)),this._parser.registerEscHandler({intermediates:".",final:ut},()=>this.selectCharset("."+ut)),this._parser.registerEscHandler({intermediates:"/",final:ut},()=>this.selectCharset("/"+ut));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(ut=>(this._logService.error("Parsing error: ",ut),ut)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Ze.DcsHandler((ut,kt)=>this.requestStatusString(ut,kt)))}_preserveStack(nt,ht,_t,vt){this._parseStack.paused=!0,this._parseStack.cursorStartX=nt,this._parseStack.cursorStartY=ht,this._parseStack.decodedLength=_t,this._parseStack.position=vt}_logSlowResolvingAsync(nt){this._logService.logLevel<=tt.LogLevelEnum.WARN&&Promise.race([nt,new Promise((ht,_t)=>setTimeout(()=>_t("#SLOW_TIMEOUT"),5e3))]).catch(ht=>{if(ht!=="#SLOW_TIMEOUT")throw ht;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(nt,ht){let _t,vt=this._activeBuffer.x,Lt=this._activeBuffer.y,Dt=0;const Bt=this._parseStack.paused;if(Bt){if(_t=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,ht))return this._logSlowResolvingAsync(_t),_t;vt=this._parseStack.cursorStartX,Lt=this._parseStack.cursorStartY,this._parseStack.paused=!1,nt.length>dt&&(Dt=this._parseStack.position+dt)}if(this._logService.logLevel<=tt.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof nt=="string"?` "${nt}"`:` "${Array.prototype.map.call(nt,ut=>String.fromCharCode(ut)).join("")}"`),typeof nt=="string"?nt.split("").map(ut=>ut.charCodeAt(0)):nt),this._parseBuffer.length<nt.length&&this._parseBuffer.length<dt&&(this._parseBuffer=new Uint32Array(Math.min(nt.length,dt))),Bt||this._dirtyRowTracker.clearRange(),nt.length>dt)for(let ut=Dt;ut<nt.length;ut+=dt){const kt=ut+dt<nt.length?ut+dt:nt.length,At=typeof nt=="string"?this._stringDecoder.decode(nt.substring(ut,kt),this._parseBuffer):this._utf8Decoder.decode(nt.subarray(ut,kt),this._parseBuffer);if(_t=this._parser.parse(this._parseBuffer,At))return this._preserveStack(vt,Lt,At,ut),this._logSlowResolvingAsync(_t),_t}else if(!Bt){const ut=typeof nt=="string"?this._stringDecoder.decode(nt,this._parseBuffer):this._utf8Decoder.decode(nt,this._parseBuffer);if(_t=this._parser.parse(this._parseBuffer,ut))return this._preserveStack(vt,Lt,ut,0),this._logSlowResolvingAsync(_t),_t}this._activeBuffer.x===vt&&this._activeBuffer.y===Lt||this._onCursorMove.fire();const Mt=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),St=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);St<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(St,this._bufferService.rows-1),Math.min(Mt,this._bufferService.rows-1))}print(nt,ht,_t){let vt,Lt;const Dt=this._charsetService.charset,Bt=this._optionsService.rawOptions.screenReaderMode,Mt=this._bufferService.cols,St=this._coreService.decPrivateModes.wraparound,ut=this._coreService.modes.insertMode,kt=this._curAttrData;let At=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&_t-ht>0&&At.getWidth(this._activeBuffer.x-1)===2&&At.setCellFromCodepoint(this._activeBuffer.x-1,0,1,kt);let Ot=this._parser.precedingJoinState;for(let Tt=ht;Tt<_t;++Tt){if(vt=nt[Tt],vt<127&&Dt){const Kt=Dt[String.fromCharCode(vt)];Kt&&(vt=Kt.charCodeAt(0))}const Ft=this._unicodeService.charProperties(vt,Ot);Lt=Qe.UnicodeService.extractWidth(Ft);const It=Qe.UnicodeService.extractShouldJoin(Ft),zt=It?Qe.UnicodeService.extractWidth(Ot):0;if(Ot=Ft,Bt&&this._onA11yChar.fire((0,We.stringFromCodePoint)(vt)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+Lt-zt>Mt){if(St){const Kt=At;let $t=this._activeBuffer.x-zt;for(this._activeBuffer.x=zt,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),At=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),zt>0&&At instanceof p.BufferLine&&At.copyCellsFrom(Kt,$t,0,zt,!1);$t<Mt;)Kt.setCellFromCodepoint($t++,0,1,kt)}else if(this._activeBuffer.x=Mt-1,Lt===2)continue}if(It&&this._activeBuffer.x){const Kt=At.getWidth(this._activeBuffer.x-1)?1:2;At.addCodepointToCell(this._activeBuffer.x-Kt,vt,Lt);for(let $t=Lt-zt;--$t>=0;)At.setCellFromCodepoint(this._activeBuffer.x++,0,0,kt)}else if(ut&&(At.insertCells(this._activeBuffer.x,Lt-zt,this._activeBuffer.getNullCell(kt)),At.getWidth(Mt-1)===2&&At.setCellFromCodepoint(Mt-1,Be.NULL_CELL_CODE,Be.NULL_CELL_WIDTH,kt)),At.setCellFromCodepoint(this._activeBuffer.x++,vt,Lt,kt),Lt>0)for(;--Lt;)At.setCellFromCodepoint(this._activeBuffer.x++,0,0,kt)}this._parser.precedingJoinState=Ot,this._activeBuffer.x<Mt&&_t-ht>0&&At.getWidth(this._activeBuffer.x)===0&&!At.hasContent(this._activeBuffer.x)&&At.setCellFromCodepoint(this._activeBuffer.x,0,1,kt),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(nt,ht){return nt.final!=="t"||nt.prefix||nt.intermediates?this._parser.registerCsiHandler(nt,ht):this._parser.registerCsiHandler(nt,_t=>!ct(_t.params[0],this._optionsService.rawOptions.windowOptions)||ht(_t))}registerDcsHandler(nt,ht){return this._parser.registerDcsHandler(nt,new Ze.DcsHandler(ht))}registerEscHandler(nt,ht){return this._parser.registerEscHandler(nt,ht)}registerOscHandler(nt,ht){return this._parser.registerOscHandler(nt,new st.OscHandler(ht))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var nt;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((nt=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&nt.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const ht=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);ht.hasWidth(this._activeBuffer.x)&&!ht.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const nt=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-nt),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(nt=this._bufferService.cols-1){this._activeBuffer.x=Math.min(nt,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(nt,ht){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=nt,this._activeBuffer.y=this._activeBuffer.scrollTop+ht):(this._activeBuffer.x=nt,this._activeBuffer.y=ht),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(nt,ht){this._restrictCursor(),this._setCursor(this._activeBuffer.x+nt,this._activeBuffer.y+ht)}cursorUp(nt){const ht=this._activeBuffer.y-this._activeBuffer.scrollTop;return ht>=0?this._moveCursor(0,-Math.min(ht,nt.params[0]||1)):this._moveCursor(0,-(nt.params[0]||1)),!0}cursorDown(nt){const ht=this._activeBuffer.scrollBottom-this._activeBuffer.y;return ht>=0?this._moveCursor(0,Math.min(ht,nt.params[0]||1)):this._moveCursor(0,nt.params[0]||1),!0}cursorForward(nt){return this._moveCursor(nt.params[0]||1,0),!0}cursorBackward(nt){return this._moveCursor(-(nt.params[0]||1),0),!0}cursorNextLine(nt){return this.cursorDown(nt),this._activeBuffer.x=0,!0}cursorPrecedingLine(nt){return this.cursorUp(nt),this._activeBuffer.x=0,!0}cursorCharAbsolute(nt){return this._setCursor((nt.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(nt){return this._setCursor(nt.length>=2?(nt.params[1]||1)-1:0,(nt.params[0]||1)-1),!0}charPosAbsolute(nt){return this._setCursor((nt.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(nt){return this._moveCursor(nt.params[0]||1,0),!0}linePosAbsolute(nt){return this._setCursor(this._activeBuffer.x,(nt.params[0]||1)-1),!0}vPositionRelative(nt){return this._moveCursor(0,nt.params[0]||1),!0}hVPosition(nt){return this.cursorPosition(nt),!0}tabClear(nt){const ht=nt.params[0];return ht===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:ht===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(nt){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let ht=nt.params[0]||1;for(;ht--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(nt){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let ht=nt.params[0]||1;for(;ht--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(nt){const ht=nt.params[0];return ht===1&&(this._curAttrData.bg|=536870912),ht!==2&&ht!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(nt,ht,_t,vt=!1,Lt=!1){const Dt=this._activeBuffer.lines.get(this._activeBuffer.ybase+nt);Dt.replaceCells(ht,_t,this._activeBuffer.getNullCell(this._eraseAttrData()),Lt),vt&&(Dt.isWrapped=!1)}_resetBufferLine(nt,ht=!1){const _t=this._activeBuffer.lines.get(this._activeBuffer.ybase+nt);_t&&(_t.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),ht),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+nt),_t.isWrapped=!1)}eraseInDisplay(nt,ht=!1){let _t;switch(this._restrictCursor(this._bufferService.cols),nt.params[0]){case 0:for(_t=this._activeBuffer.y,this._dirtyRowTracker.markDirty(_t),this._eraseInBufferLine(_t++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,ht);_t<this._bufferService.rows;_t++)this._resetBufferLine(_t,ht);this._dirtyRowTracker.markDirty(_t);break;case 1:for(_t=this._activeBuffer.y,this._dirtyRowTracker.markDirty(_t),this._eraseInBufferLine(_t,0,this._activeBuffer.x+1,!0,ht),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(_t+1).isWrapped=!1);_t--;)this._resetBufferLine(_t,ht);this._dirtyRowTracker.markDirty(0);break;case 2:for(_t=this._bufferService.rows,this._dirtyRowTracker.markDirty(_t-1);_t--;)this._resetBufferLine(_t,ht);this._dirtyRowTracker.markDirty(0);break;case 3:const vt=this._activeBuffer.lines.length-this._bufferService.rows;vt>0&&(this._activeBuffer.lines.trimStart(vt),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-vt,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-vt,0),this._onScroll.fire(0))}return!0}eraseInLine(nt,ht=!1){switch(this._restrictCursor(this._bufferService.cols),nt.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,ht);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,ht);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,ht)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(nt){this._restrictCursor();let ht=nt.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const _t=this._activeBuffer.ybase+this._activeBuffer.y,vt=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Lt=this._bufferService.rows-1+this._activeBuffer.ybase-vt+1;for(;ht--;)this._activeBuffer.lines.splice(Lt-1,1),this._activeBuffer.lines.splice(_t,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(nt){this._restrictCursor();let ht=nt.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const _t=this._activeBuffer.ybase+this._activeBuffer.y;let vt;for(vt=this._bufferService.rows-1-this._activeBuffer.scrollBottom,vt=this._bufferService.rows-1+this._activeBuffer.ybase-vt;ht--;)this._activeBuffer.lines.splice(_t,1),this._activeBuffer.lines.splice(vt,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(nt){this._restrictCursor();const ht=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return ht&&(ht.insertCells(this._activeBuffer.x,nt.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(nt){this._restrictCursor();const ht=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return ht&&(ht.deleteCells(this._activeBuffer.x,nt.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(nt){let ht=nt.params[0]||1;for(;ht--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(nt){let ht=nt.params[0]||1;for(;ht--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(p.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(nt){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const ht=nt.params[0]||1;for(let _t=this._activeBuffer.scrollTop;_t<=this._activeBuffer.scrollBottom;++_t){const vt=this._activeBuffer.lines.get(this._activeBuffer.ybase+_t);vt.deleteCells(0,ht,this._activeBuffer.getNullCell(this._eraseAttrData())),vt.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(nt){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const ht=nt.params[0]||1;for(let _t=this._activeBuffer.scrollTop;_t<=this._activeBuffer.scrollBottom;++_t){const vt=this._activeBuffer.lines.get(this._activeBuffer.ybase+_t);vt.insertCells(0,ht,this._activeBuffer.getNullCell(this._eraseAttrData())),vt.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(nt){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const ht=nt.params[0]||1;for(let _t=this._activeBuffer.scrollTop;_t<=this._activeBuffer.scrollBottom;++_t){const vt=this._activeBuffer.lines.get(this._activeBuffer.ybase+_t);vt.insertCells(this._activeBuffer.x,ht,this._activeBuffer.getNullCell(this._eraseAttrData())),vt.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(nt){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const ht=nt.params[0]||1;for(let _t=this._activeBuffer.scrollTop;_t<=this._activeBuffer.scrollBottom;++_t){const vt=this._activeBuffer.lines.get(this._activeBuffer.ybase+_t);vt.deleteCells(this._activeBuffer.x,ht,this._activeBuffer.getNullCell(this._eraseAttrData())),vt.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(nt){this._restrictCursor();const ht=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return ht&&(ht.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(nt.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(nt){const ht=this._parser.precedingJoinState;if(!ht)return!0;const _t=nt.params[0]||1,vt=Qe.UnicodeService.extractWidth(ht),Lt=this._activeBuffer.x-vt,Dt=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(Lt),Bt=new Uint32Array(Dt.length*_t);let Mt=0;for(let ut=0;ut<Dt.length;){const kt=Dt.codePointAt(ut)||0;Bt[Mt++]=kt,ut+=kt>65535?2:1}let St=Mt;for(let ut=1;ut<_t;++ut)Bt.copyWithin(St,0,Mt),St+=Mt;return this.print(Bt,0,St),!0}sendDeviceAttributesPrimary(nt){return nt.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(Fe.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(Fe.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(nt){return nt.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(Fe.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(Fe.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(nt.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(Fe.C0.ESC+"[>83;40003;0c")),!0}_is(nt){return(this._optionsService.rawOptions.termName+"").indexOf(nt)===0}setMode(nt){for(let ht=0;ht<nt.length;ht++)switch(nt.params[ht]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(nt){for(let ht=0;ht<nt.length;ht++)switch(nt.params[ht]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Ye.DEFAULT_CHARSET),this._charsetService.setgCharset(1,Ye.DEFAULT_CHARSET),this._charsetService.setgCharset(2,Ye.DEFAULT_CHARSET),this._charsetService.setgCharset(3,Ye.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(nt){for(let ht=0;ht<nt.length;ht++)switch(nt.params[ht]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(nt){for(let ht=0;ht<nt.length;ht++)switch(nt.params[ht]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),nt.params[ht]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(nt,ht){const _t=this._coreService.decPrivateModes,{activeProtocol:vt,activeEncoding:Lt}=this._coreMouseService,Dt=this._coreService,{buffers:Bt,cols:Mt}=this._bufferService,{active:St,alt:ut}=Bt,kt=this._optionsService.rawOptions,At=It=>It?1:2,Ot=nt.params[0];return Tt=Ot,Ft=ht?Ot===2?4:Ot===4?At(Dt.modes.insertMode):Ot===12?3:Ot===20?At(kt.convertEol):0:Ot===1?At(_t.applicationCursorKeys):Ot===3?kt.windowOptions.setWinLines?Mt===80?2:Mt===132?1:0:0:Ot===6?At(_t.origin):Ot===7?At(_t.wraparound):Ot===8?3:Ot===9?At(vt==="X10"):Ot===12?At(kt.cursorBlink):Ot===25?At(!Dt.isCursorHidden):Ot===45?At(_t.reverseWraparound):Ot===66?At(_t.applicationKeypad):Ot===67?4:Ot===1e3?At(vt==="VT200"):Ot===1002?At(vt==="DRAG"):Ot===1003?At(vt==="ANY"):Ot===1004?At(_t.sendFocus):Ot===1005?4:Ot===1006?At(Lt==="SGR"):Ot===1015?4:Ot===1016?At(Lt==="SGR_PIXELS"):Ot===1048?1:Ot===47||Ot===1047||Ot===1049?At(St===ut):Ot===2004?At(_t.bracketedPasteMode):0,Dt.triggerDataEvent(`${Fe.C0.ESC}[${ht?"":"?"}${Tt};${Ft}$y`),!0;var Tt,Ft}_updateAttrColor(nt,ht,_t,vt,Lt){return ht===2?(nt|=50331648,nt&=-16777216,nt|=Xe.AttributeData.fromColorRGB([_t,vt,Lt])):ht===5&&(nt&=-50331904,nt|=33554432|255&_t),nt}_extractColor(nt,ht,_t){const vt=[0,0,-1,0,0,0];let Lt=0,Dt=0;do{if(vt[Dt+Lt]=nt.params[ht+Dt],nt.hasSubParams(ht+Dt)){const Bt=nt.getSubParams(ht+Dt);let Mt=0;do vt[1]===5&&(Lt=1),vt[Dt+Mt+1+Lt]=Bt[Mt];while(++Mt<Bt.length&&Mt+Dt+1+Lt<vt.length);break}if(vt[1]===5&&Dt+Lt>=2||vt[1]===2&&Dt+Lt>=5)break;vt[1]&&(Lt=1)}while(++Dt+ht<nt.length&&Dt+Lt<vt.length);for(let Bt=2;Bt<vt.length;++Bt)vt[Bt]===-1&&(vt[Bt]=0);switch(vt[0]){case 38:_t.fg=this._updateAttrColor(_t.fg,vt[1],vt[3],vt[4],vt[5]);break;case 48:_t.bg=this._updateAttrColor(_t.bg,vt[1],vt[3],vt[4],vt[5]);break;case 58:_t.extended=_t.extended.clone(),_t.extended.underlineColor=this._updateAttrColor(_t.extended.underlineColor,vt[1],vt[3],vt[4],vt[5])}return Dt}_processUnderline(nt,ht){ht.extended=ht.extended.clone(),(!~nt||nt>5)&&(nt=1),ht.extended.underlineStyle=nt,ht.fg|=268435456,nt===0&&(ht.fg&=-268435457),ht.updateExtended()}_processSGR0(nt){nt.fg=p.DEFAULT_ATTR_DATA.fg,nt.bg=p.DEFAULT_ATTR_DATA.bg,nt.extended=nt.extended.clone(),nt.extended.underlineStyle=0,nt.extended.underlineColor&=-67108864,nt.updateExtended()}charAttributes(nt){if(nt.length===1&&nt.params[0]===0)return this._processSGR0(this._curAttrData),!0;const ht=nt.length;let _t;const vt=this._curAttrData;for(let Lt=0;Lt<ht;Lt++)_t=nt.params[Lt],_t>=30&&_t<=37?(vt.fg&=-50331904,vt.fg|=16777216|_t-30):_t>=40&&_t<=47?(vt.bg&=-50331904,vt.bg|=16777216|_t-40):_t>=90&&_t<=97?(vt.fg&=-50331904,vt.fg|=16777224|_t-90):_t>=100&&_t<=107?(vt.bg&=-50331904,vt.bg|=16777224|_t-100):_t===0?this._processSGR0(vt):_t===1?vt.fg|=134217728:_t===3?vt.bg|=67108864:_t===4?(vt.fg|=268435456,this._processUnderline(nt.hasSubParams(Lt)?nt.getSubParams(Lt)[0]:1,vt)):_t===5?vt.fg|=536870912:_t===7?vt.fg|=67108864:_t===8?vt.fg|=1073741824:_t===9?vt.fg|=2147483648:_t===2?vt.bg|=134217728:_t===21?this._processUnderline(2,vt):_t===22?(vt.fg&=-134217729,vt.bg&=-134217729):_t===23?vt.bg&=-67108865:_t===24?(vt.fg&=-268435457,this._processUnderline(0,vt)):_t===25?vt.fg&=-536870913:_t===27?vt.fg&=-67108865:_t===28?vt.fg&=-1073741825:_t===29?vt.fg&=2147483647:_t===39?(vt.fg&=-67108864,vt.fg|=16777215&p.DEFAULT_ATTR_DATA.fg):_t===49?(vt.bg&=-67108864,vt.bg|=16777215&p.DEFAULT_ATTR_DATA.bg):_t===38||_t===48||_t===58?Lt+=this._extractColor(nt,Lt,vt):_t===53?vt.bg|=1073741824:_t===55?vt.bg&=-1073741825:_t===59?(vt.extended=vt.extended.clone(),vt.extended.underlineColor=-1,vt.updateExtended()):_t===100?(vt.fg&=-67108864,vt.fg|=16777215&p.DEFAULT_ATTR_DATA.fg,vt.bg&=-67108864,vt.bg|=16777215&p.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",_t);return!0}deviceStatus(nt){switch(nt.params[0]){case 5:this._coreService.triggerDataEvent(`${Fe.C0.ESC}[0n`);break;case 6:const ht=this._activeBuffer.y+1,_t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${Fe.C0.ESC}[${ht};${_t}R`)}return!0}deviceStatusPrivate(nt){if(nt.params[0]===6){const ht=this._activeBuffer.y+1,_t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${Fe.C0.ESC}[?${ht};${_t}R`)}return!0}softReset(nt){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(nt){const ht=nt.params[0]||1;switch(ht){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const _t=ht%2==1;return this._optionsService.options.cursorBlink=_t,!0}setScrollRegion(nt){const ht=nt.params[0]||1;let _t;return(nt.length<2||(_t=nt.params[1])>this._bufferService.rows||_t===0)&&(_t=this._bufferService.rows),_t>ht&&(this._activeBuffer.scrollTop=ht-1,this._activeBuffer.scrollBottom=_t-1,this._setCursor(0,0)),!0}windowOptions(nt){if(!ct(nt.params[0],this._optionsService.rawOptions.windowOptions))return!0;const ht=nt.length>1?nt.params[1]:0;switch(nt.params[0]){case 14:ht!==2&&this._onRequestWindowsOptionsReport.fire(lt.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(lt.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${Fe.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:ht!==0&&ht!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),ht!==0&&ht!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:ht!==0&&ht!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),ht!==0&&ht!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(nt){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(nt){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(nt){return this._windowTitle=nt,this._onTitleChange.fire(nt),!0}setIconName(nt){return this._iconName=nt,!0}setOrReportIndexedColor(nt){const ht=[],_t=nt.split(";");for(;_t.length>1;){const vt=_t.shift(),Lt=_t.shift();if(/^\d+$/.exec(vt)){const Dt=parseInt(vt);if(yt(Dt))if(Lt==="?")ht.push({type:0,index:Dt});else{const Bt=(0,rt.parseColor)(Lt);Bt&&ht.push({type:1,index:Dt,color:Bt})}}}return ht.length&&this._onColor.fire(ht),!0}setHyperlink(nt){const ht=nt.split(";");return!(ht.length<2)&&(ht[1]?this._createHyperlink(ht[0],ht[1]):!ht[0]&&this._finishHyperlink())}_createHyperlink(nt,ht){this._getCurrentLinkId()&&this._finishHyperlink();const _t=nt.split(":");let vt;const Lt=_t.findIndex(Dt=>Dt.startsWith("id="));return Lt!==-1&&(vt=_t[Lt].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:vt,uri:ht}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(nt,ht){const _t=nt.split(";");for(let vt=0;vt<_t.length&&!(ht>=this._specialColors.length);++vt,++ht)if(_t[vt]==="?")this._onColor.fire([{type:0,index:this._specialColors[ht]}]);else{const Lt=(0,rt.parseColor)(_t[vt]);Lt&&this._onColor.fire([{type:1,index:this._specialColors[ht],color:Lt}])}return!0}setOrReportFgColor(nt){return this._setOrReportSpecialColor(nt,0)}setOrReportBgColor(nt){return this._setOrReportSpecialColor(nt,1)}setOrReportCursorColor(nt){return this._setOrReportSpecialColor(nt,2)}restoreIndexedColor(nt){if(!nt)return this._onColor.fire([{type:2}]),!0;const ht=[],_t=nt.split(";");for(let vt=0;vt<_t.length;++vt)if(/^\d+$/.exec(_t[vt])){const Lt=parseInt(_t[vt]);yt(Lt)&&ht.push({type:2,index:Lt})}return ht.length&&this._onColor.fire(ht),!0}restoreFgColor(nt){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(nt){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(nt){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Ye.DEFAULT_CHARSET),!0}selectCharset(nt){return nt.length!==2?(this.selectDefaultCharset(),!0):(nt[0]==="/"||this._charsetService.setgCharset(ot[nt[0]],Ye.CHARSETS[nt[1]]||Ye.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const nt=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,nt,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=p.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=p.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(nt){return this._charsetService.setgLevel(nt),!0}screenAlignmentPattern(){const nt=new $e.CellData;nt.content=4194373,nt.fg=this._curAttrData.fg,nt.bg=this._curAttrData.bg,this._setCursor(0,0);for(let ht=0;ht<this._bufferService.rows;++ht){const _t=this._activeBuffer.ybase+this._activeBuffer.y+ht,vt=this._activeBuffer.lines.get(_t);vt&&(vt.fill(nt),vt.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(nt,ht){const _t=this._bufferService.buffer,vt=this._optionsService.rawOptions;return(Lt=>(this._coreService.triggerDataEvent(`${Fe.C0.ESC}${Lt}${Fe.C0.ESC}\\`),!0))(nt==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:nt==='"p'?'P1$r61;1"p':nt==="r"?`P1$r${_t.scrollTop+1};${_t.scrollBottom+1}r`:nt==="m"?"P1$r0m":nt===" q"?`P1$r${{block:2,underline:4,bar:6}[vt.cursorStyle]-(vt.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(nt,ht){this._dirtyRowTracker.markRangeDirty(nt,ht)}}De.InputHandler=pt;let Et=class{constructor(wt){this._bufferService=wt,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(wt){wt<this.start?this.start=wt:wt>this.end&&(this.end=wt)}markRangeDirty(wt,nt){wt>nt&&(ft=wt,wt=nt,nt=ft),wt<this.start&&(this.start=wt),nt>this.end&&(this.end=nt)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function yt(wt){return 0<=wt&&wt<256}Et=Ke([Je(0,tt.IBufferService)],Et)},844:(gt,De)=>{function Ge(Ke){for(const Je of Ke)Je.dispose();Ke.length=0}Object.defineProperty(De,"__esModule",{value:!0}),De.getDisposeArrayDisposable=De.disposeArray=De.toDisposable=De.MutableDisposable=De.Disposable=void 0,De.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const Ke of this._disposables)Ke.dispose();this._disposables.length=0}register(Ke){return this._disposables.push(Ke),Ke}unregister(Ke){const Je=this._disposables.indexOf(Ke);Je!==-1&&this._disposables.splice(Je,1)}},De.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(Ke){var Je;this._isDisposed||Ke===this._value||((Je=this._value)==null||Je.dispose(),this._value=Ke)}clear(){this.value=void 0}dispose(){var Ke;this._isDisposed=!0,(Ke=this._value)==null||Ke.dispose(),this._value=void 0}},De.toDisposable=function(Ke){return{dispose:Ke}},De.disposeArray=Ge,De.getDisposeArrayDisposable=function(Ke){return{dispose:()=>Ge(Ke)}}},1505:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.FourKeyMap=De.TwoKeyMap=void 0;class Ge{constructor(){this._data={}}set(Je,Fe,Ye){this._data[Je]||(this._data[Je]={}),this._data[Je][Fe]=Ye}get(Je,Fe){return this._data[Je]?this._data[Je][Fe]:void 0}clear(){this._data={}}}De.TwoKeyMap=Ge,De.FourKeyMap=class{constructor(){this._data=new Ge}set(Ke,Je,Fe,Ye,et){this._data.get(Ke,Je)||this._data.set(Ke,Je,new Ge),this._data.get(Ke,Je).set(Fe,Ye,et)}get(Ke,Je,Fe,Ye){var et;return(et=this._data.get(Ke,Je))==null?void 0:et.get(Fe,Ye)}clear(){this._data.clear()}}},6114:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.isChromeOS=De.isLinux=De.isWindows=De.isIphone=De.isIpad=De.isMac=De.getSafariVersion=De.isSafari=De.isLegacyEdge=De.isFirefox=De.isNode=void 0,De.isNode=typeof process<"u"&&"title"in process;const Ge=De.isNode?"node":navigator.userAgent,Ke=De.isNode?"node":navigator.platform;De.isFirefox=Ge.includes("Firefox"),De.isLegacyEdge=Ge.includes("Edge"),De.isSafari=/^((?!chrome|android).)*safari/i.test(Ge),De.getSafariVersion=function(){if(!De.isSafari)return 0;const Je=Ge.match(/Version\/(\d+)/);return Je===null||Je.length<2?0:parseInt(Je[1])},De.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Ke),De.isIpad=Ke==="iPad",De.isIphone=Ke==="iPhone",De.isWindows=["Windows","Win16","Win32","WinCE"].includes(Ke),De.isLinux=Ke.indexOf("Linux")>=0,De.isChromeOS=/\bCrOS\b/.test(Ge)},6106:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.SortedList=void 0;let Ge=0;De.SortedList=class{constructor(Ke){this._getKey=Ke,this._array=[]}clear(){this._array.length=0}insert(Ke){this._array.length!==0?(Ge=this._search(this._getKey(Ke)),this._array.splice(Ge,0,Ke)):this._array.push(Ke)}delete(Ke){if(this._array.length===0)return!1;const Je=this._getKey(Ke);if(Je===void 0||(Ge=this._search(Je),Ge===-1)||this._getKey(this._array[Ge])!==Je)return!1;do if(this._array[Ge]===Ke)return this._array.splice(Ge,1),!0;while(++Ge<this._array.length&&this._getKey(this._array[Ge])===Je);return!1}*getKeyIterator(Ke){if(this._array.length!==0&&(Ge=this._search(Ke),!(Ge<0||Ge>=this._array.length)&&this._getKey(this._array[Ge])===Ke))do yield this._array[Ge];while(++Ge<this._array.length&&this._getKey(this._array[Ge])===Ke)}forEachByKey(Ke,Je){if(this._array.length!==0&&(Ge=this._search(Ke),!(Ge<0||Ge>=this._array.length)&&this._getKey(this._array[Ge])===Ke))do Je(this._array[Ge]);while(++Ge<this._array.length&&this._getKey(this._array[Ge])===Ke)}values(){return[...this._array].values()}_search(Ke){let Je=0,Fe=this._array.length-1;for(;Fe>=Je;){let Ye=Je+Fe>>1;const et=this._getKey(this._array[Ye]);if(et>Ke)Fe=Ye-1;else{if(!(et<Ke)){for(;Ye>0&&this._getKey(this._array[Ye-1])===Ke;)Ye--;return Ye}Je=Ye+1}}return Je}}},7226:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.DebouncedIdleTask=De.IdleTaskQueue=De.PriorityTaskQueue=void 0;const Ke=Ge(6114);class Je{constructor(){this._tasks=[],this._i=0}enqueue(et){this._tasks.push(et),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(et){this._idleCallback=void 0;let it=0,We=0,p=et.timeRemaining(),He=0;for(;this._i<this._tasks.length;){if(it=Date.now(),this._tasks[this._i]()||this._i++,it=Math.max(1,Date.now()-it),We=Math.max(it,We),He=et.timeRemaining(),1.5*We>He)return p-it<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(p-it))}ms`),void this._start();p=He}this.clear()}}class Fe extends Je{_requestCallback(et){return setTimeout(()=>et(this._createDeadline(16)))}_cancelCallback(et){clearTimeout(et)}_createDeadline(et){const it=Date.now()+et;return{timeRemaining:()=>Math.max(0,it-Date.now())}}}De.PriorityTaskQueue=Fe,De.IdleTaskQueue=!Ke.isNode&&"requestIdleCallback"in window?class extends Je{_requestCallback(Ye){return requestIdleCallback(Ye)}_cancelCallback(Ye){cancelIdleCallback(Ye)}}:Fe,De.DebouncedIdleTask=class{constructor(){this._queue=new De.IdleTaskQueue}set(Ye){this._queue.clear(),this._queue.enqueue(Ye)}flush(){this._queue.flush()}}},9282:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.updateWindowsModeWrappedState=void 0;const Ke=Ge(643);De.updateWindowsModeWrappedState=function(Je){const Fe=Je.buffer.lines.get(Je.buffer.ybase+Je.buffer.y-1),Ye=Fe==null?void 0:Fe.get(Je.cols-1),et=Je.buffer.lines.get(Je.buffer.ybase+Je.buffer.y);et&&Ye&&(et.isWrapped=Ye[Ke.CHAR_DATA_CODE_INDEX]!==Ke.NULL_CELL_CODE&&Ye[Ke.CHAR_DATA_CODE_INDEX]!==Ke.WHITESPACE_CELL_CODE)}},3734:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.ExtendedAttrs=De.AttributeData=void 0;class Ge{constructor(){this.fg=0,this.bg=0,this.extended=new Ke}static toColorRGB(Fe){return[Fe>>>16&255,Fe>>>8&255,255&Fe]}static fromColorRGB(Fe){return(255&Fe[0])<<16|(255&Fe[1])<<8|255&Fe[2]}clone(){const Fe=new Ge;return Fe.fg=this.fg,Fe.bg=this.bg,Fe.extended=this.extended.clone(),Fe}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}De.AttributeData=Ge;class Ke{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(Fe){this._ext=Fe}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(Fe){this._ext&=-469762049,this._ext|=Fe<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(Fe){this._ext&=-67108864,this._ext|=67108863&Fe}get urlId(){return this._urlId}set urlId(Fe){this._urlId=Fe}get underlineVariantOffset(){const Fe=(3758096384&this._ext)>>29;return Fe<0?4294967288^Fe:Fe}set underlineVariantOffset(Fe){this._ext&=536870911,this._ext|=Fe<<29&3758096384}constructor(Fe=0,Ye=0){this._ext=0,this._urlId=0,this._ext=Fe,this._urlId=Ye}clone(){return new Ke(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}De.ExtendedAttrs=Ke},9092:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.Buffer=De.MAX_BUFFER_SIZE=void 0;const Ke=Ge(6349),Je=Ge(7226),Fe=Ge(3734),Ye=Ge(8437),et=Ge(4634),it=Ge(511),We=Ge(643),p=Ge(4863),He=Ge(7116);De.MAX_BUFFER_SIZE=4294967295,De.Buffer=class{constructor(Be,$e,Xe){this._hasScrollback=Be,this._optionsService=$e,this._bufferService=Xe,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Ye.DEFAULT_ATTR_DATA.clone(),this.savedCharset=He.DEFAULT_CHARSET,this.markers=[],this._nullCell=it.CellData.fromCharData([0,We.NULL_CELL_CHAR,We.NULL_CELL_WIDTH,We.NULL_CELL_CODE]),this._whitespaceCell=it.CellData.fromCharData([0,We.WHITESPACE_CELL_CHAR,We.WHITESPACE_CELL_WIDTH,We.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new Je.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new Ke.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(Be){return Be?(this._nullCell.fg=Be.fg,this._nullCell.bg=Be.bg,this._nullCell.extended=Be.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new Fe.ExtendedAttrs),this._nullCell}getWhitespaceCell(Be){return Be?(this._whitespaceCell.fg=Be.fg,this._whitespaceCell.bg=Be.bg,this._whitespaceCell.extended=Be.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new Fe.ExtendedAttrs),this._whitespaceCell}getBlankLine(Be,$e){return new Ye.BufferLine(this._bufferService.cols,this.getNullCell(Be),$e)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const Be=this.ybase+this.y-this.ydisp;return Be>=0&&Be<this._rows}_getCorrectBufferLength(Be){if(!this._hasScrollback)return Be;const $e=Be+this._optionsService.rawOptions.scrollback;return $e>De.MAX_BUFFER_SIZE?De.MAX_BUFFER_SIZE:$e}fillViewportRows(Be){if(this.lines.length===0){Be===void 0&&(Be=Ye.DEFAULT_ATTR_DATA);let $e=this._rows;for(;$e--;)this.lines.push(this.getBlankLine(Be))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new Ke.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(Be,$e){const Xe=this.getNullCell(Ye.DEFAULT_ATTR_DATA);let tt=0;const Qe=this._getCorrectBufferLength($e);if(Qe>this.lines.maxLength&&(this.lines.maxLength=Qe),this.lines.length>0){if(this._cols<Be)for(let Ze=0;Ze<this.lines.length;Ze++)tt+=+this.lines.get(Ze).resize(Be,Xe);let st=0;if(this._rows<$e)for(let Ze=this._rows;Ze<$e;Ze++)this.lines.length<$e+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Ye.BufferLine(Be,Xe)):this.ybase>0&&this.lines.length<=this.ybase+this.y+st+1?(this.ybase--,st++,this.ydisp>0&&this.ydisp--):this.lines.push(new Ye.BufferLine(Be,Xe)));else for(let Ze=this._rows;Ze>$e;Ze--)this.lines.length>$e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(Qe<this.lines.maxLength){const Ze=this.lines.length-Qe;Ze>0&&(this.lines.trimStart(Ze),this.ybase=Math.max(this.ybase-Ze,0),this.ydisp=Math.max(this.ydisp-Ze,0),this.savedY=Math.max(this.savedY-Ze,0)),this.lines.maxLength=Qe}this.x=Math.min(this.x,Be-1),this.y=Math.min(this.y,$e-1),st&&(this.y+=st),this.savedX=Math.min(this.savedX,Be-1),this.scrollTop=0}if(this.scrollBottom=$e-1,this._isReflowEnabled&&(this._reflow(Be,$e),this._cols>Be))for(let st=0;st<this.lines.length;st++)tt+=+this.lines.get(st).resize(Be,Xe);this._cols=Be,this._rows=$e,this._memoryCleanupQueue.clear(),tt>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let Be=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,Be=!1);let $e=0;for(;this._memoryCleanupPosition<this.lines.length;)if($e+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),$e>100)return!0;return Be}get _isReflowEnabled(){const Be=this._optionsService.rawOptions.windowsPty;return Be&&Be.buildNumber?this._hasScrollback&&Be.backend==="conpty"&&Be.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(Be,$e){this._cols!==Be&&(Be>this._cols?this._reflowLarger(Be,$e):this._reflowSmaller(Be,$e))}_reflowLarger(Be,$e){const Xe=(0,et.reflowLargerGetLinesToRemove)(this.lines,this._cols,Be,this.ybase+this.y,this.getNullCell(Ye.DEFAULT_ATTR_DATA));if(Xe.length>0){const tt=(0,et.reflowLargerCreateNewLayout)(this.lines,Xe);(0,et.reflowLargerApplyNewLayout)(this.lines,tt.layout),this._reflowLargerAdjustViewport(Be,$e,tt.countRemoved)}}_reflowLargerAdjustViewport(Be,$e,Xe){const tt=this.getNullCell(Ye.DEFAULT_ATTR_DATA);let Qe=Xe;for(;Qe-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<$e&&this.lines.push(new Ye.BufferLine(Be,tt))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-Xe,0)}_reflowSmaller(Be,$e){const Xe=this.getNullCell(Ye.DEFAULT_ATTR_DATA),tt=[];let Qe=0;for(let st=this.lines.length-1;st>=0;st--){let Ze=this.lines.get(st);if(!Ze||!Ze.isWrapped&&Ze.getTrimmedLength()<=Be)continue;const rt=[Ze];for(;Ze.isWrapped&&st>0;)Ze=this.lines.get(--st),rt.unshift(Ze);const ot=this.ybase+this.y;if(ot>=st&&ot<st+rt.length)continue;const dt=rt[rt.length-1].getTrimmedLength(),ct=(0,et.reflowSmallerGetNewLineLengths)(rt,this._cols,Be),lt=ct.length-rt.length;let ft;ft=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+lt):Math.max(0,this.lines.length-this.lines.maxLength+lt);const pt=[];for(let _t=0;_t<lt;_t++){const vt=this.getBlankLine(Ye.DEFAULT_ATTR_DATA,!0);pt.push(vt)}pt.length>0&&(tt.push({start:st+rt.length+Qe,newLines:pt}),Qe+=pt.length),rt.push(...pt);let Et=ct.length-1,yt=ct[Et];yt===0&&(Et--,yt=ct[Et]);let wt=rt.length-lt-1,nt=dt;for(;wt>=0;){const _t=Math.min(nt,yt);if(rt[Et]===void 0)break;if(rt[Et].copyCellsFrom(rt[wt],nt-_t,yt-_t,_t,!0),yt-=_t,yt===0&&(Et--,yt=ct[Et]),nt-=_t,nt===0){wt--;const vt=Math.max(wt,0);nt=(0,et.getWrappedLineTrimmedLength)(rt,vt,this._cols)}}for(let _t=0;_t<rt.length;_t++)ct[_t]<Be&&rt[_t].setCell(ct[_t],Xe);let ht=lt-ft;for(;ht-- >0;)this.ybase===0?this.y<$e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+Qe)-$e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+lt,this.ybase+$e-1)}if(tt.length>0){const st=[],Ze=[];for(let Et=0;Et<this.lines.length;Et++)Ze.push(this.lines.get(Et));const rt=this.lines.length;let ot=rt-1,dt=0,ct=tt[dt];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+Qe);let lt=0;for(let Et=Math.min(this.lines.maxLength-1,rt+Qe-1);Et>=0;Et--)if(ct&&ct.start>ot+lt){for(let yt=ct.newLines.length-1;yt>=0;yt--)this.lines.set(Et--,ct.newLines[yt]);Et++,st.push({index:ot+1,amount:ct.newLines.length}),lt+=ct.newLines.length,ct=tt[++dt]}else this.lines.set(Et,Ze[ot--]);let ft=0;for(let Et=st.length-1;Et>=0;Et--)st[Et].index+=ft,this.lines.onInsertEmitter.fire(st[Et]),ft+=st[Et].amount;const pt=Math.max(0,rt+Qe-this.lines.maxLength);pt>0&&this.lines.onTrimEmitter.fire(pt)}}translateBufferLineToString(Be,$e,Xe=0,tt){const Qe=this.lines.get(Be);return Qe?Qe.translateToString($e,Xe,tt):""}getWrappedRangeForLine(Be){let $e=Be,Xe=Be;for(;$e>0&&this.lines.get($e).isWrapped;)$e--;for(;Xe+1<this.lines.length&&this.lines.get(Xe+1).isWrapped;)Xe++;return{first:$e,last:Xe}}setupTabStops(Be){for(Be!=null?this.tabs[Be]||(Be=this.prevStop(Be)):(this.tabs={},Be=0);Be<this._cols;Be+=this._optionsService.rawOptions.tabStopWidth)this.tabs[Be]=!0}prevStop(Be){for(Be==null&&(Be=this.x);!this.tabs[--Be]&&Be>0;);return Be>=this._cols?this._cols-1:Be<0?0:Be}nextStop(Be){for(Be==null&&(Be=this.x);!this.tabs[++Be]&&Be<this._cols;);return Be>=this._cols?this._cols-1:Be<0?0:Be}clearMarkers(Be){this._isClearing=!0;for(let $e=0;$e<this.markers.length;$e++)this.markers[$e].line===Be&&(this.markers[$e].dispose(),this.markers.splice($e--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let Be=0;Be<this.markers.length;Be++)this.markers[Be].dispose(),this.markers.splice(Be--,1);this._isClearing=!1}addMarker(Be){const $e=new p.Marker(Be);return this.markers.push($e),$e.register(this.lines.onTrim(Xe=>{$e.line-=Xe,$e.line<0&&$e.dispose()})),$e.register(this.lines.onInsert(Xe=>{$e.line>=Xe.index&&($e.line+=Xe.amount)})),$e.register(this.lines.onDelete(Xe=>{$e.line>=Xe.index&&$e.line<Xe.index+Xe.amount&&$e.dispose(),$e.line>Xe.index&&($e.line-=Xe.amount)})),$e.register($e.onDispose(()=>this._removeMarker($e))),$e}_removeMarker(Be){this._isClearing||this.markers.splice(this.markers.indexOf(Be),1)}}},8437:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.BufferLine=De.DEFAULT_ATTR_DATA=void 0;const Ke=Ge(3734),Je=Ge(511),Fe=Ge(643),Ye=Ge(482);De.DEFAULT_ATTR_DATA=Object.freeze(new Ke.AttributeData);let et=0;class it{constructor(p,He,Be=!1){this.isWrapped=Be,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*p);const $e=He||Je.CellData.fromCharData([0,Fe.NULL_CELL_CHAR,Fe.NULL_CELL_WIDTH,Fe.NULL_CELL_CODE]);for(let Xe=0;Xe<p;++Xe)this.setCell(Xe,$e);this.length=p}get(p){const He=this._data[3*p+0],Be=2097151&He;return[this._data[3*p+1],2097152&He?this._combined[p]:Be?(0,Ye.stringFromCodePoint)(Be):"",He>>22,2097152&He?this._combined[p].charCodeAt(this._combined[p].length-1):Be]}set(p,He){this._data[3*p+1]=He[Fe.CHAR_DATA_ATTR_INDEX],He[Fe.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[p]=He[1],this._data[3*p+0]=2097152|p|He[Fe.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*p+0]=He[Fe.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|He[Fe.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(p){return this._data[3*p+0]>>22}hasWidth(p){return 12582912&this._data[3*p+0]}getFg(p){return this._data[3*p+1]}getBg(p){return this._data[3*p+2]}hasContent(p){return 4194303&this._data[3*p+0]}getCodePoint(p){const He=this._data[3*p+0];return 2097152&He?this._combined[p].charCodeAt(this._combined[p].length-1):2097151&He}isCombined(p){return 2097152&this._data[3*p+0]}getString(p){const He=this._data[3*p+0];return 2097152&He?this._combined[p]:2097151&He?(0,Ye.stringFromCodePoint)(2097151&He):""}isProtected(p){return 536870912&this._data[3*p+2]}loadCell(p,He){return et=3*p,He.content=this._data[et+0],He.fg=this._data[et+1],He.bg=this._data[et+2],2097152&He.content&&(He.combinedData=this._combined[p]),268435456&He.bg&&(He.extended=this._extendedAttrs[p]),He}setCell(p,He){2097152&He.content&&(this._combined[p]=He.combinedData),268435456&He.bg&&(this._extendedAttrs[p]=He.extended),this._data[3*p+0]=He.content,this._data[3*p+1]=He.fg,this._data[3*p+2]=He.bg}setCellFromCodepoint(p,He,Be,$e){268435456&$e.bg&&(this._extendedAttrs[p]=$e.extended),this._data[3*p+0]=He|Be<<22,this._data[3*p+1]=$e.fg,this._data[3*p+2]=$e.bg}addCodepointToCell(p,He,Be){let $e=this._data[3*p+0];2097152&$e?this._combined[p]+=(0,Ye.stringFromCodePoint)(He):2097151&$e?(this._combined[p]=(0,Ye.stringFromCodePoint)(2097151&$e)+(0,Ye.stringFromCodePoint)(He),$e&=-2097152,$e|=2097152):$e=He|4194304,Be&&($e&=-12582913,$e|=Be<<22),this._data[3*p+0]=$e}insertCells(p,He,Be){if((p%=this.length)&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p-1,0,1,Be),He<this.length-p){const $e=new Je.CellData;for(let Xe=this.length-p-He-1;Xe>=0;--Xe)this.setCell(p+He+Xe,this.loadCell(p+Xe,$e));for(let Xe=0;Xe<He;++Xe)this.setCell(p+Xe,Be)}else for(let $e=p;$e<this.length;++$e)this.setCell($e,Be);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,Be)}deleteCells(p,He,Be){if(p%=this.length,He<this.length-p){const $e=new Je.CellData;for(let Xe=0;Xe<this.length-p-He;++Xe)this.setCell(p+Xe,this.loadCell(p+He+Xe,$e));for(let Xe=this.length-He;Xe<this.length;++Xe)this.setCell(Xe,Be)}else for(let $e=p;$e<this.length;++$e)this.setCell($e,Be);p&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p-1,0,1,Be),this.getWidth(p)!==0||this.hasContent(p)||this.setCellFromCodepoint(p,0,1,Be)}replaceCells(p,He,Be,$e=!1){if($e)for(p&&this.getWidth(p-1)===2&&!this.isProtected(p-1)&&this.setCellFromCodepoint(p-1,0,1,Be),He<this.length&&this.getWidth(He-1)===2&&!this.isProtected(He)&&this.setCellFromCodepoint(He,0,1,Be);p<He&&p<this.length;)this.isProtected(p)||this.setCell(p,Be),p++;else for(p&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p-1,0,1,Be),He<this.length&&this.getWidth(He-1)===2&&this.setCellFromCodepoint(He,0,1,Be);p<He&&p<this.length;)this.setCell(p++,Be)}resize(p,He){if(p===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const Be=3*p;if(p>this.length){if(this._data.buffer.byteLength>=4*Be)this._data=new Uint32Array(this._data.buffer,0,Be);else{const $e=new Uint32Array(Be);$e.set(this._data),this._data=$e}for(let $e=this.length;$e<p;++$e)this.setCell($e,He)}else{this._data=this._data.subarray(0,Be);const $e=Object.keys(this._combined);for(let tt=0;tt<$e.length;tt++){const Qe=parseInt($e[tt],10);Qe>=p&&delete this._combined[Qe]}const Xe=Object.keys(this._extendedAttrs);for(let tt=0;tt<Xe.length;tt++){const Qe=parseInt(Xe[tt],10);Qe>=p&&delete this._extendedAttrs[Qe]}}return this.length=p,4*Be*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const p=new Uint32Array(this._data.length);return p.set(this._data),this._data=p,1}return 0}fill(p,He=!1){if(He)for(let Be=0;Be<this.length;++Be)this.isProtected(Be)||this.setCell(Be,p);else{this._combined={},this._extendedAttrs={};for(let Be=0;Be<this.length;++Be)this.setCell(Be,p)}}copyFrom(p){this.length!==p.length?this._data=new Uint32Array(p._data):this._data.set(p._data),this.length=p.length,this._combined={};for(const He in p._combined)this._combined[He]=p._combined[He];this._extendedAttrs={};for(const He in p._extendedAttrs)this._extendedAttrs[He]=p._extendedAttrs[He];this.isWrapped=p.isWrapped}clone(){const p=new it(0);p._data=new Uint32Array(this._data),p.length=this.length;for(const He in this._combined)p._combined[He]=this._combined[He];for(const He in this._extendedAttrs)p._extendedAttrs[He]=this._extendedAttrs[He];return p.isWrapped=this.isWrapped,p}getTrimmedLength(){for(let p=this.length-1;p>=0;--p)if(4194303&this._data[3*p+0])return p+(this._data[3*p+0]>>22);return 0}getNoBgTrimmedLength(){for(let p=this.length-1;p>=0;--p)if(4194303&this._data[3*p+0]||50331648&this._data[3*p+2])return p+(this._data[3*p+0]>>22);return 0}copyCellsFrom(p,He,Be,$e,Xe){const tt=p._data;if(Xe)for(let st=$e-1;st>=0;st--){for(let Ze=0;Ze<3;Ze++)this._data[3*(Be+st)+Ze]=tt[3*(He+st)+Ze];268435456&tt[3*(He+st)+2]&&(this._extendedAttrs[Be+st]=p._extendedAttrs[He+st])}else for(let st=0;st<$e;st++){for(let Ze=0;Ze<3;Ze++)this._data[3*(Be+st)+Ze]=tt[3*(He+st)+Ze];268435456&tt[3*(He+st)+2]&&(this._extendedAttrs[Be+st]=p._extendedAttrs[He+st])}const Qe=Object.keys(p._combined);for(let st=0;st<Qe.length;st++){const Ze=parseInt(Qe[st],10);Ze>=He&&(this._combined[Ze-He+Be]=p._combined[Ze])}}translateToString(p,He,Be,$e){He=He??0,Be=Be??this.length,p&&(Be=Math.min(Be,this.getTrimmedLength())),$e&&($e.length=0);let Xe="";for(;He<Be;){const tt=this._data[3*He+0],Qe=2097151&tt,st=2097152&tt?this._combined[He]:Qe?(0,Ye.stringFromCodePoint)(Qe):Fe.WHITESPACE_CELL_CHAR;if(Xe+=st,$e)for(let Ze=0;Ze<st.length;++Ze)$e.push(He);He+=tt>>22||1}return $e&&$e.push(He),Xe}}De.BufferLine=it},4841:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.getRangeLength=void 0,De.getRangeLength=function(Ge,Ke){if(Ge.start.y>Ge.end.y)throw new Error(`Buffer range end (${Ge.end.x}, ${Ge.end.y}) cannot be before start (${Ge.start.x}, ${Ge.start.y})`);return Ke*(Ge.end.y-Ge.start.y)+(Ge.end.x-Ge.start.x+1)}},4634:(gt,De)=>{function Ge(Ke,Je,Fe){if(Je===Ke.length-1)return Ke[Je].getTrimmedLength();const Ye=!Ke[Je].hasContent(Fe-1)&&Ke[Je].getWidth(Fe-1)===1,et=Ke[Je+1].getWidth(0)===2;return Ye&&et?Fe-1:Fe}Object.defineProperty(De,"__esModule",{value:!0}),De.getWrappedLineTrimmedLength=De.reflowSmallerGetNewLineLengths=De.reflowLargerApplyNewLayout=De.reflowLargerCreateNewLayout=De.reflowLargerGetLinesToRemove=void 0,De.reflowLargerGetLinesToRemove=function(Ke,Je,Fe,Ye,et){const it=[];for(let We=0;We<Ke.length-1;We++){let p=We,He=Ke.get(++p);if(!He.isWrapped)continue;const Be=[Ke.get(We)];for(;p<Ke.length&&He.isWrapped;)Be.push(He),He=Ke.get(++p);if(Ye>=We&&Ye<p){We+=Be.length-1;continue}let $e=0,Xe=Ge(Be,$e,Je),tt=1,Qe=0;for(;tt<Be.length;){const Ze=Ge(Be,tt,Je),rt=Ze-Qe,ot=Fe-Xe,dt=Math.min(rt,ot);Be[$e].copyCellsFrom(Be[tt],Qe,Xe,dt,!1),Xe+=dt,Xe===Fe&&($e++,Xe=0),Qe+=dt,Qe===Ze&&(tt++,Qe=0),Xe===0&&$e!==0&&Be[$e-1].getWidth(Fe-1)===2&&(Be[$e].copyCellsFrom(Be[$e-1],Fe-1,Xe++,1,!1),Be[$e-1].setCell(Fe-1,et))}Be[$e].replaceCells(Xe,Fe,et);let st=0;for(let Ze=Be.length-1;Ze>0&&(Ze>$e||Be[Ze].getTrimmedLength()===0);Ze--)st++;st>0&&(it.push(We+Be.length-st),it.push(st)),We+=Be.length-1}return it},De.reflowLargerCreateNewLayout=function(Ke,Je){const Fe=[];let Ye=0,et=Je[Ye],it=0;for(let We=0;We<Ke.length;We++)if(et===We){const p=Je[++Ye];Ke.onDeleteEmitter.fire({index:We-it,amount:p}),We+=p-1,it+=p,et=Je[++Ye]}else Fe.push(We);return{layout:Fe,countRemoved:it}},De.reflowLargerApplyNewLayout=function(Ke,Je){const Fe=[];for(let Ye=0;Ye<Je.length;Ye++)Fe.push(Ke.get(Je[Ye]));for(let Ye=0;Ye<Fe.length;Ye++)Ke.set(Ye,Fe[Ye]);Ke.length=Je.length},De.reflowSmallerGetNewLineLengths=function(Ke,Je,Fe){const Ye=[],et=Ke.map((He,Be)=>Ge(Ke,Be,Je)).reduce((He,Be)=>He+Be);let it=0,We=0,p=0;for(;p<et;){if(et-p<Fe){Ye.push(et-p);break}it+=Fe;const He=Ge(Ke,We,Je);it>He&&(it-=He,We++);const Be=Ke[We].getWidth(it-1)===2;Be&&it--;const $e=Be?Fe-1:Fe;Ye.push($e),p+=$e}return Ye},De.getWrappedLineTrimmedLength=Ge},5295:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.BufferSet=void 0;const Ke=Ge(8460),Je=Ge(844),Fe=Ge(9092);class Ye extends Je.Disposable{constructor(it,We){super(),this._optionsService=it,this._bufferService=We,this._onBufferActivate=this.register(new Ke.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new Fe.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new Fe.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(it){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(it),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(it,We){this._normal.resize(it,We),this._alt.resize(it,We),this.setupTabStops(it)}setupTabStops(it){this._normal.setupTabStops(it),this._alt.setupTabStops(it)}}De.BufferSet=Ye},511:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CellData=void 0;const Ke=Ge(482),Je=Ge(643),Fe=Ge(3734);class Ye extends Fe.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Fe.ExtendedAttrs,this.combinedData=""}static fromCharData(it){const We=new Ye;return We.setFromCharData(it),We}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,Ke.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(it){this.fg=it[Je.CHAR_DATA_ATTR_INDEX],this.bg=0;let We=!1;if(it[Je.CHAR_DATA_CHAR_INDEX].length>2)We=!0;else if(it[Je.CHAR_DATA_CHAR_INDEX].length===2){const p=it[Je.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=p&&p<=56319){const He=it[Je.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=He&&He<=57343?this.content=1024*(p-55296)+He-56320+65536|it[Je.CHAR_DATA_WIDTH_INDEX]<<22:We=!0}else We=!0}else this.content=it[Je.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|it[Je.CHAR_DATA_WIDTH_INDEX]<<22;We&&(this.combinedData=it[Je.CHAR_DATA_CHAR_INDEX],this.content=2097152|it[Je.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}De.CellData=Ye},643:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.WHITESPACE_CELL_CODE=De.WHITESPACE_CELL_WIDTH=De.WHITESPACE_CELL_CHAR=De.NULL_CELL_CODE=De.NULL_CELL_WIDTH=De.NULL_CELL_CHAR=De.CHAR_DATA_CODE_INDEX=De.CHAR_DATA_WIDTH_INDEX=De.CHAR_DATA_CHAR_INDEX=De.CHAR_DATA_ATTR_INDEX=De.DEFAULT_EXT=De.DEFAULT_ATTR=De.DEFAULT_COLOR=void 0,De.DEFAULT_COLOR=0,De.DEFAULT_ATTR=256|De.DEFAULT_COLOR<<9,De.DEFAULT_EXT=0,De.CHAR_DATA_ATTR_INDEX=0,De.CHAR_DATA_CHAR_INDEX=1,De.CHAR_DATA_WIDTH_INDEX=2,De.CHAR_DATA_CODE_INDEX=3,De.NULL_CELL_CHAR="",De.NULL_CELL_WIDTH=1,De.NULL_CELL_CODE=0,De.WHITESPACE_CELL_CHAR=" ",De.WHITESPACE_CELL_WIDTH=1,De.WHITESPACE_CELL_CODE=32},4863:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.Marker=void 0;const Ke=Ge(8460),Je=Ge(844);class Fe{get id(){return this._id}constructor(et){this.line=et,this.isDisposed=!1,this._disposables=[],this._id=Fe._nextId++,this._onDispose=this.register(new Ke.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,Je.disposeArray)(this._disposables),this._disposables.length=0)}register(et){return this._disposables.push(et),et}}De.Marker=Fe,Fe._nextId=1},7116:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.DEFAULT_CHARSET=De.CHARSETS=void 0,De.CHARSETS={},De.DEFAULT_CHARSET=De.CHARSETS.B,De.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},De.CHARSETS.A={"#":"Â£"},De.CHARSETS.B=void 0,De.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},De.CHARSETS.C=De.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},De.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},De.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},De.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},De.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},De.CHARSETS.E=De.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},De.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},De.CHARSETS.H=De.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},De.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(gt,De)=>{var Ge,Ke,Je;Object.defineProperty(De,"__esModule",{value:!0}),De.C1_ESCAPED=De.C1=De.C0=void 0,function(Fe){Fe.NUL="\0",Fe.SOH="",Fe.STX="",Fe.ETX="",Fe.EOT="",Fe.ENQ="",Fe.ACK="",Fe.BEL="\x07",Fe.BS="\b",Fe.HT="	",Fe.LF=`
`,Fe.VT="\v",Fe.FF="\f",Fe.CR="\r",Fe.SO="",Fe.SI="",Fe.DLE="",Fe.DC1="",Fe.DC2="",Fe.DC3="",Fe.DC4="",Fe.NAK="",Fe.SYN="",Fe.ETB="",Fe.CAN="",Fe.EM="",Fe.SUB="",Fe.ESC="\x1B",Fe.FS="",Fe.GS="",Fe.RS="",Fe.US="",Fe.SP=" ",Fe.DEL=""}(Ge||(De.C0=Ge={})),function(Fe){Fe.PAD="Â",Fe.HOP="Â",Fe.BPH="Â",Fe.NBH="Â",Fe.IND="Â",Fe.NEL="Â",Fe.SSA="Â",Fe.ESA="Â",Fe.HTS="Â",Fe.HTJ="Â",Fe.VTS="Â",Fe.PLD="Â",Fe.PLU="Â",Fe.RI="Â",Fe.SS2="Â",Fe.SS3="Â",Fe.DCS="Â",Fe.PU1="Â",Fe.PU2="Â",Fe.STS="Â",Fe.CCH="Â",Fe.MW="Â",Fe.SPA="Â",Fe.EPA="Â",Fe.SOS="Â",Fe.SGCI="Â",Fe.SCI="Â",Fe.CSI="Â",Fe.ST="Â",Fe.OSC="Â",Fe.PM="Â",Fe.APC="Â"}(Ke||(De.C1=Ke={})),function(Fe){Fe.ST=`${Ge.ESC}\\`}(Je||(De.C1_ESCAPED=Je={}))},7399:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.evaluateKeyboardEvent=void 0;const Ke=Ge(2584),Je={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};De.evaluateKeyboardEvent=function(Fe,Ye,et,it){const We={type:0,cancel:!1,key:void 0},p=(Fe.shiftKey?1:0)|(Fe.altKey?2:0)|(Fe.ctrlKey?4:0)|(Fe.metaKey?8:0);switch(Fe.keyCode){case 0:Fe.key==="UIKeyInputUpArrow"?We.key=Ye?Ke.C0.ESC+"OA":Ke.C0.ESC+"[A":Fe.key==="UIKeyInputLeftArrow"?We.key=Ye?Ke.C0.ESC+"OD":Ke.C0.ESC+"[D":Fe.key==="UIKeyInputRightArrow"?We.key=Ye?Ke.C0.ESC+"OC":Ke.C0.ESC+"[C":Fe.key==="UIKeyInputDownArrow"&&(We.key=Ye?Ke.C0.ESC+"OB":Ke.C0.ESC+"[B");break;case 8:We.key=Fe.ctrlKey?"\b":Ke.C0.DEL,Fe.altKey&&(We.key=Ke.C0.ESC+We.key);break;case 9:if(Fe.shiftKey){We.key=Ke.C0.ESC+"[Z";break}We.key=Ke.C0.HT,We.cancel=!0;break;case 13:We.key=Fe.altKey?Ke.C0.ESC+Ke.C0.CR:Ke.C0.CR,We.cancel=!0;break;case 27:We.key=Ke.C0.ESC,Fe.altKey&&(We.key=Ke.C0.ESC+Ke.C0.ESC),We.cancel=!0;break;case 37:if(Fe.metaKey)break;p?(We.key=Ke.C0.ESC+"[1;"+(p+1)+"D",We.key===Ke.C0.ESC+"[1;3D"&&(We.key=Ke.C0.ESC+(et?"b":"[1;5D"))):We.key=Ye?Ke.C0.ESC+"OD":Ke.C0.ESC+"[D";break;case 39:if(Fe.metaKey)break;p?(We.key=Ke.C0.ESC+"[1;"+(p+1)+"C",We.key===Ke.C0.ESC+"[1;3C"&&(We.key=Ke.C0.ESC+(et?"f":"[1;5C"))):We.key=Ye?Ke.C0.ESC+"OC":Ke.C0.ESC+"[C";break;case 38:if(Fe.metaKey)break;p?(We.key=Ke.C0.ESC+"[1;"+(p+1)+"A",et||We.key!==Ke.C0.ESC+"[1;3A"||(We.key=Ke.C0.ESC+"[1;5A")):We.key=Ye?Ke.C0.ESC+"OA":Ke.C0.ESC+"[A";break;case 40:if(Fe.metaKey)break;p?(We.key=Ke.C0.ESC+"[1;"+(p+1)+"B",et||We.key!==Ke.C0.ESC+"[1;3B"||(We.key=Ke.C0.ESC+"[1;5B")):We.key=Ye?Ke.C0.ESC+"OB":Ke.C0.ESC+"[B";break;case 45:Fe.shiftKey||Fe.ctrlKey||(We.key=Ke.C0.ESC+"[2~");break;case 46:We.key=p?Ke.C0.ESC+"[3;"+(p+1)+"~":Ke.C0.ESC+"[3~";break;case 36:We.key=p?Ke.C0.ESC+"[1;"+(p+1)+"H":Ye?Ke.C0.ESC+"OH":Ke.C0.ESC+"[H";break;case 35:We.key=p?Ke.C0.ESC+"[1;"+(p+1)+"F":Ye?Ke.C0.ESC+"OF":Ke.C0.ESC+"[F";break;case 33:Fe.shiftKey?We.type=2:Fe.ctrlKey?We.key=Ke.C0.ESC+"[5;"+(p+1)+"~":We.key=Ke.C0.ESC+"[5~";break;case 34:Fe.shiftKey?We.type=3:Fe.ctrlKey?We.key=Ke.C0.ESC+"[6;"+(p+1)+"~":We.key=Ke.C0.ESC+"[6~";break;case 112:We.key=p?Ke.C0.ESC+"[1;"+(p+1)+"P":Ke.C0.ESC+"OP";break;case 113:We.key=p?Ke.C0.ESC+"[1;"+(p+1)+"Q":Ke.C0.ESC+"OQ";break;case 114:We.key=p?Ke.C0.ESC+"[1;"+(p+1)+"R":Ke.C0.ESC+"OR";break;case 115:We.key=p?Ke.C0.ESC+"[1;"+(p+1)+"S":Ke.C0.ESC+"OS";break;case 116:We.key=p?Ke.C0.ESC+"[15;"+(p+1)+"~":Ke.C0.ESC+"[15~";break;case 117:We.key=p?Ke.C0.ESC+"[17;"+(p+1)+"~":Ke.C0.ESC+"[17~";break;case 118:We.key=p?Ke.C0.ESC+"[18;"+(p+1)+"~":Ke.C0.ESC+"[18~";break;case 119:We.key=p?Ke.C0.ESC+"[19;"+(p+1)+"~":Ke.C0.ESC+"[19~";break;case 120:We.key=p?Ke.C0.ESC+"[20;"+(p+1)+"~":Ke.C0.ESC+"[20~";break;case 121:We.key=p?Ke.C0.ESC+"[21;"+(p+1)+"~":Ke.C0.ESC+"[21~";break;case 122:We.key=p?Ke.C0.ESC+"[23;"+(p+1)+"~":Ke.C0.ESC+"[23~";break;case 123:We.key=p?Ke.C0.ESC+"[24;"+(p+1)+"~":Ke.C0.ESC+"[24~";break;default:if(!Fe.ctrlKey||Fe.shiftKey||Fe.altKey||Fe.metaKey)if(et&&!it||!Fe.altKey||Fe.metaKey)!et||Fe.altKey||Fe.ctrlKey||Fe.shiftKey||!Fe.metaKey?Fe.key&&!Fe.ctrlKey&&!Fe.altKey&&!Fe.metaKey&&Fe.keyCode>=48&&Fe.key.length===1?We.key=Fe.key:Fe.key&&Fe.ctrlKey&&(Fe.key==="_"&&(We.key=Ke.C0.US),Fe.key==="@"&&(We.key=Ke.C0.NUL)):Fe.keyCode===65&&(We.type=1);else{const He=Je[Fe.keyCode],Be=He==null?void 0:He[Fe.shiftKey?1:0];if(Be)We.key=Ke.C0.ESC+Be;else if(Fe.keyCode>=65&&Fe.keyCode<=90){const $e=Fe.ctrlKey?Fe.keyCode-64:Fe.keyCode+32;let Xe=String.fromCharCode($e);Fe.shiftKey&&(Xe=Xe.toUpperCase()),We.key=Ke.C0.ESC+Xe}else if(Fe.keyCode===32)We.key=Ke.C0.ESC+(Fe.ctrlKey?Ke.C0.NUL:" ");else if(Fe.key==="Dead"&&Fe.code.startsWith("Key")){let $e=Fe.code.slice(3,4);Fe.shiftKey||($e=$e.toLowerCase()),We.key=Ke.C0.ESC+$e,We.cancel=!0}}else Fe.keyCode>=65&&Fe.keyCode<=90?We.key=String.fromCharCode(Fe.keyCode-64):Fe.keyCode===32?We.key=Ke.C0.NUL:Fe.keyCode>=51&&Fe.keyCode<=55?We.key=String.fromCharCode(Fe.keyCode-51+27):Fe.keyCode===56?We.key=Ke.C0.DEL:Fe.keyCode===219?We.key=Ke.C0.ESC:Fe.keyCode===220?We.key=Ke.C0.FS:Fe.keyCode===221&&(We.key=Ke.C0.GS)}return We}},482:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.Utf8ToUtf32=De.StringToUtf32=De.utf32ToString=De.stringFromCodePoint=void 0,De.stringFromCodePoint=function(Ge){return Ge>65535?(Ge-=65536,String.fromCharCode(55296+(Ge>>10))+String.fromCharCode(Ge%1024+56320)):String.fromCharCode(Ge)},De.utf32ToString=function(Ge,Ke=0,Je=Ge.length){let Fe="";for(let Ye=Ke;Ye<Je;++Ye){let et=Ge[Ye];et>65535?(et-=65536,Fe+=String.fromCharCode(55296+(et>>10))+String.fromCharCode(et%1024+56320)):Fe+=String.fromCharCode(et)}return Fe},De.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(Ge,Ke){const Je=Ge.length;if(!Je)return 0;let Fe=0,Ye=0;if(this._interim){const et=Ge.charCodeAt(Ye++);56320<=et&&et<=57343?Ke[Fe++]=1024*(this._interim-55296)+et-56320+65536:(Ke[Fe++]=this._interim,Ke[Fe++]=et),this._interim=0}for(let et=Ye;et<Je;++et){const it=Ge.charCodeAt(et);if(55296<=it&&it<=56319){if(++et>=Je)return this._interim=it,Fe;const We=Ge.charCodeAt(et);56320<=We&&We<=57343?Ke[Fe++]=1024*(it-55296)+We-56320+65536:(Ke[Fe++]=it,Ke[Fe++]=We)}else it!==65279&&(Ke[Fe++]=it)}return Fe}},De.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(Ge,Ke){const Je=Ge.length;if(!Je)return 0;let Fe,Ye,et,it,We=0,p=0,He=0;if(this.interim[0]){let Xe=!1,tt=this.interim[0];tt&=(224&tt)==192?31:(240&tt)==224?15:7;let Qe,st=0;for(;(Qe=63&this.interim[++st])&&st<4;)tt<<=6,tt|=Qe;const Ze=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,rt=Ze-st;for(;He<rt;){if(He>=Je)return 0;if(Qe=Ge[He++],(192&Qe)!=128){He--,Xe=!0;break}this.interim[st++]=Qe,tt<<=6,tt|=63&Qe}Xe||(Ze===2?tt<128?He--:Ke[We++]=tt:Ze===3?tt<2048||tt>=55296&&tt<=57343||tt===65279||(Ke[We++]=tt):tt<65536||tt>1114111||(Ke[We++]=tt)),this.interim.fill(0)}const Be=Je-4;let $e=He;for(;$e<Je;){for(;!(!($e<Be)||128&(Fe=Ge[$e])||128&(Ye=Ge[$e+1])||128&(et=Ge[$e+2])||128&(it=Ge[$e+3]));)Ke[We++]=Fe,Ke[We++]=Ye,Ke[We++]=et,Ke[We++]=it,$e+=4;if(Fe=Ge[$e++],Fe<128)Ke[We++]=Fe;else if((224&Fe)==192){if($e>=Je)return this.interim[0]=Fe,We;if(Ye=Ge[$e++],(192&Ye)!=128){$e--;continue}if(p=(31&Fe)<<6|63&Ye,p<128){$e--;continue}Ke[We++]=p}else if((240&Fe)==224){if($e>=Je)return this.interim[0]=Fe,We;if(Ye=Ge[$e++],(192&Ye)!=128){$e--;continue}if($e>=Je)return this.interim[0]=Fe,this.interim[1]=Ye,We;if(et=Ge[$e++],(192&et)!=128){$e--;continue}if(p=(15&Fe)<<12|(63&Ye)<<6|63&et,p<2048||p>=55296&&p<=57343||p===65279)continue;Ke[We++]=p}else if((248&Fe)==240){if($e>=Je)return this.interim[0]=Fe,We;if(Ye=Ge[$e++],(192&Ye)!=128){$e--;continue}if($e>=Je)return this.interim[0]=Fe,this.interim[1]=Ye,We;if(et=Ge[$e++],(192&et)!=128){$e--;continue}if($e>=Je)return this.interim[0]=Fe,this.interim[1]=Ye,this.interim[2]=et,We;if(it=Ge[$e++],(192&it)!=128){$e--;continue}if(p=(7&Fe)<<18|(63&Ye)<<12|(63&et)<<6|63&it,p<65536||p>1114111)continue;Ke[We++]=p}}return We}}},225:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.UnicodeV6=void 0;const Ke=Ge(1480),Je=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],Fe=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let Ye;De.UnicodeV6=class{constructor(){if(this.version="6",!Ye){Ye=new Uint8Array(65536),Ye.fill(1),Ye[0]=0,Ye.fill(0,1,32),Ye.fill(0,127,160),Ye.fill(2,4352,4448),Ye[9001]=2,Ye[9002]=2,Ye.fill(2,11904,42192),Ye[12351]=1,Ye.fill(2,44032,55204),Ye.fill(2,63744,64256),Ye.fill(2,65040,65050),Ye.fill(2,65072,65136),Ye.fill(2,65280,65377),Ye.fill(2,65504,65511);for(let et=0;et<Je.length;++et)Ye.fill(0,Je[et][0],Je[et][1]+1)}}wcwidth(et){return et<32?0:et<127?1:et<65536?Ye[et]:function(it,We){let p,He=0,Be=We.length-1;if(it<We[0][0]||it>We[Be][1])return!1;for(;Be>=He;)if(p=He+Be>>1,it>We[p][1])He=p+1;else{if(!(it<We[p][0]))return!0;Be=p-1}return!1}(et,Fe)?0:et>=131072&&et<=196605||et>=196608&&et<=262141?2:1}charProperties(et,it){let We=this.wcwidth(et),p=We===0&&it!==0;if(p){const He=Ke.UnicodeService.extractWidth(it);He===0?p=!1:He>We&&(We=He)}return Ke.UnicodeService.createPropertyValue(0,We,p)}}},5981:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.WriteBuffer=void 0;const Ke=Ge(8460),Je=Ge(844);class Fe extends Je.Disposable{constructor(et){super(),this._action=et,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new Ke.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(et,it){if(it!==void 0&&this._syncCalls>it)return void(this._syncCalls=0);if(this._pendingData+=et.length,this._writeBuffer.push(et),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let We;for(this._isSyncWriting=!0;We=this._writeBuffer.shift();){this._action(We);const p=this._callbacks.shift();p&&p()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(et,it){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=et.length,this._writeBuffer.push(et),this._callbacks.push(it),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=et.length,this._writeBuffer.push(et),this._callbacks.push(it)}_innerWrite(et=0,it=!0){const We=et||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const p=this._writeBuffer[this._bufferOffset],He=this._action(p,it);if(He){const $e=Xe=>Date.now()-We>=12?setTimeout(()=>this._innerWrite(0,Xe)):this._innerWrite(We,Xe);return void He.catch(Xe=>(queueMicrotask(()=>{throw Xe}),Promise.resolve(!1))).then($e)}const Be=this._callbacks[this._bufferOffset];if(Be&&Be(),this._bufferOffset++,this._pendingData-=p.length,Date.now()-We>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}De.WriteBuffer=Fe},5941:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.toRgbString=De.parseColor=void 0;const Ge=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,Ke=/^[\da-f]+$/;function Je(Fe,Ye){const et=Fe.toString(16),it=et.length<2?"0"+et:et;switch(Ye){case 4:return et[0];case 8:return it;case 12:return(it+it).slice(0,3);default:return it+it}}De.parseColor=function(Fe){if(!Fe)return;let Ye=Fe.toLowerCase();if(Ye.indexOf("rgb:")===0){Ye=Ye.slice(4);const et=Ge.exec(Ye);if(et){const it=et[1]?15:et[4]?255:et[7]?4095:65535;return[Math.round(parseInt(et[1]||et[4]||et[7]||et[10],16)/it*255),Math.round(parseInt(et[2]||et[5]||et[8]||et[11],16)/it*255),Math.round(parseInt(et[3]||et[6]||et[9]||et[12],16)/it*255)]}}else if(Ye.indexOf("#")===0&&(Ye=Ye.slice(1),Ke.exec(Ye)&&[3,6,9,12].includes(Ye.length))){const et=Ye.length/3,it=[0,0,0];for(let We=0;We<3;++We){const p=parseInt(Ye.slice(et*We,et*We+et),16);it[We]=et===1?p<<4:et===2?p:et===3?p>>4:p>>8}return it}},De.toRgbString=function(Fe,Ye=16){const[et,it,We]=Fe;return`rgb:${Je(et,Ye)}/${Je(it,Ye)}/${Je(We,Ye)}`}},5770:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.PAYLOAD_LIMIT=void 0,De.PAYLOAD_LIMIT=1e7},6351:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.DcsHandler=De.DcsParser=void 0;const Ke=Ge(482),Je=Ge(8742),Fe=Ge(5770),Ye=[];De.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=Ye,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Ye}registerHandler(it,We){this._handlers[it]===void 0&&(this._handlers[it]=[]);const p=this._handlers[it];return p.push(We),{dispose:()=>{const He=p.indexOf(We);He!==-1&&p.splice(He,1)}}}clearHandler(it){this._handlers[it]&&delete this._handlers[it]}setHandlerFallback(it){this._handlerFb=it}reset(){if(this._active.length)for(let it=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;it>=0;--it)this._active[it].unhook(!1);this._stack.paused=!1,this._active=Ye,this._ident=0}hook(it,We){if(this.reset(),this._ident=it,this._active=this._handlers[it]||Ye,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].hook(We);else this._handlerFb(this._ident,"HOOK",We)}put(it,We,p){if(this._active.length)for(let He=this._active.length-1;He>=0;He--)this._active[He].put(it,We,p);else this._handlerFb(this._ident,"PUT",(0,Ke.utf32ToString)(it,We,p))}unhook(it,We=!0){if(this._active.length){let p=!1,He=this._active.length-1,Be=!1;if(this._stack.paused&&(He=this._stack.loopPosition-1,p=We,Be=this._stack.fallThrough,this._stack.paused=!1),!Be&&p===!1){for(;He>=0&&(p=this._active[He].unhook(it),p!==!0);He--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=He,this._stack.fallThrough=!1,p;He--}for(;He>=0;He--)if(p=this._active[He].unhook(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=He,this._stack.fallThrough=!0,p}else this._handlerFb(this._ident,"UNHOOK",it);this._active=Ye,this._ident=0}};const et=new Je.Params;et.addParam(0),De.DcsHandler=class{constructor(it){this._handler=it,this._data="",this._params=et,this._hitLimit=!1}hook(it){this._params=it.length>1||it.params[0]?it.clone():et,this._data="",this._hitLimit=!1}put(it,We,p){this._hitLimit||(this._data+=(0,Ke.utf32ToString)(it,We,p),this._data.length>Fe.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(it){let We=!1;if(this._hitLimit)We=!1;else if(it&&(We=this._handler(this._data,this._params),We instanceof Promise))return We.then(p=>(this._params=et,this._data="",this._hitLimit=!1,p));return this._params=et,this._data="",this._hitLimit=!1,We}}},2015:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.EscapeSequenceParser=De.VT500_TRANSITION_TABLE=De.TransitionTable=void 0;const Ke=Ge(844),Je=Ge(8742),Fe=Ge(6242),Ye=Ge(6351);class et{constructor(He){this.table=new Uint8Array(He)}setDefault(He,Be){this.table.fill(He<<4|Be)}add(He,Be,$e,Xe){this.table[Be<<8|He]=$e<<4|Xe}addMany(He,Be,$e,Xe){for(let tt=0;tt<He.length;tt++)this.table[Be<<8|He[tt]]=$e<<4|Xe}}De.TransitionTable=et;const it=160;De.VT500_TRANSITION_TABLE=function(){const p=new et(4095),He=Array.apply(null,Array(256)).map((st,Ze)=>Ze),Be=(st,Ze)=>He.slice(st,Ze),$e=Be(32,127),Xe=Be(0,24);Xe.push(25),Xe.push.apply(Xe,Be(28,32));const tt=Be(0,14);let Qe;for(Qe in p.setDefault(1,0),p.addMany($e,0,2,0),tt)p.addMany([24,26,153,154],Qe,3,0),p.addMany(Be(128,144),Qe,3,0),p.addMany(Be(144,152),Qe,3,0),p.add(156,Qe,0,0),p.add(27,Qe,11,1),p.add(157,Qe,4,8),p.addMany([152,158,159],Qe,0,7),p.add(155,Qe,11,3),p.add(144,Qe,11,9);return p.addMany(Xe,0,3,0),p.addMany(Xe,1,3,1),p.add(127,1,0,1),p.addMany(Xe,8,0,8),p.addMany(Xe,3,3,3),p.add(127,3,0,3),p.addMany(Xe,4,3,4),p.add(127,4,0,4),p.addMany(Xe,6,3,6),p.addMany(Xe,5,3,5),p.add(127,5,0,5),p.addMany(Xe,2,3,2),p.add(127,2,0,2),p.add(93,1,4,8),p.addMany($e,8,5,8),p.add(127,8,5,8),p.addMany([156,27,24,26,7],8,6,0),p.addMany(Be(28,32),8,0,8),p.addMany([88,94,95],1,0,7),p.addMany($e,7,0,7),p.addMany(Xe,7,0,7),p.add(156,7,0,0),p.add(127,7,0,7),p.add(91,1,11,3),p.addMany(Be(64,127),3,7,0),p.addMany(Be(48,60),3,8,4),p.addMany([60,61,62,63],3,9,4),p.addMany(Be(48,60),4,8,4),p.addMany(Be(64,127),4,7,0),p.addMany([60,61,62,63],4,0,6),p.addMany(Be(32,64),6,0,6),p.add(127,6,0,6),p.addMany(Be(64,127),6,0,0),p.addMany(Be(32,48),3,9,5),p.addMany(Be(32,48),5,9,5),p.addMany(Be(48,64),5,0,6),p.addMany(Be(64,127),5,7,0),p.addMany(Be(32,48),4,9,5),p.addMany(Be(32,48),1,9,2),p.addMany(Be(32,48),2,9,2),p.addMany(Be(48,127),2,10,0),p.addMany(Be(48,80),1,10,0),p.addMany(Be(81,88),1,10,0),p.addMany([89,90,92],1,10,0),p.addMany(Be(96,127),1,10,0),p.add(80,1,11,9),p.addMany(Xe,9,0,9),p.add(127,9,0,9),p.addMany(Be(28,32),9,0,9),p.addMany(Be(32,48),9,9,12),p.addMany(Be(48,60),9,8,10),p.addMany([60,61,62,63],9,9,10),p.addMany(Xe,11,0,11),p.addMany(Be(32,128),11,0,11),p.addMany(Be(28,32),11,0,11),p.addMany(Xe,10,0,10),p.add(127,10,0,10),p.addMany(Be(28,32),10,0,10),p.addMany(Be(48,60),10,8,10),p.addMany([60,61,62,63],10,0,11),p.addMany(Be(32,48),10,9,12),p.addMany(Xe,12,0,12),p.add(127,12,0,12),p.addMany(Be(28,32),12,0,12),p.addMany(Be(32,48),12,9,12),p.addMany(Be(48,64),12,0,11),p.addMany(Be(64,127),12,12,13),p.addMany(Be(64,127),10,12,13),p.addMany(Be(64,127),9,12,13),p.addMany(Xe,13,13,13),p.addMany($e,13,13,13),p.add(127,13,0,13),p.addMany([27,156,24,26],13,14,0),p.add(it,0,2,0),p.add(it,8,5,8),p.add(it,6,0,6),p.add(it,11,0,11),p.add(it,13,13,13),p}();class We extends Ke.Disposable{constructor(He=De.VT500_TRANSITION_TABLE){super(),this._transitions=He,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new Je.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(Be,$e,Xe)=>{},this._executeHandlerFb=Be=>{},this._csiHandlerFb=(Be,$e)=>{},this._escHandlerFb=Be=>{},this._errorHandlerFb=Be=>Be,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,Ke.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new Fe.OscParser),this._dcsParser=this.register(new Ye.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(He,Be=[64,126]){let $e=0;if(He.prefix){if(He.prefix.length>1)throw new Error("only one byte as prefix supported");if($e=He.prefix.charCodeAt(0),$e&&60>$e||$e>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(He.intermediates){if(He.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let tt=0;tt<He.intermediates.length;++tt){const Qe=He.intermediates.charCodeAt(tt);if(32>Qe||Qe>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");$e<<=8,$e|=Qe}}if(He.final.length!==1)throw new Error("final must be a single byte");const Xe=He.final.charCodeAt(0);if(Be[0]>Xe||Xe>Be[1])throw new Error(`final must be in range ${Be[0]} .. ${Be[1]}`);return $e<<=8,$e|=Xe,$e}identToString(He){const Be=[];for(;He;)Be.push(String.fromCharCode(255&He)),He>>=8;return Be.reverse().join("")}setPrintHandler(He){this._printHandler=He}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(He,Be){const $e=this._identifier(He,[48,126]);this._escHandlers[$e]===void 0&&(this._escHandlers[$e]=[]);const Xe=this._escHandlers[$e];return Xe.push(Be),{dispose:()=>{const tt=Xe.indexOf(Be);tt!==-1&&Xe.splice(tt,1)}}}clearEscHandler(He){this._escHandlers[this._identifier(He,[48,126])]&&delete this._escHandlers[this._identifier(He,[48,126])]}setEscHandlerFallback(He){this._escHandlerFb=He}setExecuteHandler(He,Be){this._executeHandlers[He.charCodeAt(0)]=Be}clearExecuteHandler(He){this._executeHandlers[He.charCodeAt(0)]&&delete this._executeHandlers[He.charCodeAt(0)]}setExecuteHandlerFallback(He){this._executeHandlerFb=He}registerCsiHandler(He,Be){const $e=this._identifier(He);this._csiHandlers[$e]===void 0&&(this._csiHandlers[$e]=[]);const Xe=this._csiHandlers[$e];return Xe.push(Be),{dispose:()=>{const tt=Xe.indexOf(Be);tt!==-1&&Xe.splice(tt,1)}}}clearCsiHandler(He){this._csiHandlers[this._identifier(He)]&&delete this._csiHandlers[this._identifier(He)]}setCsiHandlerFallback(He){this._csiHandlerFb=He}registerDcsHandler(He,Be){return this._dcsParser.registerHandler(this._identifier(He),Be)}clearDcsHandler(He){this._dcsParser.clearHandler(this._identifier(He))}setDcsHandlerFallback(He){this._dcsParser.setHandlerFallback(He)}registerOscHandler(He,Be){return this._oscParser.registerHandler(He,Be)}clearOscHandler(He){this._oscParser.clearHandler(He)}setOscHandlerFallback(He){this._oscParser.setHandlerFallback(He)}setErrorHandler(He){this._errorHandler=He}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(He,Be,$e,Xe,tt){this._parseStack.state=He,this._parseStack.handlers=Be,this._parseStack.handlerPos=$e,this._parseStack.transition=Xe,this._parseStack.chunkPos=tt}parse(He,Be,$e){let Xe,tt=0,Qe=0,st=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,st=this._parseStack.chunkPos+1;else{if($e===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const Ze=this._parseStack.handlers;let rt=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if($e===!1&&rt>-1){for(;rt>=0&&(Xe=Ze[rt](this._params),Xe!==!0);rt--)if(Xe instanceof Promise)return this._parseStack.handlerPos=rt,Xe}this._parseStack.handlers=[];break;case 4:if($e===!1&&rt>-1){for(;rt>=0&&(Xe=Ze[rt](),Xe!==!0);rt--)if(Xe instanceof Promise)return this._parseStack.handlerPos=rt,Xe}this._parseStack.handlers=[];break;case 6:if(tt=He[this._parseStack.chunkPos],Xe=this._dcsParser.unhook(tt!==24&&tt!==26,$e),Xe)return Xe;tt===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(tt=He[this._parseStack.chunkPos],Xe=this._oscParser.end(tt!==24&&tt!==26,$e),Xe)return Xe;tt===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,st=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let Ze=st;Ze<Be;++Ze){switch(tt=He[Ze],Qe=this._transitions.table[this.currentState<<8|(tt<160?tt:it)],Qe>>4){case 2:for(let lt=Ze+1;;++lt){if(lt>=Be||(tt=He[lt])<32||tt>126&&tt<it){this._printHandler(He,Ze,lt),Ze=lt-1;break}if(++lt>=Be||(tt=He[lt])<32||tt>126&&tt<it){this._printHandler(He,Ze,lt),Ze=lt-1;break}if(++lt>=Be||(tt=He[lt])<32||tt>126&&tt<it){this._printHandler(He,Ze,lt),Ze=lt-1;break}if(++lt>=Be||(tt=He[lt])<32||tt>126&&tt<it){this._printHandler(He,Ze,lt),Ze=lt-1;break}}break;case 3:this._executeHandlers[tt]?this._executeHandlers[tt]():this._executeHandlerFb(tt),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:Ze,code:tt,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const rt=this._csiHandlers[this._collect<<8|tt];let ot=rt?rt.length-1:-1;for(;ot>=0&&(Xe=rt[ot](this._params),Xe!==!0);ot--)if(Xe instanceof Promise)return this._preserveStack(3,rt,ot,Qe,Ze),Xe;ot<0&&this._csiHandlerFb(this._collect<<8|tt,this._params),this.precedingJoinState=0;break;case 8:do switch(tt){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(tt-48)}while(++Ze<Be&&(tt=He[Ze])>47&&tt<60);Ze--;break;case 9:this._collect<<=8,this._collect|=tt;break;case 10:const dt=this._escHandlers[this._collect<<8|tt];let ct=dt?dt.length-1:-1;for(;ct>=0&&(Xe=dt[ct](),Xe!==!0);ct--)if(Xe instanceof Promise)return this._preserveStack(4,dt,ct,Qe,Ze),Xe;ct<0&&this._escHandlerFb(this._collect<<8|tt),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|tt,this._params);break;case 13:for(let lt=Ze+1;;++lt)if(lt>=Be||(tt=He[lt])===24||tt===26||tt===27||tt>127&&tt<it){this._dcsParser.put(He,Ze,lt),Ze=lt-1;break}break;case 14:if(Xe=this._dcsParser.unhook(tt!==24&&tt!==26),Xe)return this._preserveStack(6,[],0,Qe,Ze),Xe;tt===27&&(Qe|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let lt=Ze+1;;lt++)if(lt>=Be||(tt=He[lt])<32||tt>127&&tt<it){this._oscParser.put(He,Ze,lt),Ze=lt-1;break}break;case 6:if(Xe=this._oscParser.end(tt!==24&&tt!==26),Xe)return this._preserveStack(5,[],0,Qe,Ze),Xe;tt===27&&(Qe|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&Qe}}}De.EscapeSequenceParser=We},6242:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.OscHandler=De.OscParser=void 0;const Ke=Ge(5770),Je=Ge(482),Fe=[];De.OscParser=class{constructor(){this._state=0,this._active=Fe,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(Ye,et){this._handlers[Ye]===void 0&&(this._handlers[Ye]=[]);const it=this._handlers[Ye];return it.push(et),{dispose:()=>{const We=it.indexOf(et);We!==-1&&it.splice(We,1)}}}clearHandler(Ye){this._handlers[Ye]&&delete this._handlers[Ye]}setHandlerFallback(Ye){this._handlerFb=Ye}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Fe}reset(){if(this._state===2)for(let Ye=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;Ye>=0;--Ye)this._active[Ye].end(!1);this._stack.paused=!1,this._active=Fe,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||Fe,this._active.length)for(let Ye=this._active.length-1;Ye>=0;Ye--)this._active[Ye].start();else this._handlerFb(this._id,"START")}_put(Ye,et,it){if(this._active.length)for(let We=this._active.length-1;We>=0;We--)this._active[We].put(Ye,et,it);else this._handlerFb(this._id,"PUT",(0,Je.utf32ToString)(Ye,et,it))}start(){this.reset(),this._state=1}put(Ye,et,it){if(this._state!==3){if(this._state===1)for(;et<it;){const We=Ye[et++];if(We===59){this._state=2,this._start();break}if(We<48||57<We)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+We-48}this._state===2&&it-et>0&&this._put(Ye,et,it)}}end(Ye,et=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let it=!1,We=this._active.length-1,p=!1;if(this._stack.paused&&(We=this._stack.loopPosition-1,it=et,p=this._stack.fallThrough,this._stack.paused=!1),!p&&it===!1){for(;We>=0&&(it=this._active[We].end(Ye),it!==!0);We--)if(it instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=We,this._stack.fallThrough=!1,it;We--}for(;We>=0;We--)if(it=this._active[We].end(!1),it instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=We,this._stack.fallThrough=!0,it}else this._handlerFb(this._id,"END",Ye);this._active=Fe,this._id=-1,this._state=0}}},De.OscHandler=class{constructor(Ye){this._handler=Ye,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(Ye,et,it){this._hitLimit||(this._data+=(0,Je.utf32ToString)(Ye,et,it),this._data.length>Ke.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(Ye){let et=!1;if(this._hitLimit)et=!1;else if(Ye&&(et=this._handler(this._data),et instanceof Promise))return et.then(it=>(this._data="",this._hitLimit=!1,it));return this._data="",this._hitLimit=!1,et}}},8742:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.Params=void 0;const Ge=2147483647;class Ke{static fromArray(Fe){const Ye=new Ke;if(!Fe.length)return Ye;for(let et=Array.isArray(Fe[0])?1:0;et<Fe.length;++et){const it=Fe[et];if(Array.isArray(it))for(let We=0;We<it.length;++We)Ye.addSubParam(it[We]);else Ye.addParam(it)}return Ye}constructor(Fe=32,Ye=32){if(this.maxLength=Fe,this.maxSubParamsLength=Ye,Ye>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(Fe),this.length=0,this._subParams=new Int32Array(Ye),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(Fe),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const Fe=new Ke(this.maxLength,this.maxSubParamsLength);return Fe.params.set(this.params),Fe.length=this.length,Fe._subParams.set(this._subParams),Fe._subParamsLength=this._subParamsLength,Fe._subParamsIdx.set(this._subParamsIdx),Fe._rejectDigits=this._rejectDigits,Fe._rejectSubDigits=this._rejectSubDigits,Fe._digitIsSub=this._digitIsSub,Fe}toArray(){const Fe=[];for(let Ye=0;Ye<this.length;++Ye){Fe.push(this.params[Ye]);const et=this._subParamsIdx[Ye]>>8,it=255&this._subParamsIdx[Ye];it-et>0&&Fe.push(Array.prototype.slice.call(this._subParams,et,it))}return Fe}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(Fe){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(Fe<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=Fe>Ge?Ge:Fe}}addSubParam(Fe){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(Fe<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=Fe>Ge?Ge:Fe,this._subParamsIdx[this.length-1]++}}hasSubParams(Fe){return(255&this._subParamsIdx[Fe])-(this._subParamsIdx[Fe]>>8)>0}getSubParams(Fe){const Ye=this._subParamsIdx[Fe]>>8,et=255&this._subParamsIdx[Fe];return et-Ye>0?this._subParams.subarray(Ye,et):null}getSubParamsAll(){const Fe={};for(let Ye=0;Ye<this.length;++Ye){const et=this._subParamsIdx[Ye]>>8,it=255&this._subParamsIdx[Ye];it-et>0&&(Fe[Ye]=this._subParams.slice(et,it))}return Fe}addDigit(Fe){let Ye;if(this._rejectDigits||!(Ye=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const et=this._digitIsSub?this._subParams:this.params,it=et[Ye-1];et[Ye-1]=~it?Math.min(10*it+Fe,Ge):Fe}}De.Params=Ke},5741:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.AddonManager=void 0,De.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let Ge=this._addons.length-1;Ge>=0;Ge--)this._addons[Ge].instance.dispose()}loadAddon(Ge,Ke){const Je={instance:Ke,dispose:Ke.dispose,isDisposed:!1};this._addons.push(Je),Ke.dispose=()=>this._wrappedAddonDispose(Je),Ke.activate(Ge)}_wrappedAddonDispose(Ge){if(Ge.isDisposed)return;let Ke=-1;for(let Je=0;Je<this._addons.length;Je++)if(this._addons[Je]===Ge){Ke=Je;break}if(Ke===-1)throw new Error("Could not dispose an addon that has not been loaded");Ge.isDisposed=!0,Ge.dispose.apply(Ge.instance),this._addons.splice(Ke,1)}}},8771:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.BufferApiView=void 0;const Ke=Ge(3785),Je=Ge(511);De.BufferApiView=class{constructor(Fe,Ye){this._buffer=Fe,this.type=Ye}init(Fe){return this._buffer=Fe,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(Fe){const Ye=this._buffer.lines.get(Fe);if(Ye)return new Ke.BufferLineApiView(Ye)}getNullCell(){return new Je.CellData}}},3785:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.BufferLineApiView=void 0;const Ke=Ge(511);De.BufferLineApiView=class{constructor(Je){this._line=Je}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(Je,Fe){if(!(Je<0||Je>=this._line.length))return Fe?(this._line.loadCell(Je,Fe),Fe):this._line.loadCell(Je,new Ke.CellData)}translateToString(Je,Fe,Ye){return this._line.translateToString(Je,Fe,Ye)}}},8285:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.BufferNamespaceApi=void 0;const Ke=Ge(8771),Je=Ge(8460),Fe=Ge(844);class Ye extends Fe.Disposable{constructor(it){super(),this._core=it,this._onBufferChange=this.register(new Je.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new Ke.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new Ke.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}De.BufferNamespaceApi=Ye},7975:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.ParserApi=void 0,De.ParserApi=class{constructor(Ge){this._core=Ge}registerCsiHandler(Ge,Ke){return this._core.registerCsiHandler(Ge,Je=>Ke(Je.toArray()))}addCsiHandler(Ge,Ke){return this.registerCsiHandler(Ge,Ke)}registerDcsHandler(Ge,Ke){return this._core.registerDcsHandler(Ge,(Je,Fe)=>Ke(Je,Fe.toArray()))}addDcsHandler(Ge,Ke){return this.registerDcsHandler(Ge,Ke)}registerEscHandler(Ge,Ke){return this._core.registerEscHandler(Ge,Ke)}addEscHandler(Ge,Ke){return this.registerEscHandler(Ge,Ke)}registerOscHandler(Ge,Ke){return this._core.registerOscHandler(Ge,Ke)}addOscHandler(Ge,Ke){return this.registerOscHandler(Ge,Ke)}}},7090:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.UnicodeApi=void 0,De.UnicodeApi=class{constructor(Ge){this._core=Ge}register(Ge){this._core.unicodeService.register(Ge)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(Ge){this._core.unicodeService.activeVersion=Ge}}},744:function(gt,De,Ge){var Ke=this&&this.__decorate||function(p,He,Be,$e){var Xe,tt=arguments.length,Qe=tt<3?He:$e===null?$e=Object.getOwnPropertyDescriptor(He,Be):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Qe=Reflect.decorate(p,He,Be,$e);else for(var st=p.length-1;st>=0;st--)(Xe=p[st])&&(Qe=(tt<3?Xe(Qe):tt>3?Xe(He,Be,Qe):Xe(He,Be))||Qe);return tt>3&&Qe&&Object.defineProperty(He,Be,Qe),Qe},Je=this&&this.__param||function(p,He){return function(Be,$e){He(Be,$e,p)}};Object.defineProperty(De,"__esModule",{value:!0}),De.BufferService=De.MINIMUM_ROWS=De.MINIMUM_COLS=void 0;const Fe=Ge(8460),Ye=Ge(844),et=Ge(5295),it=Ge(2585);De.MINIMUM_COLS=2,De.MINIMUM_ROWS=1;let We=De.BufferService=class extends Ye.Disposable{get buffer(){return this.buffers.active}constructor(p){super(),this.isUserScrolling=!1,this._onResize=this.register(new Fe.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new Fe.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(p.rawOptions.cols||0,De.MINIMUM_COLS),this.rows=Math.max(p.rawOptions.rows||0,De.MINIMUM_ROWS),this.buffers=this.register(new et.BufferSet(p,this))}resize(p,He){this.cols=p,this.rows=He,this.buffers.resize(p,He),this._onResize.fire({cols:p,rows:He})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(p,He=!1){const Be=this.buffer;let $e;$e=this._cachedBlankLine,$e&&$e.length===this.cols&&$e.getFg(0)===p.fg&&$e.getBg(0)===p.bg||($e=Be.getBlankLine(p,He),this._cachedBlankLine=$e),$e.isWrapped=He;const Xe=Be.ybase+Be.scrollTop,tt=Be.ybase+Be.scrollBottom;if(Be.scrollTop===0){const Qe=Be.lines.isFull;tt===Be.lines.length-1?Qe?Be.lines.recycle().copyFrom($e):Be.lines.push($e.clone()):Be.lines.splice(tt+1,0,$e.clone()),Qe?this.isUserScrolling&&(Be.ydisp=Math.max(Be.ydisp-1,0)):(Be.ybase++,this.isUserScrolling||Be.ydisp++)}else{const Qe=tt-Xe+1;Be.lines.shiftElements(Xe+1,Qe-1,-1),Be.lines.set(tt,$e.clone())}this.isUserScrolling||(Be.ydisp=Be.ybase),this._onScroll.fire(Be.ydisp)}scrollLines(p,He,Be){const $e=this.buffer;if(p<0){if($e.ydisp===0)return;this.isUserScrolling=!0}else p+$e.ydisp>=$e.ybase&&(this.isUserScrolling=!1);const Xe=$e.ydisp;$e.ydisp=Math.max(Math.min($e.ydisp+p,$e.ybase),0),Xe!==$e.ydisp&&(He||this._onScroll.fire($e.ydisp))}};De.BufferService=We=Ke([Je(0,it.IOptionsService)],We)},7994:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CharsetService=void 0,De.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(Ge){this.glevel=Ge,this.charset=this._charsets[Ge]}setgCharset(Ge,Ke){this._charsets[Ge]=Ke,this.glevel===Ge&&(this.charset=Ke)}}},1753:function(gt,De,Ge){var Ke=this&&this.__decorate||function($e,Xe,tt,Qe){var st,Ze=arguments.length,rt=Ze<3?Xe:Qe===null?Qe=Object.getOwnPropertyDescriptor(Xe,tt):Qe;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")rt=Reflect.decorate($e,Xe,tt,Qe);else for(var ot=$e.length-1;ot>=0;ot--)(st=$e[ot])&&(rt=(Ze<3?st(rt):Ze>3?st(Xe,tt,rt):st(Xe,tt))||rt);return Ze>3&&rt&&Object.defineProperty(Xe,tt,rt),rt},Je=this&&this.__param||function($e,Xe){return function(tt,Qe){Xe(tt,Qe,$e)}};Object.defineProperty(De,"__esModule",{value:!0}),De.CoreMouseService=void 0;const Fe=Ge(2585),Ye=Ge(8460),et=Ge(844),it={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:$e=>$e.button!==4&&$e.action===1&&($e.ctrl=!1,$e.alt=!1,$e.shift=!1,!0)},VT200:{events:19,restrict:$e=>$e.action!==32},DRAG:{events:23,restrict:$e=>$e.action!==32||$e.button!==3},ANY:{events:31,restrict:$e=>!0}};function We($e,Xe){let tt=($e.ctrl?16:0)|($e.shift?4:0)|($e.alt?8:0);return $e.button===4?(tt|=64,tt|=$e.action):(tt|=3&$e.button,4&$e.button&&(tt|=64),8&$e.button&&(tt|=128),$e.action===32?tt|=32:$e.action!==0||Xe||(tt|=3)),tt}const p=String.fromCharCode,He={DEFAULT:$e=>{const Xe=[We($e,!1)+32,$e.col+32,$e.row+32];return Xe[0]>255||Xe[1]>255||Xe[2]>255?"":`\x1B[M${p(Xe[0])}${p(Xe[1])}${p(Xe[2])}`},SGR:$e=>{const Xe=$e.action===0&&$e.button!==4?"m":"M";return`\x1B[<${We($e,!0)};${$e.col};${$e.row}${Xe}`},SGR_PIXELS:$e=>{const Xe=$e.action===0&&$e.button!==4?"m":"M";return`\x1B[<${We($e,!0)};${$e.x};${$e.y}${Xe}`}};let Be=De.CoreMouseService=class extends et.Disposable{constructor($e,Xe){super(),this._bufferService=$e,this._coreService=Xe,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new Ye.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const tt of Object.keys(it))this.addProtocol(tt,it[tt]);for(const tt of Object.keys(He))this.addEncoding(tt,He[tt]);this.reset()}addProtocol($e,Xe){this._protocols[$e]=Xe}addEncoding($e,Xe){this._encodings[$e]=Xe}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol($e){if(!this._protocols[$e])throw new Error(`unknown protocol "${$e}"`);this._activeProtocol=$e,this._onProtocolChange.fire(this._protocols[$e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding($e){if(!this._encodings[$e])throw new Error(`unknown encoding "${$e}"`);this._activeEncoding=$e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent($e){if($e.col<0||$e.col>=this._bufferService.cols||$e.row<0||$e.row>=this._bufferService.rows||$e.button===4&&$e.action===32||$e.button===3&&$e.action!==32||$e.button!==4&&($e.action===2||$e.action===3)||($e.col++,$e.row++,$e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,$e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict($e))return!1;const Xe=this._encodings[this._activeEncoding]($e);return Xe&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(Xe):this._coreService.triggerDataEvent(Xe,!0)),this._lastEvent=$e,!0}explainEvents($e){return{down:!!(1&$e),up:!!(2&$e),drag:!!(4&$e),move:!!(8&$e),wheel:!!(16&$e)}}_equalEvents($e,Xe,tt){if(tt){if($e.x!==Xe.x||$e.y!==Xe.y)return!1}else if($e.col!==Xe.col||$e.row!==Xe.row)return!1;return $e.button===Xe.button&&$e.action===Xe.action&&$e.ctrl===Xe.ctrl&&$e.alt===Xe.alt&&$e.shift===Xe.shift}};De.CoreMouseService=Be=Ke([Je(0,Fe.IBufferService),Je(1,Fe.ICoreService)],Be)},6975:function(gt,De,Ge){var Ke=this&&this.__decorate||function(Be,$e,Xe,tt){var Qe,st=arguments.length,Ze=st<3?$e:tt===null?tt=Object.getOwnPropertyDescriptor($e,Xe):tt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ze=Reflect.decorate(Be,$e,Xe,tt);else for(var rt=Be.length-1;rt>=0;rt--)(Qe=Be[rt])&&(Ze=(st<3?Qe(Ze):st>3?Qe($e,Xe,Ze):Qe($e,Xe))||Ze);return st>3&&Ze&&Object.defineProperty($e,Xe,Ze),Ze},Je=this&&this.__param||function(Be,$e){return function(Xe,tt){$e(Xe,tt,Be)}};Object.defineProperty(De,"__esModule",{value:!0}),De.CoreService=void 0;const Fe=Ge(1439),Ye=Ge(8460),et=Ge(844),it=Ge(2585),We=Object.freeze({insertMode:!1}),p=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let He=De.CoreService=class extends et.Disposable{constructor(Be,$e,Xe){super(),this._bufferService=Be,this._logService=$e,this._optionsService=Xe,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new Ye.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new Ye.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new Ye.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new Ye.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,Fe.clone)(We),this.decPrivateModes=(0,Fe.clone)(p)}reset(){this.modes=(0,Fe.clone)(We),this.decPrivateModes=(0,Fe.clone)(p)}triggerDataEvent(Be,$e=!1){if(this._optionsService.rawOptions.disableStdin)return;const Xe=this._bufferService.buffer;$e&&this._optionsService.rawOptions.scrollOnUserInput&&Xe.ybase!==Xe.ydisp&&this._onRequestScrollToBottom.fire(),$e&&this._onUserInput.fire(),this._logService.debug(`sending data "${Be}"`,()=>Be.split("").map(tt=>tt.charCodeAt(0))),this._onData.fire(Be)}triggerBinaryEvent(Be){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${Be}"`,()=>Be.split("").map($e=>$e.charCodeAt(0))),this._onBinary.fire(Be))}};De.CoreService=He=Ke([Je(0,it.IBufferService),Je(1,it.ILogService),Je(2,it.IOptionsService)],He)},9074:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.DecorationService=void 0;const Ke=Ge(8055),Je=Ge(8460),Fe=Ge(844),Ye=Ge(6106);let et=0,it=0;class We extends Fe.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new Ye.SortedList(Be=>Be==null?void 0:Be.marker.line),this._onDecorationRegistered=this.register(new Je.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new Je.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,Fe.toDisposable)(()=>this.reset()))}registerDecoration(Be){if(Be.marker.isDisposed)return;const $e=new p(Be);if($e){const Xe=$e.marker.onDispose(()=>$e.dispose());$e.onDispose(()=>{$e&&(this._decorations.delete($e)&&this._onDecorationRemoved.fire($e),Xe.dispose())}),this._decorations.insert($e),this._onDecorationRegistered.fire($e)}return $e}reset(){for(const Be of this._decorations.values())Be.dispose();this._decorations.clear()}*getDecorationsAtCell(Be,$e,Xe){let tt=0,Qe=0;for(const st of this._decorations.getKeyIterator($e))tt=st.options.x??0,Qe=tt+(st.options.width??1),Be>=tt&&Be<Qe&&(!Xe||(st.options.layer??"bottom")===Xe)&&(yield st)}forEachDecorationAtCell(Be,$e,Xe,tt){this._decorations.forEachByKey($e,Qe=>{et=Qe.options.x??0,it=et+(Qe.options.width??1),Be>=et&&Be<it&&(!Xe||(Qe.options.layer??"bottom")===Xe)&&tt(Qe)})}}De.DecorationService=We;class p extends Fe.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Ke.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Ke.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(Be){super(),this.options=Be,this.onRenderEmitter=this.register(new Je.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new Je.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=Be.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.InstantiationService=De.ServiceCollection=void 0;const Ke=Ge(2585),Je=Ge(8343);class Fe{constructor(...et){this._entries=new Map;for(const[it,We]of et)this.set(it,We)}set(et,it){const We=this._entries.get(et);return this._entries.set(et,it),We}forEach(et){for(const[it,We]of this._entries.entries())et(it,We)}has(et){return this._entries.has(et)}get(et){return this._entries.get(et)}}De.ServiceCollection=Fe,De.InstantiationService=class{constructor(){this._services=new Fe,this._services.set(Ke.IInstantiationService,this)}setService(Ye,et){this._services.set(Ye,et)}getService(Ye){return this._services.get(Ye)}createInstance(Ye,...et){const it=(0,Je.getServiceDependencies)(Ye).sort((He,Be)=>He.index-Be.index),We=[];for(const He of it){const Be=this._services.get(He.id);if(!Be)throw new Error(`[createInstance] ${Ye.name} depends on UNKNOWN service ${He.id}.`);We.push(Be)}const p=it.length>0?it[0].index:et.length;if(et.length!==p)throw new Error(`[createInstance] First service dependency of ${Ye.name} at position ${p+1} conflicts with ${et.length} static arguments`);return new Ye(...et,...We)}}},7866:function(gt,De,Ge){var Ke=this&&this.__decorate||function(p,He,Be,$e){var Xe,tt=arguments.length,Qe=tt<3?He:$e===null?$e=Object.getOwnPropertyDescriptor(He,Be):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Qe=Reflect.decorate(p,He,Be,$e);else for(var st=p.length-1;st>=0;st--)(Xe=p[st])&&(Qe=(tt<3?Xe(Qe):tt>3?Xe(He,Be,Qe):Xe(He,Be))||Qe);return tt>3&&Qe&&Object.defineProperty(He,Be,Qe),Qe},Je=this&&this.__param||function(p,He){return function(Be,$e){He(Be,$e,p)}};Object.defineProperty(De,"__esModule",{value:!0}),De.traceCall=De.setTraceLogger=De.LogService=void 0;const Fe=Ge(844),Ye=Ge(2585),et={trace:Ye.LogLevelEnum.TRACE,debug:Ye.LogLevelEnum.DEBUG,info:Ye.LogLevelEnum.INFO,warn:Ye.LogLevelEnum.WARN,error:Ye.LogLevelEnum.ERROR,off:Ye.LogLevelEnum.OFF};let it,We=De.LogService=class extends Fe.Disposable{get logLevel(){return this._logLevel}constructor(p){super(),this._optionsService=p,this._logLevel=Ye.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),it=this}_updateLogLevel(){this._logLevel=et[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(p){for(let He=0;He<p.length;He++)typeof p[He]=="function"&&(p[He]=p[He]())}_log(p,He,Be){this._evalLazyOptionalParams(Be),p.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+He,...Be)}trace(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.TRACE&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.trace.bind(this._optionsService.options.logger))??console.log,p,He)}debug(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.DEBUG&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.debug.bind(this._optionsService.options.logger))??console.log,p,He)}info(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.INFO&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.info.bind(this._optionsService.options.logger))??console.info,p,He)}warn(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.WARN&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.warn.bind(this._optionsService.options.logger))??console.warn,p,He)}error(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.ERROR&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.error.bind(this._optionsService.options.logger))??console.error,p,He)}};De.LogService=We=Ke([Je(0,Ye.IOptionsService)],We),De.setTraceLogger=function(p){it=p},De.traceCall=function(p,He,Be){if(typeof Be.value!="function")throw new Error("not supported");const $e=Be.value;Be.value=function(...Xe){if(it.logLevel!==Ye.LogLevelEnum.TRACE)return $e.apply(this,Xe);it.trace(`GlyphRenderer#${$e.name}(${Xe.map(Qe=>JSON.stringify(Qe)).join(", ")})`);const tt=$e.apply(this,Xe);return it.trace(`GlyphRenderer#${$e.name} return`,tt),tt}}},7302:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.OptionsService=De.DEFAULT_OPTIONS=void 0;const Ke=Ge(8460),Je=Ge(844),Fe=Ge(6114);De.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Fe.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const Ye=["normal","bold","100","200","300","400","500","600","700","800","900"];class et extends Je.Disposable{constructor(We){super(),this._onOptionChange=this.register(new Ke.EventEmitter),this.onOptionChange=this._onOptionChange.event;const p={...De.DEFAULT_OPTIONS};for(const He in We)if(He in p)try{const Be=We[He];p[He]=this._sanitizeAndValidateOption(He,Be)}catch(Be){console.error(Be)}this.rawOptions=p,this.options={...p},this._setupOptions(),this.register((0,Je.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(We,p){return this.onOptionChange(He=>{He===We&&p(this.rawOptions[We])})}onMultipleOptionChange(We,p){return this.onOptionChange(He=>{We.indexOf(He)!==-1&&p()})}_setupOptions(){const We=He=>{if(!(He in De.DEFAULT_OPTIONS))throw new Error(`No option with key "${He}"`);return this.rawOptions[He]},p=(He,Be)=>{if(!(He in De.DEFAULT_OPTIONS))throw new Error(`No option with key "${He}"`);Be=this._sanitizeAndValidateOption(He,Be),this.rawOptions[He]!==Be&&(this.rawOptions[He]=Be,this._onOptionChange.fire(He))};for(const He in this.rawOptions){const Be={get:We.bind(this,He),set:p.bind(this,He)};Object.defineProperty(this.options,He,Be)}}_sanitizeAndValidateOption(We,p){switch(We){case"cursorStyle":if(p||(p=De.DEFAULT_OPTIONS[We]),!function(He){return He==="block"||He==="underline"||He==="bar"}(p))throw new Error(`"${p}" is not a valid value for ${We}`);break;case"wordSeparator":p||(p=De.DEFAULT_OPTIONS[We]);break;case"fontWeight":case"fontWeightBold":if(typeof p=="number"&&1<=p&&p<=1e3)break;p=Ye.includes(p)?p:De.DEFAULT_OPTIONS[We];break;case"cursorWidth":p=Math.floor(p);case"lineHeight":case"tabStopWidth":if(p<1)throw new Error(`${We} cannot be less than 1, value: ${p}`);break;case"minimumContrastRatio":p=Math.max(1,Math.min(21,Math.round(10*p)/10));break;case"scrollback":if((p=Math.min(p,4294967295))<0)throw new Error(`${We} cannot be less than 0, value: ${p}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(p<=0)throw new Error(`${We} cannot be less than or equal to 0, value: ${p}`);break;case"rows":case"cols":if(!p&&p!==0)throw new Error(`${We} must be numeric, value: ${p}`);break;case"windowsPty":p=p??{}}return p}}De.OptionsService=et},2660:function(gt,De,Ge){var Ke=this&&this.__decorate||function(et,it,We,p){var He,Be=arguments.length,$e=Be<3?it:p===null?p=Object.getOwnPropertyDescriptor(it,We):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$e=Reflect.decorate(et,it,We,p);else for(var Xe=et.length-1;Xe>=0;Xe--)(He=et[Xe])&&($e=(Be<3?He($e):Be>3?He(it,We,$e):He(it,We))||$e);return Be>3&&$e&&Object.defineProperty(it,We,$e),$e},Je=this&&this.__param||function(et,it){return function(We,p){it(We,p,et)}};Object.defineProperty(De,"__esModule",{value:!0}),De.OscLinkService=void 0;const Fe=Ge(2585);let Ye=De.OscLinkService=class{constructor(et){this._bufferService=et,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(et){const it=this._bufferService.buffer;if(et.id===void 0){const Xe=it.addMarker(it.ybase+it.y),tt={data:et,id:this._nextId++,lines:[Xe]};return Xe.onDispose(()=>this._removeMarkerFromLink(tt,Xe)),this._dataByLinkId.set(tt.id,tt),tt.id}const We=et,p=this._getEntryIdKey(We),He=this._entriesWithId.get(p);if(He)return this.addLineToLink(He.id,it.ybase+it.y),He.id;const Be=it.addMarker(it.ybase+it.y),$e={id:this._nextId++,key:this._getEntryIdKey(We),data:We,lines:[Be]};return Be.onDispose(()=>this._removeMarkerFromLink($e,Be)),this._entriesWithId.set($e.key,$e),this._dataByLinkId.set($e.id,$e),$e.id}addLineToLink(et,it){const We=this._dataByLinkId.get(et);if(We&&We.lines.every(p=>p.line!==it)){const p=this._bufferService.buffer.addMarker(it);We.lines.push(p),p.onDispose(()=>this._removeMarkerFromLink(We,p))}}getLinkData(et){var it;return(it=this._dataByLinkId.get(et))==null?void 0:it.data}_getEntryIdKey(et){return`${et.id};;${et.uri}`}_removeMarkerFromLink(et,it){const We=et.lines.indexOf(it);We!==-1&&(et.lines.splice(We,1),et.lines.length===0&&(et.data.id!==void 0&&this._entriesWithId.delete(et.key),this._dataByLinkId.delete(et.id)))}};De.OscLinkService=Ye=Ke([Je(0,Fe.IBufferService)],Ye)},8343:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.createDecorator=De.getServiceDependencies=De.serviceRegistry=void 0;const Ge="di$target",Ke="di$dependencies";De.serviceRegistry=new Map,De.getServiceDependencies=function(Je){return Je[Ke]||[]},De.createDecorator=function(Je){if(De.serviceRegistry.has(Je))return De.serviceRegistry.get(Je);const Fe=function(Ye,et,it){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(We,p,He){p[Ge]===p?p[Ke].push({id:We,index:He}):(p[Ke]=[{id:We,index:He}],p[Ge]=p)})(Fe,Ye,it)};return Fe.toString=()=>Je,De.serviceRegistry.set(Je,Fe),Fe}},2585:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.IDecorationService=De.IUnicodeService=De.IOscLinkService=De.IOptionsService=De.ILogService=De.LogLevelEnum=De.IInstantiationService=De.ICharsetService=De.ICoreService=De.ICoreMouseService=De.IBufferService=void 0;const Ke=Ge(8343);var Je;De.IBufferService=(0,Ke.createDecorator)("BufferService"),De.ICoreMouseService=(0,Ke.createDecorator)("CoreMouseService"),De.ICoreService=(0,Ke.createDecorator)("CoreService"),De.ICharsetService=(0,Ke.createDecorator)("CharsetService"),De.IInstantiationService=(0,Ke.createDecorator)("InstantiationService"),function(Fe){Fe[Fe.TRACE=0]="TRACE",Fe[Fe.DEBUG=1]="DEBUG",Fe[Fe.INFO=2]="INFO",Fe[Fe.WARN=3]="WARN",Fe[Fe.ERROR=4]="ERROR",Fe[Fe.OFF=5]="OFF"}(Je||(De.LogLevelEnum=Je={})),De.ILogService=(0,Ke.createDecorator)("LogService"),De.IOptionsService=(0,Ke.createDecorator)("OptionsService"),De.IOscLinkService=(0,Ke.createDecorator)("OscLinkService"),De.IUnicodeService=(0,Ke.createDecorator)("UnicodeService"),De.IDecorationService=(0,Ke.createDecorator)("DecorationService")},1480:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.UnicodeService=void 0;const Ke=Ge(8460),Je=Ge(225);class Fe{static extractShouldJoin(et){return(1&et)!=0}static extractWidth(et){return et>>1&3}static extractCharKind(et){return et>>3}static createPropertyValue(et,it,We=!1){return(16777215&et)<<3|(3&it)<<1|(We?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new Ke.EventEmitter,this.onChange=this._onChange.event;const et=new Je.UnicodeV6;this.register(et),this._active=et.version,this._activeProvider=et}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(et){if(!this._providers[et])throw new Error(`unknown Unicode version "${et}"`);this._active=et,this._activeProvider=this._providers[et],this._onChange.fire(et)}register(et){this._providers[et.version]=et}wcwidth(et){return this._activeProvider.wcwidth(et)}getStringCellWidth(et){let it=0,We=0;const p=et.length;for(let He=0;He<p;++He){let Be=et.charCodeAt(He);if(55296<=Be&&Be<=56319){if(++He>=p)return it+this.wcwidth(Be);const tt=et.charCodeAt(He);56320<=tt&&tt<=57343?Be=1024*(Be-55296)+tt-56320+65536:it+=this.wcwidth(tt)}const $e=this.charProperties(Be,We);let Xe=Fe.extractWidth($e);Fe.extractShouldJoin($e)&&(Xe-=Fe.extractWidth(We)),it+=Xe,We=$e}return it}charProperties(et,it){return this._activeProvider.charProperties(et,it)}}De.UnicodeService=Fe}},xt={};function Ct(gt){var De=xt[gt];if(De!==void 0)return De.exports;var Ge=xt[gt]={exports:{}};return bt[gt].call(Ge.exports,Ge,Ge.exports,Ct),Ge.exports}var Rt={};return(()=>{var gt=Rt;Object.defineProperty(gt,"__esModule",{value:!0}),gt.Terminal=void 0;const De=Ct(9042),Ge=Ct(3236),Ke=Ct(844),Je=Ct(5741),Fe=Ct(8285),Ye=Ct(7975),et=Ct(7090),it=["cols","rows"];class We extends Ke.Disposable{constructor(He){super(),this._core=this.register(new Ge.Terminal(He)),this._addonManager=this.register(new Je.AddonManager),this._publicOptions={...this._core.options};const Be=Xe=>this._core.options[Xe],$e=(Xe,tt)=>{this._checkReadonlyOptions(Xe),this._core.options[Xe]=tt};for(const Xe in this._core.options){const tt={get:Be.bind(this,Xe),set:$e.bind(this,Xe)};Object.defineProperty(this._publicOptions,Xe,tt)}}_checkReadonlyOptions(He){if(it.includes(He))throw new Error(`Option "${He}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new Ye.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new et.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new Fe.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const He=this._core.coreService.decPrivateModes;let Be="none";switch(this._core.coreMouseService.activeProtocol){case"X10":Be="x10";break;case"VT200":Be="vt200";break;case"DRAG":Be="drag";break;case"ANY":Be="any"}return{applicationCursorKeysMode:He.applicationCursorKeys,applicationKeypadMode:He.applicationKeypad,bracketedPasteMode:He.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:Be,originMode:He.origin,reverseWraparoundMode:He.reverseWraparound,sendFocusMode:He.sendFocus,wraparoundMode:He.wraparound}}get options(){return this._publicOptions}set options(He){for(const Be in He)this._publicOptions[Be]=He[Be]}blur(){this._core.blur()}focus(){this._core.focus()}input(He,Be=!0){this._core.input(He,Be)}resize(He,Be){this._verifyIntegers(He,Be),this._core.resize(He,Be)}open(He){this._core.open(He)}attachCustomKeyEventHandler(He){this._core.attachCustomKeyEventHandler(He)}attachCustomWheelEventHandler(He){this._core.attachCustomWheelEventHandler(He)}registerLinkProvider(He){return this._core.registerLinkProvider(He)}registerCharacterJoiner(He){return this._checkProposedApi(),this._core.registerCharacterJoiner(He)}deregisterCharacterJoiner(He){this._checkProposedApi(),this._core.deregisterCharacterJoiner(He)}registerMarker(He=0){return this._verifyIntegers(He),this._core.registerMarker(He)}registerDecoration(He){return this._checkProposedApi(),this._verifyPositiveIntegers(He.x??0,He.width??0,He.height??0),this._core.registerDecoration(He)}hasSelection(){return this._core.hasSelection()}select(He,Be,$e){this._verifyIntegers(He,Be,$e),this._core.select(He,Be,$e)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(He,Be){this._verifyIntegers(He,Be),this._core.selectLines(He,Be)}dispose(){super.dispose()}scrollLines(He){this._verifyIntegers(He),this._core.scrollLines(He)}scrollPages(He){this._verifyIntegers(He),this._core.scrollPages(He)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(He){this._verifyIntegers(He),this._core.scrollToLine(He)}clear(){this._core.clear()}write(He,Be){this._core.write(He,Be)}writeln(He,Be){this._core.write(He),this._core.write(`\r
`,Be)}paste(He){this._core.paste(He)}refresh(He,Be){this._verifyIntegers(He,Be),this._core.refresh(He,Be)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(He){this._addonManager.loadAddon(this,He)}static get strings(){return De}_verifyIntegers(...He){for(const Be of He)if(Be===1/0||isNaN(Be)||Be%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...He){for(const Be of He)if(Be&&(Be===1/0||isNaN(Be)||Be%1!=0||Be<0))throw new Error("This API only accepts positive integers")}}gt.Terminal=We})(),Rt})())})(xterm);var xtermExports=xterm.exports;const baseTheme={foreground:"#F8F8F8",background:"#2D2E2C",selection:"#5DA5D533",black:"#1E1E1D",brightBlack:"#262625",red:"#CE5C5C",brightRed:"#FF7272",green:"#5BCC5B",brightGreen:"#72FF72",yellow:"#CCCC5B",brightYellow:"#FFFF72",blue:"#5D5DD3",brightBlue:"#7279FF",magenta:"#BC5ED1",brightMagenta:"#E572FF",cyan:"#5DA5D5",brightCyan:"#72F0FF",white:"#F8F8F8",brightWhite:"#FFFFFF"};var addonFit={exports:{}};(function(at,mt){(function(bt,xt){at.exports=xt()})(self,()=>(()=>{var bt={};return(()=>{var xt=bt;Object.defineProperty(xt,"__esModule",{value:!0}),xt.FitAddon=void 0,xt.FitAddon=class{activate(Ct){this._terminal=Ct}dispose(){}fit(){const Ct=this.proposeDimensions();if(!Ct||!this._terminal||isNaN(Ct.cols)||isNaN(Ct.rows))return;const Rt=this._terminal._core;this._terminal.rows===Ct.rows&&this._terminal.cols===Ct.cols||(Rt._renderService.clear(),this._terminal.resize(Ct.cols,Ct.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const Ct=this._terminal._core,Rt=Ct._renderService.dimensions;if(Rt.css.cell.width===0||Rt.css.cell.height===0)return;const gt=this._terminal.options.scrollback===0?0:Ct.viewport.scrollBarWidth,De=window.getComputedStyle(this._terminal.element.parentElement),Ge=parseInt(De.getPropertyValue("height")),Ke=Math.max(0,parseInt(De.getPropertyValue("width"))),Je=window.getComputedStyle(this._terminal.element),Fe=Ge-(parseInt(Je.getPropertyValue("padding-top"))+parseInt(Je.getPropertyValue("padding-bottom"))),Ye=Ke-(parseInt(Je.getPropertyValue("padding-right"))+parseInt(Je.getPropertyValue("padding-left")))-gt;return{cols:Math.max(2,Math.floor(Ye/Rt.css.cell.width)),rows:Math.max(1,Math.floor(Fe/Rt.css.cell.height))}}}})(),bt})())})(addonFit);var addonFitExports=addonFit.exports;const fitAddon=new addonFitExports.FitAddon;function load$2(at){at.loadAddon(fitAddon),fitAddon.fit(),addEventListener("resize",mt=>fitAddon.fit())}const fit={load:load$2};var addonWebgl={exports:{}};(function(at,mt){(function(bt,xt){at.exports=xt()})(self,()=>(()=>{var bt={965:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.GlyphRenderer=void 0;const Ke=Ge(374),Je=Ge(509),Fe=Ge(855),Ye=Ge(859),et=Ge(381),it=11,We=it*Float32Array.BYTES_PER_ELEMENT;let p,He=0,Be=0,$e=0;class Xe extends Ye.Disposable{constructor(Qe,st,Ze,rt){super(),this._terminal=Qe,this._gl=st,this._dimensions=Ze,this._optionsService=rt,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const ot=this._gl;Je.TextureAtlas.maxAtlasPages===void 0&&(Je.TextureAtlas.maxAtlasPages=Math.min(32,(0,Ke.throwIfFalsy)(ot.getParameter(ot.MAX_TEXTURE_IMAGE_UNITS))),Je.TextureAtlas.maxTextureSize=(0,Ke.throwIfFalsy)(ot.getParameter(ot.MAX_TEXTURE_SIZE))),this._program=(0,Ke.throwIfFalsy)((0,et.createProgram)(ot,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(Et){let yt="";for(let wt=1;wt<Et;wt++)yt+=` else if (v_texpage == ${wt}) { outColor = texture(u_texture[${wt}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${Et}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${yt}
}`}(Je.TextureAtlas.maxAtlasPages))),this.register((0,Ye.toDisposable)(()=>ot.deleteProgram(this._program))),this._projectionLocation=(0,Ke.throwIfFalsy)(ot.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,Ke.throwIfFalsy)(ot.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,Ke.throwIfFalsy)(ot.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=ot.createVertexArray(),ot.bindVertexArray(this._vertexArrayObject);const dt=new Float32Array([0,0,1,0,0,1,1,1]),ct=ot.createBuffer();this.register((0,Ye.toDisposable)(()=>ot.deleteBuffer(ct))),ot.bindBuffer(ot.ARRAY_BUFFER,ct),ot.bufferData(ot.ARRAY_BUFFER,dt,ot.STATIC_DRAW),ot.enableVertexAttribArray(0),ot.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const lt=new Uint8Array([0,1,2,3]),ft=ot.createBuffer();this.register((0,Ye.toDisposable)(()=>ot.deleteBuffer(ft))),ot.bindBuffer(ot.ELEMENT_ARRAY_BUFFER,ft),ot.bufferData(ot.ELEMENT_ARRAY_BUFFER,lt,ot.STATIC_DRAW),this._attributesBuffer=(0,Ke.throwIfFalsy)(ot.createBuffer()),this.register((0,Ye.toDisposable)(()=>ot.deleteBuffer(this._attributesBuffer))),ot.bindBuffer(ot.ARRAY_BUFFER,this._attributesBuffer),ot.enableVertexAttribArray(2),ot.vertexAttribPointer(2,2,ot.FLOAT,!1,We,0),ot.vertexAttribDivisor(2,1),ot.enableVertexAttribArray(3),ot.vertexAttribPointer(3,2,ot.FLOAT,!1,We,2*Float32Array.BYTES_PER_ELEMENT),ot.vertexAttribDivisor(3,1),ot.enableVertexAttribArray(4),ot.vertexAttribPointer(4,1,ot.FLOAT,!1,We,4*Float32Array.BYTES_PER_ELEMENT),ot.vertexAttribDivisor(4,1),ot.enableVertexAttribArray(5),ot.vertexAttribPointer(5,2,ot.FLOAT,!1,We,5*Float32Array.BYTES_PER_ELEMENT),ot.vertexAttribDivisor(5,1),ot.enableVertexAttribArray(6),ot.vertexAttribPointer(6,2,ot.FLOAT,!1,We,7*Float32Array.BYTES_PER_ELEMENT),ot.vertexAttribDivisor(6,1),ot.enableVertexAttribArray(1),ot.vertexAttribPointer(1,2,ot.FLOAT,!1,We,9*Float32Array.BYTES_PER_ELEMENT),ot.vertexAttribDivisor(1,1),ot.useProgram(this._program);const pt=new Int32Array(Je.TextureAtlas.maxAtlasPages);for(let Et=0;Et<Je.TextureAtlas.maxAtlasPages;Et++)pt[Et]=Et;ot.uniform1iv(this._textureLocation,pt),ot.uniformMatrix4fv(this._projectionLocation,!1,et.PROJECTION_MATRIX),this._atlasTextures=[];for(let Et=0;Et<Je.TextureAtlas.maxAtlasPages;Et++){const yt=new et.GLTexture((0,Ke.throwIfFalsy)(ot.createTexture()));this.register((0,Ye.toDisposable)(()=>ot.deleteTexture(yt.texture))),ot.activeTexture(ot.TEXTURE0+Et),ot.bindTexture(ot.TEXTURE_2D,yt.texture),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_S,ot.CLAMP_TO_EDGE),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_T,ot.CLAMP_TO_EDGE),ot.texImage2D(ot.TEXTURE_2D,0,ot.RGBA,1,1,0,ot.RGBA,ot.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[Et]=yt}ot.enable(ot.BLEND),ot.blendFunc(ot.SRC_ALPHA,ot.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(Qe,st,Ze,rt,ot,dt,ct,lt,ft){this._updateCell(this._vertices.attributes,Qe,st,Ze,rt,ot,dt,ct,lt,ft)}_updateCell(Qe,st,Ze,rt,ot,dt,ct,lt,ft,pt){He=(Ze*this._terminal.cols+st)*it,rt!==Fe.NULL_CELL_CODE&&rt!==void 0?this._atlas&&(p=lt&&lt.length>1?this._atlas.getRasterizedGlyphCombinedChar(lt,ot,dt,ct,!1):this._atlas.getRasterizedGlyph(rt,ot,dt,ct,!1),Be=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),ot!==pt&&p.offset.x>Be?($e=p.offset.x-Be,Qe[He]=-(p.offset.x-$e)+this._dimensions.device.char.left,Qe[He+1]=-p.offset.y+this._dimensions.device.char.top,Qe[He+2]=(p.size.x-$e)/this._dimensions.device.canvas.width,Qe[He+3]=p.size.y/this._dimensions.device.canvas.height,Qe[He+4]=p.texturePage,Qe[He+5]=p.texturePositionClipSpace.x+$e/this._atlas.pages[p.texturePage].canvas.width,Qe[He+6]=p.texturePositionClipSpace.y,Qe[He+7]=p.sizeClipSpace.x-$e/this._atlas.pages[p.texturePage].canvas.width,Qe[He+8]=p.sizeClipSpace.y):(Qe[He]=-p.offset.x+this._dimensions.device.char.left,Qe[He+1]=-p.offset.y+this._dimensions.device.char.top,Qe[He+2]=p.size.x/this._dimensions.device.canvas.width,Qe[He+3]=p.size.y/this._dimensions.device.canvas.height,Qe[He+4]=p.texturePage,Qe[He+5]=p.texturePositionClipSpace.x,Qe[He+6]=p.texturePositionClipSpace.y,Qe[He+7]=p.sizeClipSpace.x,Qe[He+8]=p.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,Ke.allowRescaling)(rt,ft,p.size.x,this._dimensions.device.cell.width)&&(Qe[He+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):Qe.fill(0,He,He+it-1-2)}clear(){const Qe=this._terminal,st=Qe.cols*Qe.rows*it;this._vertices.count!==st?this._vertices.attributes=new Float32Array(st):this._vertices.attributes.fill(0);let Ze=0;for(;Ze<this._vertices.attributesBuffers.length;Ze++)this._vertices.count!==st?this._vertices.attributesBuffers[Ze]=new Float32Array(st):this._vertices.attributesBuffers[Ze].fill(0);this._vertices.count=st,Ze=0;for(let rt=0;rt<Qe.rows;rt++)for(let ot=0;ot<Qe.cols;ot++)this._vertices.attributes[Ze+9]=ot/Qe.cols,this._vertices.attributes[Ze+10]=rt/Qe.rows,Ze+=it}handleResize(){const Qe=this._gl;Qe.useProgram(this._program),Qe.viewport(0,0,Qe.canvas.width,Qe.canvas.height),Qe.uniform2f(this._resolutionLocation,Qe.canvas.width,Qe.canvas.height),this.clear()}render(Qe){if(!this._atlas)return;const st=this._gl;st.useProgram(this._program),st.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const Ze=this._vertices.attributesBuffers[this._activeBuffer];let rt=0;for(let ot=0;ot<Qe.lineLengths.length;ot++){const dt=ot*this._terminal.cols*it,ct=this._vertices.attributes.subarray(dt,dt+Qe.lineLengths[ot]*it);Ze.set(ct,rt),rt+=ct.length}st.bindBuffer(st.ARRAY_BUFFER,this._attributesBuffer),st.bufferData(st.ARRAY_BUFFER,Ze.subarray(0,rt),st.STREAM_DRAW);for(let ot=0;ot<this._atlas.pages.length;ot++)this._atlas.pages[ot].version!==this._atlasTextures[ot].version&&this._bindAtlasPageTexture(st,this._atlas,ot);st.drawElementsInstanced(st.TRIANGLE_STRIP,4,st.UNSIGNED_BYTE,0,rt/it)}setAtlas(Qe){this._atlas=Qe;for(const st of this._atlasTextures)st.version=-1}_bindAtlasPageTexture(Qe,st,Ze){Qe.activeTexture(Qe.TEXTURE0+Ze),Qe.bindTexture(Qe.TEXTURE_2D,this._atlasTextures[Ze].texture),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_WRAP_S,Qe.CLAMP_TO_EDGE),Qe.texParameteri(Qe.TEXTURE_2D,Qe.TEXTURE_WRAP_T,Qe.CLAMP_TO_EDGE),Qe.texImage2D(Qe.TEXTURE_2D,0,Qe.RGBA,Qe.RGBA,Qe.UNSIGNED_BYTE,st.pages[Ze].canvas),Qe.generateMipmap(Qe.TEXTURE_2D),this._atlasTextures[Ze].version=st.pages[Ze].version}setDimensions(Qe){this._dimensions=Qe}}De.GlyphRenderer=Xe},742:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.RectangleRenderer=void 0;const Ke=Ge(374),Je=Ge(859),Fe=Ge(310),Ye=Ge(381),et=8*Float32Array.BYTES_PER_ELEMENT;class it{constructor(){this.attributes=new Float32Array(160),this.count=0}}let We=0,p=0,He=0,Be=0,$e=0,Xe=0,tt=0;class Qe extends Je.Disposable{constructor(Ze,rt,ot,dt){super(),this._terminal=Ze,this._gl=rt,this._dimensions=ot,this._themeService=dt,this._vertices=new it,this._verticesCursor=new it;const ct=this._gl;this._program=(0,Ke.throwIfFalsy)((0,Ye.createProgram)(ct,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,Je.toDisposable)(()=>ct.deleteProgram(this._program))),this._projectionLocation=(0,Ke.throwIfFalsy)(ct.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=ct.createVertexArray(),ct.bindVertexArray(this._vertexArrayObject);const lt=new Float32Array([0,0,1,0,0,1,1,1]),ft=ct.createBuffer();this.register((0,Je.toDisposable)(()=>ct.deleteBuffer(ft))),ct.bindBuffer(ct.ARRAY_BUFFER,ft),ct.bufferData(ct.ARRAY_BUFFER,lt,ct.STATIC_DRAW),ct.enableVertexAttribArray(3),ct.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const pt=new Uint8Array([0,1,2,3]),Et=ct.createBuffer();this.register((0,Je.toDisposable)(()=>ct.deleteBuffer(Et))),ct.bindBuffer(ct.ELEMENT_ARRAY_BUFFER,Et),ct.bufferData(ct.ELEMENT_ARRAY_BUFFER,pt,ct.STATIC_DRAW),this._attributesBuffer=(0,Ke.throwIfFalsy)(ct.createBuffer()),this.register((0,Je.toDisposable)(()=>ct.deleteBuffer(this._attributesBuffer))),ct.bindBuffer(ct.ARRAY_BUFFER,this._attributesBuffer),ct.enableVertexAttribArray(0),ct.vertexAttribPointer(0,2,ct.FLOAT,!1,et,0),ct.vertexAttribDivisor(0,1),ct.enableVertexAttribArray(1),ct.vertexAttribPointer(1,2,ct.FLOAT,!1,et,2*Float32Array.BYTES_PER_ELEMENT),ct.vertexAttribDivisor(1,1),ct.enableVertexAttribArray(2),ct.vertexAttribPointer(2,4,ct.FLOAT,!1,et,4*Float32Array.BYTES_PER_ELEMENT),ct.vertexAttribDivisor(2,1),this._updateCachedColors(dt.colors),this.register(this._themeService.onChangeColors(yt=>{this._updateCachedColors(yt),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(Ze){const rt=this._gl;rt.useProgram(this._program),rt.bindVertexArray(this._vertexArrayObject),rt.uniformMatrix4fv(this._projectionLocation,!1,Ye.PROJECTION_MATRIX),rt.bindBuffer(rt.ARRAY_BUFFER,this._attributesBuffer),rt.bufferData(rt.ARRAY_BUFFER,Ze.attributes,rt.DYNAMIC_DRAW),rt.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,rt.UNSIGNED_BYTE,0,Ze.count)}handleResize(){this._updateViewportRectangle()}setDimensions(Ze){this._dimensions=Ze}_updateCachedColors(Ze){this._bgFloat=this._colorToFloat32Array(Ze.background),this._cursorFloat=this._colorToFloat32Array(Ze.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(Ze){const rt=this._terminal,ot=this._vertices;let dt,ct,lt,ft,pt,Et,yt,wt,nt,ht,_t,vt=1;for(dt=0;dt<rt.rows;dt++){for(lt=-1,ft=0,pt=0,Et=!1,ct=0;ct<rt.cols;ct++)yt=(dt*rt.cols+ct)*Fe.RENDER_MODEL_INDICIES_PER_CELL,wt=Ze.cells[yt+Fe.RENDER_MODEL_BG_OFFSET],nt=Ze.cells[yt+Fe.RENDER_MODEL_FG_OFFSET],ht=!!(67108864&nt),(wt!==ft||nt!==pt&&(Et||ht))&&((ft!==0||Et&&pt!==0)&&(_t=8*vt++,this._updateRectangle(ot,_t,pt,ft,lt,ct,dt)),lt=ct,ft=wt,pt=nt,Et=ht);(ft!==0||Et&&pt!==0)&&(_t=8*vt++,this._updateRectangle(ot,_t,pt,ft,lt,rt.cols,dt))}ot.count=vt}updateCursor(Ze){const rt=this._verticesCursor,ot=Ze.cursor;if(!ot||ot.style==="block")return void(rt.count=0);let dt,ct=0;ot.style!=="bar"&&ot.style!=="outline"||(dt=8*ct++,this._addRectangleFloat(rt.attributes,dt,ot.x*this._dimensions.device.cell.width,ot.y*this._dimensions.device.cell.height,ot.style==="bar"?ot.dpr*ot.cursorWidth:ot.dpr,this._dimensions.device.cell.height,this._cursorFloat)),ot.style!=="underline"&&ot.style!=="outline"||(dt=8*ct++,this._addRectangleFloat(rt.attributes,dt,ot.x*this._dimensions.device.cell.width,(ot.y+1)*this._dimensions.device.cell.height-ot.dpr,ot.width*this._dimensions.device.cell.width,ot.dpr,this._cursorFloat)),ot.style==="outline"&&(dt=8*ct++,this._addRectangleFloat(rt.attributes,dt,ot.x*this._dimensions.device.cell.width,ot.y*this._dimensions.device.cell.height,ot.width*this._dimensions.device.cell.width,ot.dpr,this._cursorFloat),dt=8*ct++,this._addRectangleFloat(rt.attributes,dt,(ot.x+ot.width)*this._dimensions.device.cell.width-ot.dpr,ot.y*this._dimensions.device.cell.height,ot.dpr,this._dimensions.device.cell.height,this._cursorFloat)),rt.count=ct}_updateRectangle(Ze,rt,ot,dt,ct,lt,ft){if(67108864&ot)switch(50331648&ot){case 16777216:case 33554432:We=this._themeService.colors.ansi[255&ot].rgba;break;case 50331648:We=(16777215&ot)<<8;break;default:We=this._themeService.colors.foreground.rgba}else switch(50331648&dt){case 16777216:case 33554432:We=this._themeService.colors.ansi[255&dt].rgba;break;case 50331648:We=(16777215&dt)<<8;break;default:We=this._themeService.colors.background.rgba}Ze.attributes.length<rt+4&&(Ze.attributes=(0,Ye.expandFloat32Array)(Ze.attributes,this._terminal.rows*this._terminal.cols*8)),p=ct*this._dimensions.device.cell.width,He=ft*this._dimensions.device.cell.height,Be=(We>>24&255)/255,$e=(We>>16&255)/255,Xe=(We>>8&255)/255,tt=1,this._addRectangle(Ze.attributes,rt,p,He,(lt-ct)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,Be,$e,Xe,tt)}_addRectangle(Ze,rt,ot,dt,ct,lt,ft,pt,Et,yt){Ze[rt]=ot/this._dimensions.device.canvas.width,Ze[rt+1]=dt/this._dimensions.device.canvas.height,Ze[rt+2]=ct/this._dimensions.device.canvas.width,Ze[rt+3]=lt/this._dimensions.device.canvas.height,Ze[rt+4]=ft,Ze[rt+5]=pt,Ze[rt+6]=Et,Ze[rt+7]=yt}_addRectangleFloat(Ze,rt,ot,dt,ct,lt,ft){Ze[rt]=ot/this._dimensions.device.canvas.width,Ze[rt+1]=dt/this._dimensions.device.canvas.height,Ze[rt+2]=ct/this._dimensions.device.canvas.width,Ze[rt+3]=lt/this._dimensions.device.canvas.height,Ze[rt+4]=ft[0],Ze[rt+5]=ft[1],Ze[rt+6]=ft[2],Ze[rt+7]=ft[3]}_colorToFloat32Array(Ze){return new Float32Array([(Ze.rgba>>24&255)/255,(Ze.rgba>>16&255)/255,(Ze.rgba>>8&255)/255,(255&Ze.rgba)/255])}}De.RectangleRenderer=Qe},310:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.RenderModel=De.COMBINED_CHAR_BIT_MASK=De.RENDER_MODEL_EXT_OFFSET=De.RENDER_MODEL_FG_OFFSET=De.RENDER_MODEL_BG_OFFSET=De.RENDER_MODEL_INDICIES_PER_CELL=void 0;const Ke=Ge(296);De.RENDER_MODEL_INDICIES_PER_CELL=4,De.RENDER_MODEL_BG_OFFSET=1,De.RENDER_MODEL_FG_OFFSET=2,De.RENDER_MODEL_EXT_OFFSET=3,De.COMBINED_CHAR_BIT_MASK=2147483648,De.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,Ke.createSelectionRenderModel)()}resize(Je,Fe){const Ye=Je*Fe*De.RENDER_MODEL_INDICIES_PER_CELL;Ye!==this.cells.length&&(this.cells=new Uint32Array(Ye),this.lineLengths=new Uint32Array(Fe))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.JoinedCellData=De.WebglRenderer=void 0;const Ke=Ge(820),Je=Ge(274),Fe=Ge(627),Ye=Ge(457),et=Ge(56),it=Ge(374),We=Ge(345),p=Ge(859),He=Ge(147),Be=Ge(782),$e=Ge(855),Xe=Ge(965),tt=Ge(742),Qe=Ge(310),st=Ge(733);class Ze extends p.Disposable{constructor(ct,lt,ft,pt,Et,yt,wt,nt,ht){super(),this._terminal=ct,this._characterJoinerService=lt,this._charSizeService=ft,this._coreBrowserService=pt,this._coreService=Et,this._decorationService=yt,this._optionsService=wt,this._themeService=nt,this._cursorBlinkStateManager=new p.MutableDisposable,this._charAtlasDisposable=this.register(new p.MutableDisposable),this._observerDisposable=this.register(new p.MutableDisposable),this._model=new Qe.RenderModel,this._workCell=new Be.CellData,this._workCell2=new Be.CellData,this._rectangleRenderer=this.register(new p.MutableDisposable),this._glyphRenderer=this.register(new p.MutableDisposable),this._onChangeTextureAtlas=this.register(new We.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new We.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new We.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new We.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new We.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new Je.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new st.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,wt,this._themeService)],this.dimensions=(0,it.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(wt.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const _t={antialias:!1,depth:!1,preserveDrawingBuffer:ht};if(this._gl=this._canvas.getContext("webgl2",_t),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,Ke.addDisposableDomListener)(this._canvas,"webglcontextlost",vt=>{console.log("webglcontextlost event received"),vt.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(vt)},3e3)})),this.register((0,Ke.addDisposableDomListener)(this._canvas,"webglcontextrestored",vt=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,Fe.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,et.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(vt,Lt)=>this._setCanvasDevicePixelDimensions(vt,Lt)),this.register(this._coreBrowserService.onWindowChange(vt=>{this._observerDisposable.value=(0,et.observeDevicePixelDimensions)(this._canvas,vt,(Lt,Dt)=>this._setCanvasDevicePixelDimensions(Lt,Dt))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,p.toDisposable)(()=>{var vt;for(const Lt of this._renderLayers)Lt.dispose();(vt=this._canvas.parentElement)==null||vt.removeChild(this._canvas),(0,Fe.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var ct;return(ct=this._charAtlas)==null?void 0:ct.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(ct,lt){var ft,pt,Et,yt;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const wt of this._renderLayers)wt.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(ft=this._rectangleRenderer.value)==null||ft.setDimensions(this.dimensions),(pt=this._rectangleRenderer.value)==null||pt.handleResize(),(Et=this._glyphRenderer.value)==null||Et.setDimensions(this.dimensions),(yt=this._glyphRenderer.value)==null||yt.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var ct;for(const lt of this._renderLayers)lt.handleBlur(this._terminal);(ct=this._cursorBlinkStateManager.value)==null||ct.pause(),this._requestRedrawViewport()}handleFocus(){var ct;for(const lt of this._renderLayers)lt.handleFocus(this._terminal);(ct=this._cursorBlinkStateManager.value)==null||ct.resume(),this._requestRedrawViewport()}handleSelectionChanged(ct,lt,ft){for(const pt of this._renderLayers)pt.handleSelectionChanged(this._terminal,ct,lt,ft);this._model.selection.update(this._core,ct,lt,ft),this._requestRedrawViewport()}handleCursorMove(){var ct;for(const lt of this._renderLayers)lt.handleCursorMove(this._terminal);(ct=this._cursorBlinkStateManager.value)==null||ct.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new tt.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new Xe.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var lt;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const ct=(0,Fe.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==ct&&(this._onChangeTextureAtlas.fire(ct.pages[0].canvas),this._charAtlasDisposable.value=(0,p.getDisposeArrayDisposable)([(0,We.forwardEvent)(ct.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,We.forwardEvent)(ct.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=ct,this._charAtlas.warmUp(),(lt=this._glyphRenderer.value)==null||lt.setAtlas(this._charAtlas)}_clearModel(ct){var lt;this._model.clear(),ct&&((lt=this._glyphRenderer.value)==null||lt.clear())}clearTextureAtlas(){var ct;(ct=this._charAtlas)==null||ct.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var ct;this._clearModel(!0);for(const lt of this._renderLayers)lt.reset(this._terminal);(ct=this._cursorBlinkStateManager.value)==null||ct.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(ct){return-1}deregisterCharacterJoiner(ct){return!1}renderRows(ct,lt){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const ft of this._renderLayers)ft.handleGridChanged(this._terminal,ct,lt);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(ct,lt),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new Ye.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(ct,lt){const ft=this._core;let pt,Et,yt,wt,nt,ht,_t,vt,Lt,Dt,Bt,Mt,St,ut,kt=this._workCell;ct=ot(ct,ft.rows-1,0),lt=ot(lt,ft.rows-1,0);const At=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Ot=At-ft.buffer.ydisp,Tt=Math.min(this._terminal.buffer.active.cursorX,ft.cols-1);let Ft=-1;const It=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let zt=!1;for(Et=ct;Et<=lt;Et++)for(yt=Et+ft.buffer.ydisp,wt=ft.buffer.lines.get(yt),this._model.lineLengths[Et]=0,nt=this._characterJoinerService.getJoinedCharacters(yt),St=0;St<ft.cols;St++)if(pt=this._cellColorResolver.result.bg,wt.loadCell(St,kt),St===0&&(pt=this._cellColorResolver.result.bg),ht=!1,_t=St,nt.length>0&&St===nt[0][0]&&(ht=!0,vt=nt.shift(),kt=new rt(kt,wt.translateToString(!0,vt[0],vt[1]),vt[1]-vt[0]),_t=vt[1]-1),Lt=kt.getChars(),Dt=kt.getCode(),Mt=(Et*ft.cols+St)*Qe.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(kt,St,yt,this.dimensions.device.cell.width),It&&yt===At&&(St===Tt&&(this._model.cursor={x:Tt,y:Ot,width:kt.getWidth(),style:this._coreBrowserService.isFocused?ft.options.cursorStyle||"block":ft.options.cursorInactiveStyle,cursorWidth:ft.options.cursorWidth,dpr:this._devicePixelRatio},Ft=Tt+kt.getWidth()-1),St>=Tt&&St<=Ft&&(this._coreBrowserService.isFocused&&(ft.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&ft.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Dt!==$e.NULL_CELL_CODE&&(this._model.lineLengths[Et]=St+1),(this._model.cells[Mt]!==Dt||this._model.cells[Mt+Qe.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Mt+Qe.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Mt+Qe.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(zt=!0,Lt.length>1&&(Dt|=Qe.COMBINED_CHAR_BIT_MASK),this._model.cells[Mt]=Dt,this._model.cells[Mt+Qe.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Mt+Qe.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Mt+Qe.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,Bt=kt.getWidth(),this._glyphRenderer.value.updateCell(St,Et,Dt,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,Lt,Bt,pt),ht))for(kt=this._workCell,St++;St<_t;St++)ut=(Et*ft.cols+St)*Qe.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(St,Et,$e.NULL_CELL_CODE,0,0,0,$e.NULL_CELL_CHAR,0,0),this._model.cells[ut]=$e.NULL_CELL_CODE,this._model.cells[ut+Qe.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[ut+Qe.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[ut+Qe.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;zt&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(ct,lt){this._canvas.width===ct&&this._canvas.height===lt||(this._canvas.width=ct,this._canvas.height=lt,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const ct=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:ct,end:ct})}}De.WebglRenderer=Ze;class rt extends He.AttributeData{constructor(ct,lt,ft){super(),this.content=0,this.combinedData="",this.fg=ct.fg,this.bg=ct.bg,this.combinedData=lt,this._width=ft}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(ct){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function ot(dt,ct,lt=0){return Math.max(Math.min(dt,ct),lt)}De.JoinedCellData=rt},381:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.GLTexture=De.expandFloat32Array=De.createShader=De.createProgram=De.PROJECTION_MATRIX=void 0;const Ke=Ge(374);function Je(Fe,Ye,et){const it=(0,Ke.throwIfFalsy)(Fe.createShader(Ye));if(Fe.shaderSource(it,et),Fe.compileShader(it),Fe.getShaderParameter(it,Fe.COMPILE_STATUS))return it;console.error(Fe.getShaderInfoLog(it)),Fe.deleteShader(it)}De.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),De.createProgram=function(Fe,Ye,et){const it=(0,Ke.throwIfFalsy)(Fe.createProgram());if(Fe.attachShader(it,(0,Ke.throwIfFalsy)(Je(Fe,Fe.VERTEX_SHADER,Ye))),Fe.attachShader(it,(0,Ke.throwIfFalsy)(Je(Fe,Fe.FRAGMENT_SHADER,et))),Fe.linkProgram(it),Fe.getProgramParameter(it,Fe.LINK_STATUS))return it;console.error(Fe.getProgramInfoLog(it)),Fe.deleteProgram(it)},De.createShader=Je,De.expandFloat32Array=function(Fe,Ye){const et=Math.min(2*Fe.length,Ye),it=new Float32Array(et);for(let We=0;We<Fe.length;We++)it[We]=Fe[We];return it},De.GLTexture=class{constructor(Fe){this.texture=Fe,this.version=-1}}},592:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.BaseRenderLayer=void 0;const Ke=Ge(627),Je=Ge(237),Fe=Ge(374),Ye=Ge(859);class et extends Ye.Disposable{constructor(We,p,He,Be,$e,Xe,tt,Qe){super(),this._container=p,this._alpha=$e,this._coreBrowserService=Xe,this._optionsService=tt,this._themeService=Qe,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${He}-layer`),this._canvas.style.zIndex=Be.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(st=>{this._refreshCharAtlas(We,st),this.reset(We)})),this.register((0,Ye.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,Fe.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(We){}handleFocus(We){}handleCursorMove(We){}handleGridChanged(We,p,He){}handleSelectionChanged(We,p,He,Be=!1){}_setTransparency(We,p){if(p===this._alpha)return;const He=this._canvas;this._alpha=p,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,He),this._refreshCharAtlas(We,this._themeService.colors),this.handleGridChanged(We,0,We.rows-1)}_refreshCharAtlas(We,p){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,Ke.acquireTextureAtlas)(We,this._optionsService.rawOptions,p,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(We,p){this._deviceCellWidth=p.device.cell.width,this._deviceCellHeight=p.device.cell.height,this._deviceCharWidth=p.device.char.width,this._deviceCharHeight=p.device.char.height,this._deviceCharLeft=p.device.char.left,this._deviceCharTop=p.device.char.top,this._canvas.width=p.device.canvas.width,this._canvas.height=p.device.canvas.height,this._canvas.style.width=`${p.css.canvas.width}px`,this._canvas.style.height=`${p.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(We,this._themeService.colors)}_fillBottomLineAtCells(We,p,He=1){this._ctx.fillRect(We*this._deviceCellWidth,(p+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,He*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(We,p,He,Be){this._alpha?this._ctx.clearRect(We*this._deviceCellWidth,p*this._deviceCellHeight,He*this._deviceCellWidth,Be*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(We*this._deviceCellWidth,p*this._deviceCellHeight,He*this._deviceCellWidth,Be*this._deviceCellHeight))}_fillCharTrueColor(We,p,He,Be){this._ctx.font=this._getFont(We,!1,!1),this._ctx.textBaseline=Je.TEXT_BASELINE,this._clipCell(He,Be,p.getWidth()),this._ctx.fillText(p.getChars(),He*this._deviceCellWidth+this._deviceCharLeft,Be*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(We,p,He){this._ctx.beginPath(),this._ctx.rect(We*this._deviceCellWidth,p*this._deviceCellHeight,He*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(We,p,He){return`${He?"italic":""} ${p?We.options.fontWeightBold:We.options.fontWeight} ${We.options.fontSize*this._coreBrowserService.dpr}px ${We.options.fontFamily}`}}De.BaseRenderLayer=et},733:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.LinkRenderLayer=void 0;const Ke=Ge(197),Je=Ge(237),Fe=Ge(592);class Ye extends Fe.BaseRenderLayer{constructor(it,We,p,He,Be,$e,Xe){super(p,it,"link",We,!0,Be,$e,Xe),this.register(He.onShowLinkUnderline(tt=>this._handleShowLinkUnderline(tt))),this.register(He.onHideLinkUnderline(tt=>this._handleHideLinkUnderline(tt)))}resize(it,We){super.resize(it,We),this._state=void 0}reset(it){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const it=this._state.y2-this._state.y1-1;it>0&&this._clearCells(0,this._state.y1+1,this._state.cols,it),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(it){if(it.fg===Je.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:it.fg!==void 0&&(0,Ke.is256Color)(it.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[it.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,it.y1===it.y2)this._fillBottomLineAtCells(it.x1,it.y1,it.x2-it.x1);else{this._fillBottomLineAtCells(it.x1,it.y1,it.cols-it.x1);for(let We=it.y1+1;We<it.y2;We++)this._fillBottomLineAtCells(0,We,it.cols);this._fillBottomLineAtCells(0,it.y2,it.x2)}this._state=it}_handleHideLinkUnderline(it){this._clearCurrentLink()}}De.LinkRenderLayer=Ye},820:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.addDisposableDomListener=void 0,De.addDisposableDomListener=function(Ge,Ke,Je,Fe){Ge.addEventListener(Ke,Je,Fe);let Ye=!1;return{dispose:()=>{Ye||(Ye=!0,Ge.removeEventListener(Ke,Je,Fe))}}}},274:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CellColorResolver=void 0;const Ke=Ge(855),Je=Ge(160),Fe=Ge(374);let Ye,et=0,it=0,We=!1,p=!1,He=!1,Be=0;De.CellColorResolver=class{constructor($e,Xe,tt,Qe,st,Ze){this._terminal=$e,this._optionService=Xe,this._selectionRenderModel=tt,this._decorationService=Qe,this._coreBrowserService=st,this._themeService=Ze,this.result={fg:0,bg:0,ext:0}}resolve($e,Xe,tt,Qe){if(this.result.bg=$e.bg,this.result.fg=$e.fg,this.result.ext=268435456&$e.bg?$e.extended.ext:0,it=0,et=0,p=!1,We=!1,He=!1,Ye=this._themeService.colors,Be=0,$e.getCode()!==Ke.NULL_CELL_CODE&&$e.extended.underlineStyle===4){const st=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));Be=Xe*Qe%(2*Math.round(st))}if(this._decorationService.forEachDecorationAtCell(Xe,tt,"bottom",st=>{st.backgroundColorRGB&&(it=st.backgroundColorRGB.rgba>>8&16777215,p=!0),st.foregroundColorRGB&&(et=st.foregroundColorRGB.rgba>>8&16777215,We=!0)}),He=this._selectionRenderModel.isCellSelected(this._terminal,Xe,tt),He){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:it=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:it=(16777215&this.result.fg)<<8|255;break;default:it=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:it=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:it=(16777215&this.result.bg)<<8|255}it=Je.rgba.blend(it,4294967040&(this._coreBrowserService.isFocused?Ye.selectionBackgroundOpaque:Ye.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else it=(this._coreBrowserService.isFocused?Ye.selectionBackgroundOpaque:Ye.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(p=!0,Ye.selectionForeground&&(et=Ye.selectionForeground.rgba>>8&16777215,We=!0),(0,Fe.treatGlyphAsBackgroundColor)($e.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))et=(this._coreBrowserService.isFocused?Ye.selectionBackgroundOpaque:Ye.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:et=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:et=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:et=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:et=(16777215&this.result.fg)<<8|255;break;default:et=this._themeService.colors.foreground.rgba}et=Je.rgba.blend(et,4294967040&(this._coreBrowserService.isFocused?Ye.selectionBackgroundOpaque:Ye.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}We=!0}}this._decorationService.forEachDecorationAtCell(Xe,tt,"top",st=>{st.backgroundColorRGB&&(it=st.backgroundColorRGB.rgba>>8&16777215,p=!0),st.foregroundColorRGB&&(et=st.foregroundColorRGB.rgba>>8&16777215,We=!0)}),p&&(it=He?-16777216&$e.bg&-134217729|it|50331648:-16777216&$e.bg|it|50331648),We&&(et=-16777216&$e.fg&-67108865|et|50331648),67108864&this.result.fg&&(p&&!We&&(et=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&Ye.background.rgba>>8|50331648,We=!0),!p&&We&&(it=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&Ye.foreground.rgba>>8|50331648,p=!0)),Ye=void 0,this.result.bg=p?it:this.result.bg,this.result.fg=We?et:this.result.fg,this.result.ext&=536870911,this.result.ext|=Be<<29&3758096384}}},627:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.removeTerminalFromCache=De.acquireTextureAtlas=void 0;const Ke=Ge(509),Je=Ge(197),Fe=[];De.acquireTextureAtlas=function(Ye,et,it,We,p,He,Be,$e){const Xe=(0,Je.generateConfig)(We,p,He,Be,et,it,$e);for(let st=0;st<Fe.length;st++){const Ze=Fe[st],rt=Ze.ownedBy.indexOf(Ye);if(rt>=0){if((0,Je.configEquals)(Ze.config,Xe))return Ze.atlas;Ze.ownedBy.length===1?(Ze.atlas.dispose(),Fe.splice(st,1)):Ze.ownedBy.splice(rt,1);break}}for(let st=0;st<Fe.length;st++){const Ze=Fe[st];if((0,Je.configEquals)(Ze.config,Xe))return Ze.ownedBy.push(Ye),Ze.atlas}const tt=Ye._core,Qe={atlas:new Ke.TextureAtlas(document,Xe,tt.unicodeService),config:Xe,ownedBy:[Ye]};return Fe.push(Qe),Qe.atlas},De.removeTerminalFromCache=function(Ye){for(let et=0;et<Fe.length;et++){const it=Fe[et].ownedBy.indexOf(Ye);if(it!==-1){Fe[et].ownedBy.length===1?(Fe[et].atlas.dispose(),Fe.splice(et,1)):Fe[et].ownedBy.splice(it,1);break}}}},197:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.is256Color=De.configEquals=De.generateConfig=void 0;const Ke=Ge(160);De.generateConfig=function(Je,Fe,Ye,et,it,We,p){const He={foreground:We.foreground,background:We.background,cursor:Ke.NULL_COLOR,cursorAccent:Ke.NULL_COLOR,selectionForeground:Ke.NULL_COLOR,selectionBackgroundTransparent:Ke.NULL_COLOR,selectionBackgroundOpaque:Ke.NULL_COLOR,selectionInactiveBackgroundTransparent:Ke.NULL_COLOR,selectionInactiveBackgroundOpaque:Ke.NULL_COLOR,ansi:We.ansi.slice(),contrastCache:We.contrastCache,halfContrastCache:We.halfContrastCache};return{customGlyphs:it.customGlyphs,devicePixelRatio:p,letterSpacing:it.letterSpacing,lineHeight:it.lineHeight,deviceCellWidth:Je,deviceCellHeight:Fe,deviceCharWidth:Ye,deviceCharHeight:et,fontFamily:it.fontFamily,fontSize:it.fontSize,fontWeight:it.fontWeight,fontWeightBold:it.fontWeightBold,allowTransparency:it.allowTransparency,drawBoldTextInBrightColors:it.drawBoldTextInBrightColors,minimumContrastRatio:it.minimumContrastRatio,colors:He}},De.configEquals=function(Je,Fe){for(let Ye=0;Ye<Je.colors.ansi.length;Ye++)if(Je.colors.ansi[Ye].rgba!==Fe.colors.ansi[Ye].rgba)return!1;return Je.devicePixelRatio===Fe.devicePixelRatio&&Je.customGlyphs===Fe.customGlyphs&&Je.lineHeight===Fe.lineHeight&&Je.letterSpacing===Fe.letterSpacing&&Je.fontFamily===Fe.fontFamily&&Je.fontSize===Fe.fontSize&&Je.fontWeight===Fe.fontWeight&&Je.fontWeightBold===Fe.fontWeightBold&&Je.allowTransparency===Fe.allowTransparency&&Je.deviceCharWidth===Fe.deviceCharWidth&&Je.deviceCharHeight===Fe.deviceCharHeight&&Je.drawBoldTextInBrightColors===Fe.drawBoldTextInBrightColors&&Je.minimumContrastRatio===Fe.minimumContrastRatio&&Je.colors.foreground.rgba===Fe.colors.foreground.rgba&&Je.colors.background.rgba===Fe.colors.background.rgba},De.is256Color=function(Je){return(50331648&Je)==16777216||(50331648&Je)==33554432}},237:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.TEXT_BASELINE=De.DIM_OPACITY=De.INVERTED_DEFAULT_COLOR=void 0;const Ke=Ge(399);De.INVERTED_DEFAULT_COLOR=257,De.DIM_OPACITY=.5,De.TEXT_BASELINE=Ke.isFirefox||Ke.isLegacyEdge?"bottom":"ideographic"},457:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CursorBlinkStateManager=void 0,De.CursorBlinkStateManager=class{constructor(Ge,Ke){this._renderCallback=Ge,this._coreBrowserService=Ke,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(Ge=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const Ke=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,Ke>0)return void this._restartInterval(Ke)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const Ke=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(Ke)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},Ge)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.tryDrawCustomChar=De.powerlineDefinitions=De.boxDrawingDefinitions=De.blockElementDefinitions=void 0;const Ke=Ge(374);De.blockElementDefinitions={"â":[{x:0,y:0,w:8,h:4}],"â":[{x:0,y:7,w:8,h:1}],"â":[{x:0,y:6,w:8,h:2}],"â":[{x:0,y:5,w:8,h:3}],"â":[{x:0,y:4,w:8,h:4}],"â":[{x:0,y:3,w:8,h:5}],"â":[{x:0,y:2,w:8,h:6}],"â":[{x:0,y:1,w:8,h:7}],"â":[{x:0,y:0,w:8,h:8}],"â":[{x:0,y:0,w:7,h:8}],"â":[{x:0,y:0,w:6,h:8}],"â":[{x:0,y:0,w:5,h:8}],"â":[{x:0,y:0,w:4,h:8}],"â":[{x:0,y:0,w:3,h:8}],"â":[{x:0,y:0,w:2,h:8}],"â":[{x:0,y:0,w:1,h:8}],"â":[{x:4,y:0,w:4,h:8}],"â":[{x:0,y:0,w:8,h:1}],"â":[{x:7,y:0,w:1,h:8}],"â":[{x:0,y:4,w:4,h:4}],"â":[{x:4,y:4,w:4,h:4}],"â":[{x:0,y:0,w:4,h:4}],"â":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"â":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"â":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"â":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"â":[{x:4,y:0,w:4,h:4}],"â":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"â":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"ð­°":[{x:1,y:0,w:1,h:8}],"ð­±":[{x:2,y:0,w:1,h:8}],"ð­²":[{x:3,y:0,w:1,h:8}],"ð­³":[{x:4,y:0,w:1,h:8}],"ð­´":[{x:5,y:0,w:1,h:8}],"ð­µ":[{x:6,y:0,w:1,h:8}],"ð­¶":[{x:0,y:1,w:8,h:1}],"ð­·":[{x:0,y:2,w:8,h:1}],"ð­¸":[{x:0,y:3,w:8,h:1}],"ð­¹":[{x:0,y:4,w:8,h:1}],"ð­º":[{x:0,y:5,w:8,h:1}],"ð­»":[{x:0,y:6,w:8,h:1}],"ð­¼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ð­½":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ð­¾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ð­¿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"ð®":[{x:0,y:0,w:8,h:2}],"ð®":[{x:0,y:0,w:8,h:3}],"ð®":[{x:0,y:0,w:8,h:5}],"ð®":[{x:0,y:0,w:8,h:6}],"ð®":[{x:0,y:0,w:8,h:7}],"ð®":[{x:6,y:0,w:2,h:8}],"ð®":[{x:5,y:0,w:3,h:8}],"ð®":[{x:3,y:0,w:5,h:8}],"ð®":[{x:2,y:0,w:6,h:8}],"ð®":[{x:1,y:0,w:7,h:8}],"ð®":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"ð®":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"ð®":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const Je={"â":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"â":[[1,0],[0,0],[0,1],[0,0]],"â":[[0,1],[1,1],[1,0],[1,1]]};De.boxDrawingDefinitions={"â":{1:"M0,.5 L1,.5"},"â":{3:"M0,.5 L1,.5"},"â":{1:"M.5,0 L.5,1"},"â":{3:"M.5,0 L.5,1"},"â":{1:"M0.5,1 L.5,.5 L1,.5"},"â":{3:"M0.5,1 L.5,.5 L1,.5"},"â":{1:"M0,.5 L.5,.5 L.5,1"},"â":{3:"M0,.5 L.5,.5 L.5,1"},"â":{1:"M.5,0 L.5,.5 L1,.5"},"â":{3:"M.5,0 L.5,.5 L1,.5"},"â":{1:"M.5,0 L.5,.5 L0,.5"},"â":{3:"M.5,0 L.5,.5 L0,.5"},"â":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â£":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â¤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â«":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â¬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â³":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â´":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â»":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â¼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"â":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"â´":{1:"M.5,.5 L0,.5"},"â¸":{3:"M.5,.5 L0,.5"},"âµ":{1:"M.5,.5 L.5,0"},"â¹":{3:"M.5,.5 L.5,0"},"â¶":{1:"M.5,.5 L1,.5"},"âº":{3:"M.5,.5 L1,.5"},"â·":{1:"M.5,.5 L.5,1"},"â»":{3:"M.5,.5 L.5,1"},"â":{1:(We,p)=>`M0,${.5-p} L1,${.5-p} M0,${.5+p} L1,${.5+p}`},"â":{1:(We,p)=>`M${.5-We},0 L${.5-We},1 M${.5+We},0 L${.5+We},1`},"â":{1:(We,p)=>`M.5,1 L.5,${.5-p} L1,${.5-p} M.5,${.5+p} L1,${.5+p}`},"â":{1:(We,p)=>`M${.5-We},1 L${.5-We},.5 L1,.5 M${.5+We},.5 L${.5+We},1`},"â":{1:(We,p)=>`M1,${.5-p} L${.5-We},${.5-p} L${.5-We},1 M1,${.5+p} L${.5+We},${.5+p} L${.5+We},1`},"â":{1:(We,p)=>`M0,${.5-p} L.5,${.5-p} L.5,1 M0,${.5+p} L.5,${.5+p}`},"â":{1:(We,p)=>`M${.5+We},1 L${.5+We},.5 L0,.5 M${.5-We},.5 L${.5-We},1`},"â":{1:(We,p)=>`M0,${.5+p} L${.5-We},${.5+p} L${.5-We},1 M0,${.5-p} L${.5+We},${.5-p} L${.5+We},1`},"â":{1:(We,p)=>`M.5,0 L.5,${.5+p} L1,${.5+p} M.5,${.5-p} L1,${.5-p}`},"â":{1:(We,p)=>`M1,.5 L${.5-We},.5 L${.5-We},0 M${.5+We},.5 L${.5+We},0`},"â":{1:(We,p)=>`M1,${.5-p} L${.5+We},${.5-p} L${.5+We},0 M1,${.5+p} L${.5-We},${.5+p} L${.5-We},0`},"â":{1:(We,p)=>`M0,${.5+p} L.5,${.5+p} L.5,0 M0,${.5-p} L.5,${.5-p}`},"â":{1:(We,p)=>`M0,.5 L${.5+We},.5 L${.5+We},0 M${.5-We},.5 L${.5-We},0`},"â":{1:(We,p)=>`M0,${.5-p} L${.5-We},${.5-p} L${.5-We},0 M0,${.5+p} L${.5+We},${.5+p} L${.5+We},0`},"â":{1:(We,p)=>`M.5,0 L.5,1 M.5,${.5-p} L1,${.5-p} M.5,${.5+p} L1,${.5+p}`},"â":{1:(We,p)=>`M${.5-We},0 L${.5-We},1 M${.5+We},0 L${.5+We},1 M${.5+We},.5 L1,.5`},"â ":{1:(We,p)=>`M${.5-We},0 L${.5-We},1 M1,${.5+p} L${.5+We},${.5+p} L${.5+We},1 M1,${.5-p} L${.5+We},${.5-p} L${.5+We},0`},"â¡":{1:(We,p)=>`M.5,0 L.5,1 M0,${.5-p} L.5,${.5-p} M0,${.5+p} L.5,${.5+p}`},"â¢":{1:(We,p)=>`M0,.5 L${.5-We},.5 M${.5-We},0 L${.5-We},1 M${.5+We},0 L${.5+We},1`},"â£":{1:(We,p)=>`M${.5+We},0 L${.5+We},1 M0,${.5+p} L${.5-We},${.5+p} L${.5-We},1 M0,${.5-p} L${.5-We},${.5-p} L${.5-We},0`},"â¤":{1:(We,p)=>`M0,${.5-p} L1,${.5-p} M0,${.5+p} L1,${.5+p} M.5,${.5+p} L.5,1`},"â¥":{1:(We,p)=>`M0,.5 L1,.5 M${.5-We},.5 L${.5-We},1 M${.5+We},.5 L${.5+We},1`},"â¦":{1:(We,p)=>`M0,${.5-p} L1,${.5-p} M0,${.5+p} L${.5-We},${.5+p} L${.5-We},1 M1,${.5+p} L${.5+We},${.5+p} L${.5+We},1`},"â§":{1:(We,p)=>`M.5,0 L.5,${.5-p} M0,${.5-p} L1,${.5-p} M0,${.5+p} L1,${.5+p}`},"â¨":{1:(We,p)=>`M0,.5 L1,.5 M${.5-We},.5 L${.5-We},0 M${.5+We},.5 L${.5+We},0`},"â©":{1:(We,p)=>`M0,${.5+p} L1,${.5+p} M0,${.5-p} L${.5-We},${.5-p} L${.5-We},0 M1,${.5-p} L${.5+We},${.5-p} L${.5+We},0`},"âª":{1:(We,p)=>`M.5,0 L.5,1 M0,${.5-p} L1,${.5-p} M0,${.5+p} L1,${.5+p}`},"â«":{1:(We,p)=>`M0,.5 L1,.5 M${.5-We},0 L${.5-We},1 M${.5+We},0 L${.5+We},1`},"â¬":{1:(We,p)=>`M0,${.5+p} L${.5-We},${.5+p} L${.5-We},1 M1,${.5+p} L${.5+We},${.5+p} L${.5+We},1 M0,${.5-p} L${.5-We},${.5-p} L${.5-We},0 M1,${.5-p} L${.5+We},${.5-p} L${.5+We},0`},"â±":{1:"M1,0 L0,1"},"â²":{1:"M0,0 L1,1"},"â³":{1:"M1,0 L0,1 M0,0 L1,1"},"â¼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â½":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"â¾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â¿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"â":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"â":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"â":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"â":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"â":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â ":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"â¡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â¢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"â¥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"â¦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â§":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â¨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"â©":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"âª":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"â­":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â®":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â¯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"â°":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â±":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â²":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"âµ":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â¶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â·":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"â¸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"â¹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"âº":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"â½":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â¾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â¿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"â":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"â":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"â":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"â":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"â":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â­":{1:(We,p)=>`M.5,1 L.5,${.5+p/.15*.5} C.5,${.5+p/.15*.5},.5,.5,1,.5`},"â®":{1:(We,p)=>`M.5,1 L.5,${.5+p/.15*.5} C.5,${.5+p/.15*.5},.5,.5,0,.5`},"â¯":{1:(We,p)=>`M.5,0 L.5,${.5-p/.15*.5} C.5,${.5-p/.15*.5},.5,.5,0,.5`},"â°":{1:(We,p)=>`M.5,0 L.5,${.5-p/.15*.5} C.5,${.5-p/.15*.5},.5,.5,1,.5`}},De.powerlineDefinitions={"î°":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"î±":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"î²":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"î³":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"î´":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"îµ":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"î¶":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"î·":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"î¸":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"î¹":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"îº":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"î¼":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"î½":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"î¾":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},De.powerlineDefinitions["î»"]=De.powerlineDefinitions["î½"],De.powerlineDefinitions["î¿"]=De.powerlineDefinitions["î¹"],De.tryDrawCustomChar=function(We,p,He,Be,$e,Xe,tt,Qe){const st=De.blockElementDefinitions[p];if(st)return function(dt,ct,lt,ft,pt,Et){for(let yt=0;yt<ct.length;yt++){const wt=ct[yt],nt=pt/8,ht=Et/8;dt.fillRect(lt+wt.x*nt,ft+wt.y*ht,wt.w*nt,wt.h*ht)}}(We,st,He,Be,$e,Xe),!0;const Ze=Je[p];if(Ze)return function(dt,ct,lt,ft,pt,Et){let yt=Fe.get(ct);yt||(yt=new Map,Fe.set(ct,yt));const wt=dt.fillStyle;if(typeof wt!="string")throw new Error(`Unexpected fillStyle type "${wt}"`);let nt=yt.get(wt);if(!nt){const ht=ct[0].length,_t=ct.length,vt=dt.canvas.ownerDocument.createElement("canvas");vt.width=ht,vt.height=_t;const Lt=(0,Ke.throwIfFalsy)(vt.getContext("2d")),Dt=new ImageData(ht,_t);let Bt,Mt,St,ut;if(wt.startsWith("#"))Bt=parseInt(wt.slice(1,3),16),Mt=parseInt(wt.slice(3,5),16),St=parseInt(wt.slice(5,7),16),ut=wt.length>7&&parseInt(wt.slice(7,9),16)||1;else{if(!wt.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${wt}" when drawing pattern glyph`);[Bt,Mt,St,ut]=wt.substring(5,wt.length-1).split(",").map(kt=>parseFloat(kt))}for(let kt=0;kt<_t;kt++)for(let At=0;At<ht;At++)Dt.data[4*(kt*ht+At)]=Bt,Dt.data[4*(kt*ht+At)+1]=Mt,Dt.data[4*(kt*ht+At)+2]=St,Dt.data[4*(kt*ht+At)+3]=ct[kt][At]*(255*ut);Lt.putImageData(Dt,0,0),nt=(0,Ke.throwIfFalsy)(dt.createPattern(vt,null)),yt.set(wt,nt)}dt.fillStyle=nt,dt.fillRect(lt,ft,pt,Et)}(We,Ze,He,Be,$e,Xe),!0;const rt=De.boxDrawingDefinitions[p];if(rt)return function(dt,ct,lt,ft,pt,Et,yt){dt.strokeStyle=dt.fillStyle;for(const[wt,nt]of Object.entries(ct)){let ht;dt.beginPath(),dt.lineWidth=yt*Number.parseInt(wt),ht=typeof nt=="function"?nt(.15,.15/Et*pt):nt;for(const _t of ht.split(" ")){const vt=_t[0],Lt=et[vt];if(!Lt){console.error(`Could not find drawing instructions for "${vt}"`);continue}const Dt=_t.substring(1).split(",");Dt[0]&&Dt[1]&&Lt(dt,it(Dt,pt,Et,lt,ft,!0,yt))}dt.stroke(),dt.closePath()}}(We,rt,He,Be,$e,Xe,Qe),!0;const ot=De.powerlineDefinitions[p];return!!ot&&(function(dt,ct,lt,ft,pt,Et,yt,wt){const nt=new Path2D;nt.rect(lt,ft,pt,Et),dt.clip(nt),dt.beginPath();const ht=yt/12;dt.lineWidth=wt*ht;for(const _t of ct.d.split(" ")){const vt=_t[0],Lt=et[vt];if(!Lt){console.error(`Could not find drawing instructions for "${vt}"`);continue}const Dt=_t.substring(1).split(",");Dt[0]&&Dt[1]&&Lt(dt,it(Dt,pt,Et,lt,ft,!1,wt,(ct.leftPadding??0)*(ht/2),(ct.rightPadding??0)*(ht/2)))}ct.type===1?(dt.strokeStyle=dt.fillStyle,dt.stroke()):dt.fill(),dt.closePath()}(We,ot,He,Be,$e,Xe,tt,Qe),!0)};const Fe=new Map;function Ye(We,p,He=0){return Math.max(Math.min(We,p),He)}const et={C:(We,p)=>We.bezierCurveTo(p[0],p[1],p[2],p[3],p[4],p[5]),L:(We,p)=>We.lineTo(p[0],p[1]),M:(We,p)=>We.moveTo(p[0],p[1])};function it(We,p,He,Be,$e,Xe,tt,Qe=0,st=0){const Ze=We.map(rt=>parseFloat(rt)||parseInt(rt));if(Ze.length<2)throw new Error("Too few arguments for instruction");for(let rt=0;rt<Ze.length;rt+=2)Ze[rt]*=p-Qe*tt-st*tt,Xe&&Ze[rt]!==0&&(Ze[rt]=Ye(Math.round(Ze[rt]+.5)-.5,p,0)),Ze[rt]+=Be+Qe*tt;for(let rt=1;rt<Ze.length;rt+=2)Ze[rt]*=He,Xe&&Ze[rt]!==0&&(Ze[rt]=Ye(Math.round(Ze[rt]+.5)-.5,He,0)),Ze[rt]+=$e;return Ze}},56:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.observeDevicePixelDimensions=void 0;const Ke=Ge(859);De.observeDevicePixelDimensions=function(Je,Fe,Ye){let et=new Fe.ResizeObserver(it=>{const We=it.find(Be=>Be.target===Je);if(!We)return;if(!("devicePixelContentBoxSize"in We))return et==null||et.disconnect(),void(et=void 0);const p=We.devicePixelContentBoxSize[0].inlineSize,He=We.devicePixelContentBoxSize[0].blockSize;p>0&&He>0&&Ye(p,He)});try{et.observe(Je,{box:["device-pixel-content-box"]})}catch{et.disconnect(),et=void 0}return(0,Ke.toDisposable)(()=>et==null?void 0:et.disconnect())}},374:(gt,De)=>{function Ge(Je){return 57508<=Je&&Je<=57558}function Ke(Je){return Je>=128512&&Je<=128591||Je>=127744&&Je<=128511||Je>=128640&&Je<=128767||Je>=9728&&Je<=9983||Je>=9984&&Je<=10175||Je>=65024&&Je<=65039||Je>=129280&&Je<=129535||Je>=127462&&Je<=127487}Object.defineProperty(De,"__esModule",{value:!0}),De.computeNextVariantOffset=De.createRenderDimensions=De.treatGlyphAsBackgroundColor=De.allowRescaling=De.isEmoji=De.isRestrictedPowerlineGlyph=De.isPowerlineGlyph=De.throwIfFalsy=void 0,De.throwIfFalsy=function(Je){if(!Je)throw new Error("value must not be falsy");return Je},De.isPowerlineGlyph=Ge,De.isRestrictedPowerlineGlyph=function(Je){return 57520<=Je&&Je<=57527},De.isEmoji=Ke,De.allowRescaling=function(Je,Fe,Ye,et){return Fe===1&&Ye>Math.ceil(1.5*et)&&Je!==void 0&&Je>255&&!Ke(Je)&&!Ge(Je)&&!function(it){return 57344<=it&&it<=63743}(Je)},De.treatGlyphAsBackgroundColor=function(Je){return Ge(Je)||function(Fe){return 9472<=Fe&&Fe<=9631}(Je)},De.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},De.computeNextVariantOffset=function(Je,Fe,Ye=0){return(Je-(2*Math.round(Fe)-Ye))%(2*Math.round(Fe))}},296:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.createSelectionRenderModel=void 0;class Ge{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(Je,Fe,Ye,et=!1){if(this.selectionStart=Fe,this.selectionEnd=Ye,!Fe||!Ye||Fe[0]===Ye[0]&&Fe[1]===Ye[1])return void this.clear();const it=Je.buffers.active.ydisp,We=Fe[1]-it,p=Ye[1]-it,He=Math.max(We,0),Be=Math.min(p,Je.rows-1);He>=Je.rows||Be<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=et,this.viewportStartRow=We,this.viewportEndRow=p,this.viewportCappedStartRow=He,this.viewportCappedEndRow=Be,this.startCol=Fe[0],this.endCol=Ye[0])}isCellSelected(Je,Fe,Ye){return!!this.hasSelection&&(Ye-=Je.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?Fe>=this.startCol&&Ye>=this.viewportCappedStartRow&&Fe<this.endCol&&Ye<=this.viewportCappedEndRow:Fe<this.startCol&&Ye>=this.viewportCappedStartRow&&Fe>=this.endCol&&Ye<=this.viewportCappedEndRow:Ye>this.viewportStartRow&&Ye<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&Ye===this.viewportStartRow&&Fe>=this.startCol&&Fe<this.endCol||this.viewportStartRow<this.viewportEndRow&&Ye===this.viewportEndRow&&Fe<this.endCol||this.viewportStartRow<this.viewportEndRow&&Ye===this.viewportStartRow&&Fe>=this.startCol)}}De.createSelectionRenderModel=function(){return new Ge}},509:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.TextureAtlas=void 0;const Ke=Ge(237),Je=Ge(860),Fe=Ge(374),Ye=Ge(160),et=Ge(345),it=Ge(485),We=Ge(385),p=Ge(147),He=Ge(855),Be={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let $e;class Xe{get pages(){return this._pages}constructor(rt,ot,dt){this._document=rt,this._config=ot,this._unicodeService=dt,this._didWarmUp=!1,this._cacheMap=new it.FourKeyMap,this._cacheMapCombined=new it.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new p.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new et.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new et.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=st(rt,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,Fe.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const rt of this.pages)rt.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const rt=new We.IdleTaskQueue;for(let ot=33;ot<126;ot++)rt.enqueue(()=>{if(!this._cacheMap.get(ot,He.DEFAULT_COLOR,He.DEFAULT_COLOR,He.DEFAULT_EXT)){const dt=this._drawToCache(ot,He.DEFAULT_COLOR,He.DEFAULT_COLOR,He.DEFAULT_EXT);this._cacheMap.set(ot,He.DEFAULT_COLOR,He.DEFAULT_COLOR,He.DEFAULT_EXT,dt)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const rt of this._pages)rt.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(Xe.maxAtlasPages&&this._pages.length>=Math.max(4,Xe.maxAtlasPages)){const ot=this._pages.filter(yt=>2*yt.canvas.width<=(Xe.maxTextureSize||4096)).sort((yt,wt)=>wt.canvas.width!==yt.canvas.width?wt.canvas.width-yt.canvas.width:wt.percentageUsed-yt.percentageUsed);let dt=-1,ct=0;for(let yt=0;yt<ot.length;yt++)if(ot[yt].canvas.width!==ct)dt=yt,ct=ot[yt].canvas.width;else if(yt-dt==3)break;const lt=ot.slice(dt,dt+4),ft=lt.map(yt=>yt.glyphs[0].texturePage).sort((yt,wt)=>yt>wt?1:-1),pt=this.pages.length-lt.length,Et=this._mergePages(lt,pt);Et.version++;for(let yt=ft.length-1;yt>=0;yt--)this._deletePage(ft[yt]);this.pages.push(Et),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(Et.canvas)}const rt=new tt(this._document,this._textureSize);return this._pages.push(rt),this._activePages.push(rt),this._onAddTextureAtlasCanvas.fire(rt.canvas),rt}_mergePages(rt,ot){const dt=2*rt[0].canvas.width,ct=new tt(this._document,dt,rt);for(const[lt,ft]of rt.entries()){const pt=lt*ft.canvas.width%dt,Et=Math.floor(lt/2)*ft.canvas.height;ct.ctx.drawImage(ft.canvas,pt,Et);for(const wt of ft.glyphs)wt.texturePage=ot,wt.sizeClipSpace.x=wt.size.x/dt,wt.sizeClipSpace.y=wt.size.y/dt,wt.texturePosition.x+=pt,wt.texturePosition.y+=Et,wt.texturePositionClipSpace.x=wt.texturePosition.x/dt,wt.texturePositionClipSpace.y=wt.texturePosition.y/dt;this._onRemoveTextureAtlasCanvas.fire(ft.canvas);const yt=this._activePages.indexOf(ft);yt!==-1&&this._activePages.splice(yt,1)}return ct}_deletePage(rt){this._pages.splice(rt,1);for(let ot=rt;ot<this._pages.length;ot++){const dt=this._pages[ot];for(const ct of dt.glyphs)ct.texturePage--;dt.version++}}getRasterizedGlyphCombinedChar(rt,ot,dt,ct,lt){return this._getFromCacheMap(this._cacheMapCombined,rt,ot,dt,ct,lt)}getRasterizedGlyph(rt,ot,dt,ct,lt){return this._getFromCacheMap(this._cacheMap,rt,ot,dt,ct,lt)}_getFromCacheMap(rt,ot,dt,ct,lt,ft=!1){return $e=rt.get(ot,dt,ct,lt),$e||($e=this._drawToCache(ot,dt,ct,lt,ft),rt.set(ot,dt,ct,lt,$e)),$e}_getColorFromAnsiIndex(rt){if(rt>=this._config.colors.ansi.length)throw new Error("No color found for idx "+rt);return this._config.colors.ansi[rt]}_getBackgroundColor(rt,ot,dt,ct){if(this._config.allowTransparency)return Ye.NULL_COLOR;let lt;switch(rt){case 16777216:case 33554432:lt=this._getColorFromAnsiIndex(ot);break;case 50331648:const ft=p.AttributeData.toColorRGB(ot);lt=Ye.channels.toColor(ft[0],ft[1],ft[2]);break;default:lt=dt?Ye.color.opaque(this._config.colors.foreground):this._config.colors.background}return lt}_getForegroundColor(rt,ot,dt,ct,lt,ft,pt,Et,yt,wt){const nt=this._getMinimumContrastColor(rt,ot,dt,ct,lt,ft,pt,yt,Et,wt);if(nt)return nt;let ht;switch(lt){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&yt&&ft<8&&(ft+=8),ht=this._getColorFromAnsiIndex(ft);break;case 50331648:const _t=p.AttributeData.toColorRGB(ft);ht=Ye.channels.toColor(_t[0],_t[1],_t[2]);break;default:ht=pt?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(ht=Ye.color.opaque(ht)),Et&&(ht=Ye.color.multiplyOpacity(ht,Ke.DIM_OPACITY)),ht}_resolveBackgroundRgba(rt,ot,dt){switch(rt){case 16777216:case 33554432:return this._getColorFromAnsiIndex(ot).rgba;case 50331648:return ot<<8;default:return dt?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(rt,ot,dt,ct){switch(rt){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&ct&&ot<8&&(ot+=8),this._getColorFromAnsiIndex(ot).rgba;case 50331648:return ot<<8;default:return dt?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(rt,ot,dt,ct,lt,ft,pt,Et,yt,wt){if(this._config.minimumContrastRatio===1||wt)return;const nt=this._getContrastCache(yt),ht=nt.getColor(rt,ct);if(ht!==void 0)return ht||void 0;const _t=this._resolveBackgroundRgba(ot,dt,pt),vt=this._resolveForegroundRgba(lt,ft,pt,Et),Lt=Ye.rgba.ensureContrastRatio(_t,vt,this._config.minimumContrastRatio/(yt?2:1));if(!Lt)return void nt.setColor(rt,ct,null);const Dt=Ye.channels.toColor(Lt>>24&255,Lt>>16&255,Lt>>8&255);return nt.setColor(rt,ct,Dt),Dt}_getContrastCache(rt){return rt?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(rt,ot,dt,ct,lt=!1){const ft=typeof rt=="number"?String.fromCharCode(rt):rt,pt=Math.min(this._config.deviceCellWidth*Math.max(ft.length,2)+4,this._textureSize);this._tmpCanvas.width<pt&&(this._tmpCanvas.width=pt);const Et=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<Et&&(this._tmpCanvas.height=Et),this._tmpCtx.save(),this._workAttributeData.fg=dt,this._workAttributeData.bg=ot,this._workAttributeData.extended.ext=ct,this._workAttributeData.isInvisible())return Be;const yt=!!this._workAttributeData.isBold(),wt=!!this._workAttributeData.isInverse(),nt=!!this._workAttributeData.isDim(),ht=!!this._workAttributeData.isItalic(),_t=!!this._workAttributeData.isUnderline(),vt=!!this._workAttributeData.isStrikethrough(),Lt=!!this._workAttributeData.isOverline();let Dt=this._workAttributeData.getFgColor(),Bt=this._workAttributeData.getFgColorMode(),Mt=this._workAttributeData.getBgColor(),St=this._workAttributeData.getBgColorMode();if(wt){const Pt=Dt;Dt=Mt,Mt=Pt;const Ut=Bt;Bt=St,St=Ut}const ut=this._getBackgroundColor(St,Mt,wt,nt);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=ut.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const kt=yt?this._config.fontWeightBold:this._config.fontWeight,At=ht?"italic":"";this._tmpCtx.font=`${At} ${kt} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=Ke.TEXT_BASELINE;const Ot=ft.length===1&&(0,Fe.isPowerlineGlyph)(ft.charCodeAt(0)),Tt=ft.length===1&&(0,Fe.isRestrictedPowerlineGlyph)(ft.charCodeAt(0)),Ft=this._getForegroundColor(ot,St,Mt,dt,Bt,Dt,wt,nt,yt,(0,Fe.treatGlyphAsBackgroundColor)(ft.charCodeAt(0)));this._tmpCtx.fillStyle=Ft.css;const It=Tt?0:4;let zt=!1;this._config.customGlyphs!==!1&&(zt=(0,Je.tryDrawCustomChar)(this._tmpCtx,ft,It,It,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Kt,$t=!Ot;if(Kt=typeof rt=="number"?this._unicodeService.wcwidth(rt):this._unicodeService.getStringCellWidth(rt),_t){this._tmpCtx.save();const Pt=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Ut=Pt%2==1?.5:0;if(this._tmpCtx.lineWidth=Pt,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())$t=!1,this._tmpCtx.strokeStyle=`rgb(${p.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{$t=!1;let Xt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Xt<8&&(Xt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Xt).css}this._tmpCtx.beginPath();const Gt=It,Vt=Math.ceil(It+this._config.deviceCharHeight)-Ut-(lt?2*Pt:0),Qt=Vt+Pt,Yt=Vt+2*Pt;let Jt=this._workAttributeData.getUnderlineVariantOffset();for(let Xt=0;Xt<Kt;Xt++){this._tmpCtx.save();const qt=Gt+Xt*this._config.deviceCellWidth,Ht=Gt+(Xt+1)*this._config.deviceCellWidth,ti=qt+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(qt,Vt),this._tmpCtx.lineTo(Ht,Vt),this._tmpCtx.moveTo(qt,Yt),this._tmpCtx.lineTo(Ht,Yt);break;case 3:const ii=Pt<=1?Yt:Math.ceil(It+this._config.deviceCharHeight-Pt/2)-Ut,ri=Pt<=1?Vt:Math.ceil(It+this._config.deviceCharHeight+Pt/2)-Ut,oi=new Path2D;oi.rect(qt,Vt,this._config.deviceCellWidth,Yt-Vt),this._tmpCtx.clip(oi),this._tmpCtx.moveTo(qt-this._config.deviceCellWidth/2,Qt),this._tmpCtx.bezierCurveTo(qt-this._config.deviceCellWidth/2,ri,qt,ri,qt,Qt),this._tmpCtx.bezierCurveTo(qt,ii,ti,ii,ti,Qt),this._tmpCtx.bezierCurveTo(ti,ri,Ht,ri,Ht,Qt),this._tmpCtx.bezierCurveTo(Ht,ii,Ht+this._config.deviceCellWidth/2,ii,Ht+this._config.deviceCellWidth/2,Qt);break;case 4:const si=Jt===0?0:Jt>=Pt?2*Pt-Jt:Pt-Jt;Jt>=Pt||si===0?(this._tmpCtx.setLineDash([Math.round(Pt),Math.round(Pt)]),this._tmpCtx.moveTo(qt+si,Vt),this._tmpCtx.lineTo(Ht,Vt)):(this._tmpCtx.setLineDash([Math.round(Pt),Math.round(Pt)]),this._tmpCtx.moveTo(qt,Vt),this._tmpCtx.lineTo(qt+si,Vt),this._tmpCtx.moveTo(qt+si+Pt,Vt),this._tmpCtx.lineTo(Ht,Vt)),Jt=(0,Fe.computeNextVariantOffset)(Ht-qt,Pt,Jt);break;case 5:const li=.6,di=.3,ni=Ht-qt,ai=Math.floor(li*ni),hi=Math.floor(di*ni),ui=ni-ai-hi;this._tmpCtx.setLineDash([ai,hi,ui]),this._tmpCtx.moveTo(qt,Vt),this._tmpCtx.lineTo(Ht,Vt);break;default:this._tmpCtx.moveTo(qt,Vt),this._tmpCtx.lineTo(Ht,Vt)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!zt&&this._config.fontSize>=12&&!this._config.allowTransparency&&ft!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const Xt=this._tmpCtx.measureText(ft);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Xt&&Xt.actualBoundingBoxDescent>0){this._tmpCtx.save();const qt=new Path2D;qt.rect(Gt,Vt-Math.ceil(Pt/2),this._config.deviceCellWidth*Kt,Yt-Vt+Math.ceil(Pt/2)),this._tmpCtx.clip(qt),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=ut.css,this._tmpCtx.strokeText(ft,It,It+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(Lt){const Pt=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),Ut=Pt%2==1?.5:0;this._tmpCtx.lineWidth=Pt,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(It,It+Ut),this._tmpCtx.lineTo(It+this._config.deviceCharWidth*Kt,It+Ut),this._tmpCtx.stroke()}if(zt||this._tmpCtx.fillText(ft,It,It+this._config.deviceCharHeight),ft==="_"&&!this._config.allowTransparency){let Pt=Qe(this._tmpCtx.getImageData(It,It,this._config.deviceCellWidth,this._config.deviceCellHeight),ut,Ft,$t);if(Pt)for(let Ut=1;Ut<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=ut.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(ft,It,It+this._config.deviceCharHeight-Ut),Pt=Qe(this._tmpCtx.getImageData(It,It,this._config.deviceCellWidth,this._config.deviceCellHeight),ut,Ft,$t),Pt);Ut++);}if(vt){const Pt=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),Ut=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=Pt,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(It,It+Math.floor(this._config.deviceCharHeight/2)-Ut),this._tmpCtx.lineTo(It+this._config.deviceCharWidth*Kt,It+Math.floor(this._config.deviceCharHeight/2)-Ut),this._tmpCtx.stroke()}this._tmpCtx.restore();const Zt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let ei;if(ei=this._config.allowTransparency?function(Pt){for(let Ut=0;Ut<Pt.data.length;Ut+=4)if(Pt.data[Ut+3]>0)return!1;return!0}(Zt):Qe(Zt,ut,Ft,$t),ei)return Be;const jt=this._findGlyphBoundingBox(Zt,this._workBoundingBox,pt,Tt,zt,It);let Nt,Wt;for(;;){if(this._activePages.length===0){const Pt=this._createNewPage();Nt=Pt,Wt=Pt.currentRow,Wt.height=jt.size.y;break}Nt=this._activePages[this._activePages.length-1],Wt=Nt.currentRow;for(const Pt of this._activePages)jt.size.y<=Pt.currentRow.height&&(Nt=Pt,Wt=Pt.currentRow);for(let Pt=this._activePages.length-1;Pt>=0;Pt--)for(const Ut of this._activePages[Pt].fixedRows)Ut.height<=Wt.height&&jt.size.y<=Ut.height&&(Nt=this._activePages[Pt],Wt=Ut);if(Wt.y+jt.size.y>=Nt.canvas.height||Wt.height>jt.size.y+2){let Pt=!1;if(Nt.currentRow.y+Nt.currentRow.height+jt.size.y>=Nt.canvas.height){let Ut;for(const Gt of this._activePages)if(Gt.currentRow.y+Gt.currentRow.height+jt.size.y<Gt.canvas.height){Ut=Gt;break}if(Ut)Nt=Ut;else if(Xe.maxAtlasPages&&this._pages.length>=Xe.maxAtlasPages&&Wt.y+jt.size.y<=Nt.canvas.height&&Wt.height>=jt.size.y&&Wt.x+jt.size.x<=Nt.canvas.width)Pt=!0;else{const Gt=this._createNewPage();Nt=Gt,Wt=Gt.currentRow,Wt.height=jt.size.y,Pt=!0}}Pt||(Nt.currentRow.height>0&&Nt.fixedRows.push(Nt.currentRow),Wt={x:0,y:Nt.currentRow.y+Nt.currentRow.height,height:jt.size.y},Nt.fixedRows.push(Wt),Nt.currentRow={x:0,y:Wt.y+Wt.height,height:0})}if(Wt.x+jt.size.x<=Nt.canvas.width)break;Wt===Nt.currentRow?(Wt.x=0,Wt.y+=Wt.height,Wt.height=0):Nt.fixedRows.splice(Nt.fixedRows.indexOf(Wt),1)}return jt.texturePage=this._pages.indexOf(Nt),jt.texturePosition.x=Wt.x,jt.texturePosition.y=Wt.y,jt.texturePositionClipSpace.x=Wt.x/Nt.canvas.width,jt.texturePositionClipSpace.y=Wt.y/Nt.canvas.height,jt.sizeClipSpace.x/=Nt.canvas.width,jt.sizeClipSpace.y/=Nt.canvas.height,Wt.height=Math.max(Wt.height,jt.size.y),Wt.x+=jt.size.x,Nt.ctx.putImageData(Zt,jt.texturePosition.x-this._workBoundingBox.left,jt.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,jt.size.x,jt.size.y),Nt.addGlyph(jt),Nt.version++,jt}_findGlyphBoundingBox(rt,ot,dt,ct,lt,ft){ot.top=0;const pt=ct?this._config.deviceCellHeight:this._tmpCanvas.height,Et=ct?this._config.deviceCellWidth:dt;let yt=!1;for(let wt=0;wt<pt;wt++){for(let nt=0;nt<Et;nt++){const ht=wt*this._tmpCanvas.width*4+4*nt+3;if(rt.data[ht]!==0){ot.top=wt,yt=!0;break}}if(yt)break}ot.left=0,yt=!1;for(let wt=0;wt<ft+Et;wt++){for(let nt=0;nt<pt;nt++){const ht=nt*this._tmpCanvas.width*4+4*wt+3;if(rt.data[ht]!==0){ot.left=wt,yt=!0;break}}if(yt)break}ot.right=Et,yt=!1;for(let wt=ft+Et-1;wt>=ft;wt--){for(let nt=0;nt<pt;nt++){const ht=nt*this._tmpCanvas.width*4+4*wt+3;if(rt.data[ht]!==0){ot.right=wt,yt=!0;break}}if(yt)break}ot.bottom=pt,yt=!1;for(let wt=pt-1;wt>=0;wt--){for(let nt=0;nt<Et;nt++){const ht=wt*this._tmpCanvas.width*4+4*nt+3;if(rt.data[ht]!==0){ot.bottom=wt,yt=!0;break}}if(yt)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:ot.right-ot.left+1,y:ot.bottom-ot.top+1},sizeClipSpace:{x:ot.right-ot.left+1,y:ot.bottom-ot.top+1},offset:{x:-ot.left+ft+(ct||lt?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-ot.top+ft+(ct||lt?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}De.TextureAtlas=Xe;class tt{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(rt){this._glyphs.push(rt),this._usedPixels+=rt.size.x*rt.size.y}constructor(rt,ot,dt){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],dt)for(const ct of dt)this._glyphs.push(...ct.glyphs),this._usedPixels+=ct._usedPixels;this.canvas=st(rt,ot,ot),this.ctx=(0,Fe.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function Qe(Ze,rt,ot,dt){const ct=rt.rgba>>>24,lt=rt.rgba>>>16&255,ft=rt.rgba>>>8&255,pt=ot.rgba>>>24,Et=ot.rgba>>>16&255,yt=ot.rgba>>>8&255,wt=Math.floor((Math.abs(ct-pt)+Math.abs(lt-Et)+Math.abs(ft-yt))/12);let nt=!0;for(let ht=0;ht<Ze.data.length;ht+=4)Ze.data[ht]===ct&&Ze.data[ht+1]===lt&&Ze.data[ht+2]===ft||dt&&Math.abs(Ze.data[ht]-ct)+Math.abs(Ze.data[ht+1]-lt)+Math.abs(Ze.data[ht+2]-ft)<wt?Ze.data[ht+3]=0:nt=!1;return nt}function st(Ze,rt,ot){const dt=Ze.createElement("canvas");return dt.width=rt,dt.height=ot,dt}},160:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.contrastRatio=De.toPaddedHex=De.rgba=De.rgb=De.css=De.color=De.channels=De.NULL_COLOR=void 0;let Ge=0,Ke=0,Je=0,Fe=0;var Ye,et,it,We,p;function He($e){const Xe=$e.toString(16);return Xe.length<2?"0"+Xe:Xe}function Be($e,Xe){return $e<Xe?(Xe+.05)/($e+.05):($e+.05)/(Xe+.05)}De.NULL_COLOR={css:"#00000000",rgba:0},function($e){$e.toCss=function(Xe,tt,Qe,st){return st!==void 0?`#${He(Xe)}${He(tt)}${He(Qe)}${He(st)}`:`#${He(Xe)}${He(tt)}${He(Qe)}`},$e.toRgba=function(Xe,tt,Qe,st=255){return(Xe<<24|tt<<16|Qe<<8|st)>>>0},$e.toColor=function(Xe,tt,Qe,st){return{css:$e.toCss(Xe,tt,Qe,st),rgba:$e.toRgba(Xe,tt,Qe,st)}}}(Ye||(De.channels=Ye={})),function($e){function Xe(tt,Qe){return Fe=Math.round(255*Qe),[Ge,Ke,Je]=p.toChannels(tt.rgba),{css:Ye.toCss(Ge,Ke,Je,Fe),rgba:Ye.toRgba(Ge,Ke,Je,Fe)}}$e.blend=function(tt,Qe){if(Fe=(255&Qe.rgba)/255,Fe===1)return{css:Qe.css,rgba:Qe.rgba};const st=Qe.rgba>>24&255,Ze=Qe.rgba>>16&255,rt=Qe.rgba>>8&255,ot=tt.rgba>>24&255,dt=tt.rgba>>16&255,ct=tt.rgba>>8&255;return Ge=ot+Math.round((st-ot)*Fe),Ke=dt+Math.round((Ze-dt)*Fe),Je=ct+Math.round((rt-ct)*Fe),{css:Ye.toCss(Ge,Ke,Je),rgba:Ye.toRgba(Ge,Ke,Je)}},$e.isOpaque=function(tt){return(255&tt.rgba)==255},$e.ensureContrastRatio=function(tt,Qe,st){const Ze=p.ensureContrastRatio(tt.rgba,Qe.rgba,st);if(Ze)return Ye.toColor(Ze>>24&255,Ze>>16&255,Ze>>8&255)},$e.opaque=function(tt){const Qe=(255|tt.rgba)>>>0;return[Ge,Ke,Je]=p.toChannels(Qe),{css:Ye.toCss(Ge,Ke,Je),rgba:Qe}},$e.opacity=Xe,$e.multiplyOpacity=function(tt,Qe){return Fe=255&tt.rgba,Xe(tt,Fe*Qe/255)},$e.toColorRGB=function(tt){return[tt.rgba>>24&255,tt.rgba>>16&255,tt.rgba>>8&255]}}(et||(De.color=et={})),function($e){let Xe,tt;try{const Qe=document.createElement("canvas");Qe.width=1,Qe.height=1;const st=Qe.getContext("2d",{willReadFrequently:!0});st&&(Xe=st,Xe.globalCompositeOperation="copy",tt=Xe.createLinearGradient(0,0,1,1))}catch{}$e.toColor=function(Qe){if(Qe.match(/#[\da-f]{3,8}/i))switch(Qe.length){case 4:return Ge=parseInt(Qe.slice(1,2).repeat(2),16),Ke=parseInt(Qe.slice(2,3).repeat(2),16),Je=parseInt(Qe.slice(3,4).repeat(2),16),Ye.toColor(Ge,Ke,Je);case 5:return Ge=parseInt(Qe.slice(1,2).repeat(2),16),Ke=parseInt(Qe.slice(2,3).repeat(2),16),Je=parseInt(Qe.slice(3,4).repeat(2),16),Fe=parseInt(Qe.slice(4,5).repeat(2),16),Ye.toColor(Ge,Ke,Je,Fe);case 7:return{css:Qe,rgba:(parseInt(Qe.slice(1),16)<<8|255)>>>0};case 9:return{css:Qe,rgba:parseInt(Qe.slice(1),16)>>>0}}const st=Qe.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(st)return Ge=parseInt(st[1]),Ke=parseInt(st[2]),Je=parseInt(st[3]),Fe=Math.round(255*(st[5]===void 0?1:parseFloat(st[5]))),Ye.toColor(Ge,Ke,Je,Fe);if(!Xe||!tt)throw new Error("css.toColor: Unsupported css format");if(Xe.fillStyle=tt,Xe.fillStyle=Qe,typeof Xe.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(Xe.fillRect(0,0,1,1),[Ge,Ke,Je,Fe]=Xe.getImageData(0,0,1,1).data,Fe!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Ye.toRgba(Ge,Ke,Je,Fe),css:Qe}}}(it||(De.css=it={})),function($e){function Xe(tt,Qe,st){const Ze=tt/255,rt=Qe/255,ot=st/255;return .2126*(Ze<=.03928?Ze/12.92:Math.pow((Ze+.055)/1.055,2.4))+.7152*(rt<=.03928?rt/12.92:Math.pow((rt+.055)/1.055,2.4))+.0722*(ot<=.03928?ot/12.92:Math.pow((ot+.055)/1.055,2.4))}$e.relativeLuminance=function(tt){return Xe(tt>>16&255,tt>>8&255,255&tt)},$e.relativeLuminance2=Xe}(We||(De.rgb=We={})),function($e){function Xe(Qe,st,Ze){const rt=Qe>>24&255,ot=Qe>>16&255,dt=Qe>>8&255;let ct=st>>24&255,lt=st>>16&255,ft=st>>8&255,pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));for(;pt<Ze&&(ct>0||lt>0||ft>0);)ct-=Math.max(0,Math.ceil(.1*ct)),lt-=Math.max(0,Math.ceil(.1*lt)),ft-=Math.max(0,Math.ceil(.1*ft)),pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));return(ct<<24|lt<<16|ft<<8|255)>>>0}function tt(Qe,st,Ze){const rt=Qe>>24&255,ot=Qe>>16&255,dt=Qe>>8&255;let ct=st>>24&255,lt=st>>16&255,ft=st>>8&255,pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));for(;pt<Ze&&(ct<255||lt<255||ft<255);)ct=Math.min(255,ct+Math.ceil(.1*(255-ct))),lt=Math.min(255,lt+Math.ceil(.1*(255-lt))),ft=Math.min(255,ft+Math.ceil(.1*(255-ft))),pt=Be(We.relativeLuminance2(ct,lt,ft),We.relativeLuminance2(rt,ot,dt));return(ct<<24|lt<<16|ft<<8|255)>>>0}$e.blend=function(Qe,st){if(Fe=(255&st)/255,Fe===1)return st;const Ze=st>>24&255,rt=st>>16&255,ot=st>>8&255,dt=Qe>>24&255,ct=Qe>>16&255,lt=Qe>>8&255;return Ge=dt+Math.round((Ze-dt)*Fe),Ke=ct+Math.round((rt-ct)*Fe),Je=lt+Math.round((ot-lt)*Fe),Ye.toRgba(Ge,Ke,Je)},$e.ensureContrastRatio=function(Qe,st,Ze){const rt=We.relativeLuminance(Qe>>8),ot=We.relativeLuminance(st>>8);if(Be(rt,ot)<Ze){if(ot<rt){const lt=Xe(Qe,st,Ze),ft=Be(rt,We.relativeLuminance(lt>>8));if(ft<Ze){const pt=tt(Qe,st,Ze);return ft>Be(rt,We.relativeLuminance(pt>>8))?lt:pt}return lt}const dt=tt(Qe,st,Ze),ct=Be(rt,We.relativeLuminance(dt>>8));if(ct<Ze){const lt=Xe(Qe,st,Ze);return ct>Be(rt,We.relativeLuminance(lt>>8))?dt:lt}return dt}},$e.reduceLuminance=Xe,$e.increaseLuminance=tt,$e.toChannels=function(Qe){return[Qe>>24&255,Qe>>16&255,Qe>>8&255,255&Qe]}}(p||(De.rgba=p={})),De.toPaddedHex=He,De.contrastRatio=Be},345:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.runAndSubscribe=De.forwardEvent=De.EventEmitter=void 0,De.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=Ge=>(this._listeners.push(Ge),{dispose:()=>{if(!this._disposed){for(let Ke=0;Ke<this._listeners.length;Ke++)if(this._listeners[Ke]===Ge)return void this._listeners.splice(Ke,1)}}})),this._event}fire(Ge,Ke){const Je=[];for(let Fe=0;Fe<this._listeners.length;Fe++)Je.push(this._listeners[Fe]);for(let Fe=0;Fe<Je.length;Fe++)Je[Fe].call(void 0,Ge,Ke)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},De.forwardEvent=function(Ge,Ke){return Ge(Je=>Ke.fire(Je))},De.runAndSubscribe=function(Ge,Ke){return Ke(void 0),Ge(Je=>Ke(Je))}},859:(gt,De)=>{function Ge(Ke){for(const Je of Ke)Je.dispose();Ke.length=0}Object.defineProperty(De,"__esModule",{value:!0}),De.getDisposeArrayDisposable=De.disposeArray=De.toDisposable=De.MutableDisposable=De.Disposable=void 0,De.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const Ke of this._disposables)Ke.dispose();this._disposables.length=0}register(Ke){return this._disposables.push(Ke),Ke}unregister(Ke){const Je=this._disposables.indexOf(Ke);Je!==-1&&this._disposables.splice(Je,1)}},De.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(Ke){var Je;this._isDisposed||Ke===this._value||((Je=this._value)==null||Je.dispose(),this._value=Ke)}clear(){this.value=void 0}dispose(){var Ke;this._isDisposed=!0,(Ke=this._value)==null||Ke.dispose(),this._value=void 0}},De.toDisposable=function(Ke){return{dispose:Ke}},De.disposeArray=Ge,De.getDisposeArrayDisposable=function(Ke){return{dispose:()=>Ge(Ke)}}},485:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.FourKeyMap=De.TwoKeyMap=void 0;class Ge{constructor(){this._data={}}set(Je,Fe,Ye){this._data[Je]||(this._data[Je]={}),this._data[Je][Fe]=Ye}get(Je,Fe){return this._data[Je]?this._data[Je][Fe]:void 0}clear(){this._data={}}}De.TwoKeyMap=Ge,De.FourKeyMap=class{constructor(){this._data=new Ge}set(Ke,Je,Fe,Ye,et){this._data.get(Ke,Je)||this._data.set(Ke,Je,new Ge),this._data.get(Ke,Je).set(Fe,Ye,et)}get(Ke,Je,Fe,Ye){var et;return(et=this._data.get(Ke,Je))==null?void 0:et.get(Fe,Ye)}clear(){this._data.clear()}}},399:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.isChromeOS=De.isLinux=De.isWindows=De.isIphone=De.isIpad=De.isMac=De.getSafariVersion=De.isSafari=De.isLegacyEdge=De.isFirefox=De.isNode=void 0,De.isNode=typeof process<"u"&&"title"in process;const Ge=De.isNode?"node":navigator.userAgent,Ke=De.isNode?"node":navigator.platform;De.isFirefox=Ge.includes("Firefox"),De.isLegacyEdge=Ge.includes("Edge"),De.isSafari=/^((?!chrome|android).)*safari/i.test(Ge),De.getSafariVersion=function(){if(!De.isSafari)return 0;const Je=Ge.match(/Version\/(\d+)/);return Je===null||Je.length<2?0:parseInt(Je[1])},De.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Ke),De.isIpad=Ke==="iPad",De.isIphone=Ke==="iPhone",De.isWindows=["Windows","Win16","Win32","WinCE"].includes(Ke),De.isLinux=Ke.indexOf("Linux")>=0,De.isChromeOS=/\bCrOS\b/.test(Ge)},385:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.DebouncedIdleTask=De.IdleTaskQueue=De.PriorityTaskQueue=void 0;const Ke=Ge(399);class Je{constructor(){this._tasks=[],this._i=0}enqueue(et){this._tasks.push(et),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(et){this._idleCallback=void 0;let it=0,We=0,p=et.timeRemaining(),He=0;for(;this._i<this._tasks.length;){if(it=Date.now(),this._tasks[this._i]()||this._i++,it=Math.max(1,Date.now()-it),We=Math.max(it,We),He=et.timeRemaining(),1.5*We>He)return p-it<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(p-it))}ms`),void this._start();p=He}this.clear()}}class Fe extends Je{_requestCallback(et){return setTimeout(()=>et(this._createDeadline(16)))}_cancelCallback(et){clearTimeout(et)}_createDeadline(et){const it=Date.now()+et;return{timeRemaining:()=>Math.max(0,it-Date.now())}}}De.PriorityTaskQueue=Fe,De.IdleTaskQueue=!Ke.isNode&&"requestIdleCallback"in window?class extends Je{_requestCallback(Ye){return requestIdleCallback(Ye)}_cancelCallback(Ye){cancelIdleCallback(Ye)}}:Fe,De.DebouncedIdleTask=class{constructor(){this._queue=new De.IdleTaskQueue}set(Ye){this._queue.clear(),this._queue.enqueue(Ye)}flush(){this._queue.flush()}}},147:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.ExtendedAttrs=De.AttributeData=void 0;class Ge{constructor(){this.fg=0,this.bg=0,this.extended=new Ke}static toColorRGB(Fe){return[Fe>>>16&255,Fe>>>8&255,255&Fe]}static fromColorRGB(Fe){return(255&Fe[0])<<16|(255&Fe[1])<<8|255&Fe[2]}clone(){const Fe=new Ge;return Fe.fg=this.fg,Fe.bg=this.bg,Fe.extended=this.extended.clone(),Fe}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}De.AttributeData=Ge;class Ke{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(Fe){this._ext=Fe}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(Fe){this._ext&=-469762049,this._ext|=Fe<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(Fe){this._ext&=-67108864,this._ext|=67108863&Fe}get urlId(){return this._urlId}set urlId(Fe){this._urlId=Fe}get underlineVariantOffset(){const Fe=(3758096384&this._ext)>>29;return Fe<0?4294967288^Fe:Fe}set underlineVariantOffset(Fe){this._ext&=536870911,this._ext|=Fe<<29&3758096384}constructor(Fe=0,Ye=0){this._ext=0,this._urlId=0,this._ext=Fe,this._urlId=Ye}clone(){return new Ke(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}De.ExtendedAttrs=Ke},782:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.CellData=void 0;const Ke=Ge(133),Je=Ge(855),Fe=Ge(147);class Ye extends Fe.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Fe.ExtendedAttrs,this.combinedData=""}static fromCharData(it){const We=new Ye;return We.setFromCharData(it),We}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,Ke.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(it){this.fg=it[Je.CHAR_DATA_ATTR_INDEX],this.bg=0;let We=!1;if(it[Je.CHAR_DATA_CHAR_INDEX].length>2)We=!0;else if(it[Je.CHAR_DATA_CHAR_INDEX].length===2){const p=it[Je.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=p&&p<=56319){const He=it[Je.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=He&&He<=57343?this.content=1024*(p-55296)+He-56320+65536|it[Je.CHAR_DATA_WIDTH_INDEX]<<22:We=!0}else We=!0}else this.content=it[Je.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|it[Je.CHAR_DATA_WIDTH_INDEX]<<22;We&&(this.combinedData=it[Je.CHAR_DATA_CHAR_INDEX],this.content=2097152|it[Je.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}De.CellData=Ye},855:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.WHITESPACE_CELL_CODE=De.WHITESPACE_CELL_WIDTH=De.WHITESPACE_CELL_CHAR=De.NULL_CELL_CODE=De.NULL_CELL_WIDTH=De.NULL_CELL_CHAR=De.CHAR_DATA_CODE_INDEX=De.CHAR_DATA_WIDTH_INDEX=De.CHAR_DATA_CHAR_INDEX=De.CHAR_DATA_ATTR_INDEX=De.DEFAULT_EXT=De.DEFAULT_ATTR=De.DEFAULT_COLOR=void 0,De.DEFAULT_COLOR=0,De.DEFAULT_ATTR=256|De.DEFAULT_COLOR<<9,De.DEFAULT_EXT=0,De.CHAR_DATA_ATTR_INDEX=0,De.CHAR_DATA_CHAR_INDEX=1,De.CHAR_DATA_WIDTH_INDEX=2,De.CHAR_DATA_CODE_INDEX=3,De.NULL_CELL_CHAR="",De.NULL_CELL_WIDTH=1,De.NULL_CELL_CODE=0,De.WHITESPACE_CELL_CHAR=" ",De.WHITESPACE_CELL_WIDTH=1,De.WHITESPACE_CELL_CODE=32},133:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.Utf8ToUtf32=De.StringToUtf32=De.utf32ToString=De.stringFromCodePoint=void 0,De.stringFromCodePoint=function(Ge){return Ge>65535?(Ge-=65536,String.fromCharCode(55296+(Ge>>10))+String.fromCharCode(Ge%1024+56320)):String.fromCharCode(Ge)},De.utf32ToString=function(Ge,Ke=0,Je=Ge.length){let Fe="";for(let Ye=Ke;Ye<Je;++Ye){let et=Ge[Ye];et>65535?(et-=65536,Fe+=String.fromCharCode(55296+(et>>10))+String.fromCharCode(et%1024+56320)):Fe+=String.fromCharCode(et)}return Fe},De.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(Ge,Ke){const Je=Ge.length;if(!Je)return 0;let Fe=0,Ye=0;if(this._interim){const et=Ge.charCodeAt(Ye++);56320<=et&&et<=57343?Ke[Fe++]=1024*(this._interim-55296)+et-56320+65536:(Ke[Fe++]=this._interim,Ke[Fe++]=et),this._interim=0}for(let et=Ye;et<Je;++et){const it=Ge.charCodeAt(et);if(55296<=it&&it<=56319){if(++et>=Je)return this._interim=it,Fe;const We=Ge.charCodeAt(et);56320<=We&&We<=57343?Ke[Fe++]=1024*(it-55296)+We-56320+65536:(Ke[Fe++]=it,Ke[Fe++]=We)}else it!==65279&&(Ke[Fe++]=it)}return Fe}},De.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(Ge,Ke){const Je=Ge.length;if(!Je)return 0;let Fe,Ye,et,it,We=0,p=0,He=0;if(this.interim[0]){let Xe=!1,tt=this.interim[0];tt&=(224&tt)==192?31:(240&tt)==224?15:7;let Qe,st=0;for(;(Qe=63&this.interim[++st])&&st<4;)tt<<=6,tt|=Qe;const Ze=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,rt=Ze-st;for(;He<rt;){if(He>=Je)return 0;if(Qe=Ge[He++],(192&Qe)!=128){He--,Xe=!0;break}this.interim[st++]=Qe,tt<<=6,tt|=63&Qe}Xe||(Ze===2?tt<128?He--:Ke[We++]=tt:Ze===3?tt<2048||tt>=55296&&tt<=57343||tt===65279||(Ke[We++]=tt):tt<65536||tt>1114111||(Ke[We++]=tt)),this.interim.fill(0)}const Be=Je-4;let $e=He;for(;$e<Je;){for(;!(!($e<Be)||128&(Fe=Ge[$e])||128&(Ye=Ge[$e+1])||128&(et=Ge[$e+2])||128&(it=Ge[$e+3]));)Ke[We++]=Fe,Ke[We++]=Ye,Ke[We++]=et,Ke[We++]=it,$e+=4;if(Fe=Ge[$e++],Fe<128)Ke[We++]=Fe;else if((224&Fe)==192){if($e>=Je)return this.interim[0]=Fe,We;if(Ye=Ge[$e++],(192&Ye)!=128){$e--;continue}if(p=(31&Fe)<<6|63&Ye,p<128){$e--;continue}Ke[We++]=p}else if((240&Fe)==224){if($e>=Je)return this.interim[0]=Fe,We;if(Ye=Ge[$e++],(192&Ye)!=128){$e--;continue}if($e>=Je)return this.interim[0]=Fe,this.interim[1]=Ye,We;if(et=Ge[$e++],(192&et)!=128){$e--;continue}if(p=(15&Fe)<<12|(63&Ye)<<6|63&et,p<2048||p>=55296&&p<=57343||p===65279)continue;Ke[We++]=p}else if((248&Fe)==240){if($e>=Je)return this.interim[0]=Fe,We;if(Ye=Ge[$e++],(192&Ye)!=128){$e--;continue}if($e>=Je)return this.interim[0]=Fe,this.interim[1]=Ye,We;if(et=Ge[$e++],(192&et)!=128){$e--;continue}if($e>=Je)return this.interim[0]=Fe,this.interim[1]=Ye,this.interim[2]=et,We;if(it=Ge[$e++],(192&it)!=128){$e--;continue}if(p=(7&Fe)<<18|(63&Ye)<<12|(63&et)<<6|63&it,p<65536||p>1114111)continue;Ke[We++]=p}}return We}}},776:function(gt,De,Ge){var Ke=this&&this.__decorate||function(p,He,Be,$e){var Xe,tt=arguments.length,Qe=tt<3?He:$e===null?$e=Object.getOwnPropertyDescriptor(He,Be):$e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Qe=Reflect.decorate(p,He,Be,$e);else for(var st=p.length-1;st>=0;st--)(Xe=p[st])&&(Qe=(tt<3?Xe(Qe):tt>3?Xe(He,Be,Qe):Xe(He,Be))||Qe);return tt>3&&Qe&&Object.defineProperty(He,Be,Qe),Qe},Je=this&&this.__param||function(p,He){return function(Be,$e){He(Be,$e,p)}};Object.defineProperty(De,"__esModule",{value:!0}),De.traceCall=De.setTraceLogger=De.LogService=void 0;const Fe=Ge(859),Ye=Ge(97),et={trace:Ye.LogLevelEnum.TRACE,debug:Ye.LogLevelEnum.DEBUG,info:Ye.LogLevelEnum.INFO,warn:Ye.LogLevelEnum.WARN,error:Ye.LogLevelEnum.ERROR,off:Ye.LogLevelEnum.OFF};let it,We=De.LogService=class extends Fe.Disposable{get logLevel(){return this._logLevel}constructor(p){super(),this._optionsService=p,this._logLevel=Ye.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),it=this}_updateLogLevel(){this._logLevel=et[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(p){for(let He=0;He<p.length;He++)typeof p[He]=="function"&&(p[He]=p[He]())}_log(p,He,Be){this._evalLazyOptionalParams(Be),p.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+He,...Be)}trace(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.TRACE&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.trace.bind(this._optionsService.options.logger))??console.log,p,He)}debug(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.DEBUG&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.debug.bind(this._optionsService.options.logger))??console.log,p,He)}info(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.INFO&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.info.bind(this._optionsService.options.logger))??console.info,p,He)}warn(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.WARN&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.warn.bind(this._optionsService.options.logger))??console.warn,p,He)}error(p,...He){var Be;this._logLevel<=Ye.LogLevelEnum.ERROR&&this._log(((Be=this._optionsService.options.logger)==null?void 0:Be.error.bind(this._optionsService.options.logger))??console.error,p,He)}};De.LogService=We=Ke([Je(0,Ye.IOptionsService)],We),De.setTraceLogger=function(p){it=p},De.traceCall=function(p,He,Be){if(typeof Be.value!="function")throw new Error("not supported");const $e=Be.value;Be.value=function(...Xe){if(it.logLevel!==Ye.LogLevelEnum.TRACE)return $e.apply(this,Xe);it.trace(`GlyphRenderer#${$e.name}(${Xe.map(Qe=>JSON.stringify(Qe)).join(", ")})`);const tt=$e.apply(this,Xe);return it.trace(`GlyphRenderer#${$e.name} return`,tt),tt}}},726:(gt,De)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.createDecorator=De.getServiceDependencies=De.serviceRegistry=void 0;const Ge="di$target",Ke="di$dependencies";De.serviceRegistry=new Map,De.getServiceDependencies=function(Je){return Je[Ke]||[]},De.createDecorator=function(Je){if(De.serviceRegistry.has(Je))return De.serviceRegistry.get(Je);const Fe=function(Ye,et,it){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(We,p,He){p[Ge]===p?p[Ke].push({id:We,index:He}):(p[Ke]=[{id:We,index:He}],p[Ge]=p)})(Fe,Ye,it)};return Fe.toString=()=>Je,De.serviceRegistry.set(Je,Fe),Fe}},97:(gt,De,Ge)=>{Object.defineProperty(De,"__esModule",{value:!0}),De.IDecorationService=De.IUnicodeService=De.IOscLinkService=De.IOptionsService=De.ILogService=De.LogLevelEnum=De.IInstantiationService=De.ICharsetService=De.ICoreService=De.ICoreMouseService=De.IBufferService=void 0;const Ke=Ge(726);var Je;De.IBufferService=(0,Ke.createDecorator)("BufferService"),De.ICoreMouseService=(0,Ke.createDecorator)("CoreMouseService"),De.ICoreService=(0,Ke.createDecorator)("CoreService"),De.ICharsetService=(0,Ke.createDecorator)("CharsetService"),De.IInstantiationService=(0,Ke.createDecorator)("InstantiationService"),function(Fe){Fe[Fe.TRACE=0]="TRACE",Fe[Fe.DEBUG=1]="DEBUG",Fe[Fe.INFO=2]="INFO",Fe[Fe.WARN=3]="WARN",Fe[Fe.ERROR=4]="ERROR",Fe[Fe.OFF=5]="OFF"}(Je||(De.LogLevelEnum=Je={})),De.ILogService=(0,Ke.createDecorator)("LogService"),De.IOptionsService=(0,Ke.createDecorator)("OptionsService"),De.IOscLinkService=(0,Ke.createDecorator)("OscLinkService"),De.IUnicodeService=(0,Ke.createDecorator)("UnicodeService"),De.IDecorationService=(0,Ke.createDecorator)("DecorationService")}},xt={};function Ct(gt){var De=xt[gt];if(De!==void 0)return De.exports;var Ge=xt[gt]={exports:{}};return bt[gt].call(Ge.exports,Ge,Ge.exports,Ct),Ge.exports}var Rt={};return(()=>{var gt=Rt;Object.defineProperty(gt,"__esModule",{value:!0}),gt.WebglAddon=void 0;const De=Ct(345),Ge=Ct(859),Ke=Ct(399),Je=Ct(666),Fe=Ct(776);class Ye extends Ge.Disposable{constructor(it){if(Ke.isSafari&&(0,Ke.getSafariVersion)()<16){const We={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",We))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=it,this._onChangeTextureAtlas=this.register(new De.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new De.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new De.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new De.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(it){const We=it._core;if(!it.element)return void this.register(We.onWillOpen(()=>this.activate(it)));this._terminal=it;const p=We.coreService,He=We.optionsService,Be=We,$e=Be._renderService,Xe=Be._characterJoinerService,tt=Be._charSizeService,Qe=Be._coreBrowserService,st=Be._decorationService,Ze=Be._logService,rt=Be._themeService;(0,Fe.setTraceLogger)(Ze),this._renderer=this.register(new Je.WebglRenderer(it,Xe,tt,Qe,p,st,He,rt,this._preserveDrawingBuffer)),this.register((0,De.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,De.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,De.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,De.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),$e.setRenderer(this._renderer),this.register((0,Ge.toDisposable)(()=>{const ot=this._terminal._core._renderService;ot.setRenderer(this._terminal._core._createRenderer()),ot.handleResize(it.cols,it.rows)}))}get textureAtlas(){var it;return(it=this._renderer)==null?void 0:it.textureAtlas}clearTextureAtlas(){var it;(it=this._renderer)==null||it.clearTextureAtlas()}}gt.WebglAddon=Ye})(),Rt})())})(addonWebgl);var addonWebglExports=addonWebgl.exports;const webgl=new addonWebglExports.WebglAddon;function load$1(at){at.loadAddon(webgl)}const webgl$1={load:load$1};var addonWebLinks={exports:{}};(function(at,mt){(function(bt,xt){at.exports=xt()})(self,()=>(()=>{var bt={6:(gt,De)=>{function Ge(Je){try{const Fe=new URL(Je),Ye=Fe.password&&Fe.username?`${Fe.protocol}//${Fe.username}:${Fe.password}@${Fe.host}`:Fe.username?`${Fe.protocol}//${Fe.username}@${Fe.host}`:`${Fe.protocol}//${Fe.host}`;return Je.toLocaleLowerCase().startsWith(Ye.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(De,"__esModule",{value:!0}),De.LinkComputer=De.WebLinkProvider=void 0,De.WebLinkProvider=class{constructor(Je,Fe,Ye,et={}){this._terminal=Je,this._regex=Fe,this._handler=Ye,this._options=et}provideLinks(Je,Fe){const Ye=Ke.computeLink(Je,this._regex,this._terminal,this._handler);Fe(this._addCallbacks(Ye))}_addCallbacks(Je){return Je.map(Fe=>(Fe.leave=this._options.leave,Fe.hover=(Ye,et)=>{if(this._options.hover){const{range:it}=Fe;this._options.hover(Ye,et,it)}},Fe))}};class Ke{static computeLink(Fe,Ye,et,it){const We=new RegExp(Ye.source,(Ye.flags||"")+"g"),[p,He]=Ke._getWindowedLineStrings(Fe-1,et),Be=p.join("");let $e;const Xe=[];for(;$e=We.exec(Be);){const tt=$e[0];if(!Ge(tt))continue;const[Qe,st]=Ke._mapStrIdx(et,He,0,$e.index),[Ze,rt]=Ke._mapStrIdx(et,Qe,st,tt.length);if(Qe===-1||st===-1||Ze===-1||rt===-1)continue;const ot={start:{x:st+1,y:Qe+1},end:{x:rt,y:Ze+1}};Xe.push({range:ot,text:tt,activate:it})}return Xe}static _getWindowedLineStrings(Fe,Ye){let et,it=Fe,We=Fe,p=0,He="";const Be=[];if(et=Ye.buffer.active.getLine(Fe)){const $e=et.translateToString(!0);if(et.isWrapped&&$e[0]!==" "){for(p=0;(et=Ye.buffer.active.getLine(--it))&&p<2048&&(He=et.translateToString(!0),p+=He.length,Be.push(He),et.isWrapped&&He.indexOf(" ")===-1););Be.reverse()}for(Be.push($e),p=0;(et=Ye.buffer.active.getLine(++We))&&et.isWrapped&&p<2048&&(He=et.translateToString(!0),p+=He.length,Be.push(He),He.indexOf(" ")===-1););}return[Be,it]}static _mapStrIdx(Fe,Ye,et,it){const We=Fe.buffer.active,p=We.getNullCell();let He=et;for(;it;){const Be=We.getLine(Ye);if(!Be)return[-1,-1];for(let $e=He;$e<Be.length;++$e){Be.getCell($e,p);const Xe=p.getChars();if(p.getWidth()&&(it-=Xe.length||1,$e===Be.length-1&&Xe==="")){const tt=We.getLine(Ye+1);tt&&tt.isWrapped&&(tt.getCell(0,p),p.getWidth()===2&&(it+=1))}if(it<0)return[Ye,$e]}Ye++,He=0}return[Ye,He]}}De.LinkComputer=Ke}},xt={};function Ct(gt){var De=xt[gt];if(De!==void 0)return De.exports;var Ge=xt[gt]={exports:{}};return bt[gt](Ge,Ge.exports,Ct),Ge.exports}var Rt={};return(()=>{var gt=Rt;Object.defineProperty(gt,"__esModule",{value:!0}),gt.WebLinksAddon=void 0;const De=Ct(6),Ge=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function Ke(Je,Fe){const Ye=window.open();if(Ye){try{Ye.opener=null}catch{}Ye.location.href=Fe}else console.warn("Opening link blocked as opener could not be cleared")}gt.WebLinksAddon=class{constructor(Je=Ke,Fe={}){this._handler=Je,this._options=Fe}activate(Je){this._terminal=Je;const Fe=this._options,Ye=Fe.urlRegex||Ge;this._linkProvider=this._terminal.registerLinkProvider(new De.WebLinkProvider(this._terminal,Ye,this._handler,Fe))}dispose(){var Je;(Je=this._linkProvider)==null||Je.dispose()}}})(),Rt})())})(addonWebLinks);var addonWebLinksExports=addonWebLinks.exports;const weblinks=new addonWebLinksExports.WebLinksAddon;function load(at){at.loadAddon(weblinks)}const weblinks$1={load};function loadAddons(at){fit.load(at),webgl$1.load(at),weblinks$1.load(at)}const getBashInterface=()=>document.querySelector(".xterm");function addEventListeners(){const at=getBashInterface();at==null||at.addEventListener("wheel",mt=>{term.buffer.active.baseY>0&&mt.preventDefault()},{passive:!1})}function crlf(at,mt=!0){mt&&at.writeln(""),at.write(" $ ")}const red="\x1B[31;1m",blue="\x1B[34;1m",initial="\x1B[0m",pokecode=`\r-----------------------------------------
\r  Busca de PokÃ©mons na poke api 
\r-----------------------------------------

\r\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mns\x1B[0m\x1B[38;2;248;248;242m pokemon\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mrequire\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;248;248;242mcheshire.core \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mas\x1B[0m\x1B[38;2;248;248;242m json\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;248;248;242mclj-http.client \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mas\x1B[0m\x1B[38;2;248;248;242m client\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;248;248;242mcom.climate.claypoole \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mas\x1B[0m\x1B[38;2;248;248;242m cp\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m

\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m lista de pokemons para buscar\x1B[0m
\r\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;249;38;114mdef\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;166;226;46mpokemons\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mditto\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m      \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mbulbasaur\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mpikachu\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mcharmander\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mgengar\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m    \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116msolgaleo\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116msquirtle\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mabomasnow\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mabra\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mabsol\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maccelgor\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maerodactyl\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maggron\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maipom\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116malakazam\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116malcremie\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116malomomola\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maltaria\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mamaura\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mambipom\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mamoonguss\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mampharos\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mannihilape\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116manorith\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mappletun\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mapplin\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maraquanid\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marbok\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marboliva\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marcanine\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marceus\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marchaludon\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marchen\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marcheops\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marctibax\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marctovish\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marctozolt\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mariados\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marmaldo\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marmarouge\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maromatisse\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maron\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marrokuda\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marticuno\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maudino\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maurorus\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mavalugg\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maxew\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mazelf\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mazumarill\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m
\r\x1B[38;2;248;248;242m   \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mazurill\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m

\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m funÃ§Ã£o para obter pokemons em pokeapi.co\x1B[0m
\r\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;249;38;114mdefn\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;166;226;46mfetch-pokemon\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;248;248;242mparar? pokemon-name\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m caso algum retorno seja de erro, interrompe todas as execuÃ§Ãµes subsequentes\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mwhen-not\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;249;38;114m@\x1B[0m\x1B[38;2;248;248;242mparar?\x1B[0m
\r\x1B[38;2;248;248;242m    \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mtry\x1B[0m
\r\x1B[38;2;248;248;242m      \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242m->\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mformat\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mhttps://pokeapi.co/api/v2/pokemon/%s\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;248;248;242m pokemon-name\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m
\r\x1B[38;2;248;248;242m          \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mclient/get\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255maccept\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mjson\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m
\r\x1B[38;2;248;248;242m          \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mbody\x1B[0m
\r\x1B[38;2;248;248;242m          \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mjson/parse-string\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255mtrue\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m
\r\x1B[38;2;248;248;242m      \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mcatch\x1B[0m\x1B[38;2;248;248;242m Exception e\x1B[0m
\r\x1B[38;2;248;248;242m        \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mswap!\x1B[0m\x1B[38;2;248;248;242m parar? \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mconstantly\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255mtrue\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m
\r\x1B[38;2;248;248;242m        \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255merror\x1B[0m\x1B[38;2;248;248;242m e\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m

\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m funÃ§Ã£o para extrair apenas algumas infos do retorno (que Ã© gigante)\x1B[0m
\r\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;249;38;114mdefn\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;166;226;46mpokemon-data->id+name+height\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;248;248;242mpokemon-data\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mselect-keys\x1B[0m\x1B[38;2;248;248;242m pokemon-data \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m

\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m funÃ§Ã£o que controla o fluxo.\x1B[0m
\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m 1- faz o request\x1B[0m
\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m 2- adapta o retorno\x1B[0m
\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m 3- vincula a execuÃ§Ã£o a um espaÃ§o do threadpool\x1B[0m
\r\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;249;38;114mdefn\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;166;226;46mfetch-pokemon-future\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;248;248;242mparar? pool pokemon-name\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242m->>\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mfetch-pokemon\x1B[0m\x1B[38;2;248;248;242m parar? pokemon-name\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m
\r\x1B[38;2;248;248;242m       pokemon-data->id+name+height\x1B[0m
\r\x1B[38;2;248;248;242m       \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mcp/future\x1B[0m\x1B[38;2;248;248;242m pool\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m

\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m executa todo o processo mas buscando de 10 em 10\x1B[0m
\r\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mlet\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m[\x1B[0m\x1B[38;2;248;248;242mparar? \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242matom\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255mfalse\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m
\r\x1B[38;2;248;248;242m      pool \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mcp/threadpool\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m10\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m cria um threadpool com paralelismo de 10 threads\x1B[0m
\r\x1B[38;2;248;248;242m      pokemon-futures \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mmap\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mpartial\x1B[0m\x1B[38;2;248;248;242m fetch-pokemon-future parar? pool\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m pokemons\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m]\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;117;113;94m;;\x1B[0m
\r\x1B[38;2;248;248;242m  \x1B[0m\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242mmap\x1B[0m\x1B[38;2;248;248;242m deref pokemon-futures\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m

\r\x1B[38;2;117;113;94m;;\x1B[0m\x1B[38;2;117;113;94m e esse Ã© o retorno obtido \x1B[0m

\r\x1B[38;2;248;248;242m(\x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m132\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mditto\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m3\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m1\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mbulbasaur\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m7\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m25\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mpikachu\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m4\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m4\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mcharmander\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m6\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m94\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mgengar\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m15\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m791\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116msolgaleo\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m34\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m7\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116msquirtle\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m5\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m460\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mabomasnow\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m22\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m63\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mabra\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m9\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m359\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mabsol\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m12\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m617\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maccelgor\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m8\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m142\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maerodactyl\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m18\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m306\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maggron\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m21\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m190\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maipom\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m8\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m65\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116malakazam\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m15\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m869\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116malcremie\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m3\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m594\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116malomomola\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m12\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m334\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maltaria\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m11\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m698\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mamaura\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m13\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m424\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mambipom\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m12\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m591\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mamoonguss\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m6\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m181\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mampharos\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m14\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m979\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mannihilape\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m12\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m347\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116manorith\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m7\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m842\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mappletun\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m4\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m840\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mapplin\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m2\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m752\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maraquanid\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m18\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m24\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marbok\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m35\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m930\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marboliva\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m14\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m59\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marcanine\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m19\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m493\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marceus\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m32\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m1018\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marchaludon\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m20\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m566\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marchen\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m5\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m567\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marcheops\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m14\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m997\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marctibax\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m8\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m883\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marctovish\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m20\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m881\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marctozolt\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m23\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m168\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mariados\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m11\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m348\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marmaldo\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m15\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m936\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marmarouge\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m15\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m683\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maromatisse\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m8\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m304\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maron\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m4\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m846\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marrokuda\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m5\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m144\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116marticuno\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m17\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m531\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maudino\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m11\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m699\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maurorus\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m27\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m713\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mavalugg\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m20\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m610\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116maxew\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m6\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m482\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mazelf\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m3\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m184\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mazumarill\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m8\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m
\r\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;248;248;242m{\x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mid\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m298\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mname\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;230;219;116mazurill\x1B[0m\x1B[38;2;230;219;116m"\x1B[0m\x1B[38;2;117;113;94m,\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m:\x1B[0m\x1B[38;2;190;132;255mheight\x1B[0m\x1B[38;2;248;248;242m \x1B[0m\x1B[38;2;190;132;255m2\x1B[0m\x1B[38;2;248;248;242m}\x1B[0m\x1B[38;2;248;248;242m)\x1B[0m `,post$1=`
\r  âââââââââ  ââ        ââââââââ       ââ âââ    ââ     âââââââââ    âââââââââ                            
\r âââ    âââ âââ       âââ    âââ     âââ âââ    âââ   âââ    âââ   âââ    âââ                            
\r âââ    ââ  âââ       âââ    âââ     âââ âââ    âââ   âââ    âââ   âââ    ââ                             
\r âââ        âââ       âââ    âââ     âââ âââ    âââ  âââââââââââ  âââââââ                                
\r âââ        âââ       âââ    âââ     âââ âââ    âââ ââââââââââ   ââââââââ                                
\r âââ    ââ  âââ       âââ    âââ     âââ âââ    âââ ââââââââââââ   âââ    ââ                             
\r âââ    âââ ââââ    â âââ    âââ     âââ âââ    âââ   âââ    âââ   âââ    âââ                            
\r âââââââââ  âââââââââ  ââââââââ  ââ ââââ âââââââââ    âââ    âââ   ââââââââââ                            
\r            â                    ââââââ               âââ    âââ                                         
\r  âââââââââ  ââ         âââââââââ âââ   â      âââââââââ  ââââââââ   ââââââââ   ââ          âââââââââ   
\r âââ    âââ âââ        âââ    âââ âââ   âââ   âââ    âââ âââ    âââ âââ    âââ âââ         âââ    âââ   
\r âââ    ââ  âââ        âââ    âââ âââââââââ   âââ    âââ âââ    âââ âââ    âââ âââ         âââ    ââ    
\r âââ        âââ        âââ    âââ âââââââââ   âââ    âââ âââ    âââ âââ    âââ âââ        âââââââ       
\r âââ        âââ      ââââââââââââ âââ   âââ âââââââââââ  âââ    âââ âââ    âââ âââ       ââââââââ       
\r âââ    ââ  âââ        âââ    âââ âââ   âââ   âââ        âââ    âââ âââ    âââ âââ         âââ    ââ    
\r âââ    âââ ââââ    â  âââ    âââ âââ   âââ   âââ        âââ    âââ âââ    âââ ââââ    â   âââ    âââ   
\r âââââââââ  âââââââââ  âââ    ââ   âââââââ   ââââââ       ââââââââ   ââââââââ  âââââââââ   ââââââââââ   

\r Nesse post, gostaria de falar um pouco sobre multithreading utilizando uma biblioteca, que achei bem interessante,
\r chamada Claypoole.

\r Eu jÃ¡ tinha utilizado ${red}futures${initial} e ${red}promises${initial} para coisas mais simples mas para algo um pouco mais complexo
\r resolvi recorrer a outras possibilidades.

\r Resolvi discutir o meu caso de uso com alguns amigos e, para facilitar, comecei a escrever o que eu precisava.

\r ---------------------------------------------
\r Minha lista de requisitos ficou assim:
\r ---------------------------------------------
\r  1- MÃºltiplas requisiÃ§Ãµes HTTP acontecendo simultaneamente.
\r  2- Limitar essa quantidade para nÃ£o derrubar o servidor alvo.
\r  3- Iniciar uma nova requisiÃ§Ã£o logo apÃ³s uma finalizar, aproveitando melhor o tempo.

\r Expliquei a lista e, durante a discussÃ£o, compartilhei minha tela para testarmos algumas ideias.
\r Foi nessa videochamada que meus amigos me enviaram o link dessa biblioteca para fazer alguns testes.

\r ---------------------------------------------
\r Fiz uma lista de coisas que gostei na biblioteca:
\r -------------------------------------------------
\r 1- Criar/gerenciar um threadpool de maneira simples
\r 2- Criar e vincular ${red}futures${initial} a um threadpool especÃ­fico
\r 3- ImplementaÃ§Ãµes de ${red}pmap${initial}, ${red}for${initial}, ${red}doseq${initial} operando em um threadpool
\r 4- Tudo isso sem necessidade de ${red}Java Interop${initial}.

\r Agora, chega de papo furado, hora de mostrar um pouco da biblioteca em aÃ§Ã£o.
\r Obs: vou adicionar ao final o github das bibliotecas complementares que usei nessa prova de conceito.

${pokecode}

\r Essa Ã© sÃ³ uma amostra de como podemos utilizar a biblioteca e recomendo que vocÃª tambÃ©m a teste.
\r Abra a pÃ¡gina do github dela e navegue por lÃ¡, teste coisas novas e espero que goste tanto quanto eu.

\r Github:
\r - ${blue}https://github.com/clj-commons/claypoole${initial}
\r - ${blue}https://github.com/dakrone/cheshire${initial}
\r - ${blue}https://github.com/dakrone/clj-http${initial}
`,claypooleLib={id:"1",title:"Clojure Claypoole",color:"red",date:new Date(2024,9,2,20,0,0),post:post$1},clojure={claypooleLib},posts={clojure},config={posts:[posts.clojure.claypooleLib]};function showWelcomeMessage(at){const mt=config.posts.map(bt=>`${` â  \x1B[31;1m${bt.title}\x1B[0m - ${bt.date.toLocaleDateString("pt-BR")}`}`.padEnd(94," ").concat("â",`\r
`,` â ${"".padEnd(79," ")} â`)).join(`\r
`);at.writeln(["","    Bem-vindo(a) ao meu ","","    âââââââââââ   ââ        ââââââââ     ââââââââ","       âââ    âââ âââ       âââ    âââ   âââ    âââ","       âââ    âââ âââ       âââ    âââ   âââ    ââ ","      ââââââââââ  âââ       âââ    âââ  ââââ       ","     âââââââââââ  âââ       âââ    âââ âââââ âââââ ","       âââ    âââ âââ       âââ    âââ   âââ    âââ","       âââ    âââ ââââ    â âââ    âââ   âââ    âââ","     âââââââââââ  âââââââââ  ââââââââ    âââââââââ ","                                                   ","    Aqui vocÃª encontrarÃ¡ detalhes de algumas das minhas aventuras com cÃ³digo e hacking.",""," â \x1B[1mÃltimos posts\x1B[0m âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ"," â                                                                                 â",`${mt}`," âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ"].join(`
\r`))}function setup$4(at){const mt="\x1Bc";return{run:(bt=!0)=>{at.writeln(mt),showWelcomeMessage(at),bt&&crlf(at,!0)},description:"Mostra a pÃ¡gina de boas-vindas novamente.",name:"welcome",sample:"welcome"}}const welcome={setup:setup$4};function setup$3(at){const mt="\x1Bc";return{run:()=>{at.writeln(mt),crlf(at,!1)},description:"Limpa o conteÃºdo do terminal.",name:"clear",sample:"clear"}}const clear={setup:setup$3};function formatMessage(at,mt,bt){const Ct=at.cols-20-3,Rt=[];let gt=bt;for(;gt.length>0;)if(gt=gt.trimStart(),gt.length<Ct)Rt.push(gt),gt="";else{let Ge=-1;if(gt[Ct]===" ")Ge=Ct;else for(let Ke=Ct-1;Ke>=0;Ke--)if(gt[Ke]===" "){Ge=Ke;break}Rt.push(gt.substring(0,Ge)),gt=gt.substring(Ge)}return`  \x1B[36;1m${mt.padEnd(20)}\x1B[0m ${Rt[0]}`+Rt.slice(1).map(Ge=>`\r
  ${" ".repeat(20)} ${Ge}`)}function setup$2(at,mt){const bt={description:"Mostra todos os comandos disponÃ­veis.",name:"help",sample:"help"};return mt.push(bt),{run:()=>{at.writeln(["","Experimente alguns destes comandos:","",...Object.keys(mt).map(xt=>formatMessage(at,mt[xt].sample,mt[xt].description))].join(`
\r`)),at.writeln(""),crlf(at,!1)},...bt}}const help={setup:setup$2};function i$3(at,mt,bt,xt,Ct){for(mt=mt.split?mt.split("."):mt,xt=0;xt<mt.length;xt++)at=at?at[mt[xt]]:Ct;return at===Ct?bt:at}var e="undefined",o$2="object",b$3="any",m$1="*",j="__",F$2=typeof process<"u"?process:{};F$2.env&&F$2.env.NODE_ENV;var $$1=typeof document<"u";F$2.versions!=null&&F$2.versions.node!=null;typeof Deno<"u"&&Deno.core;$$1&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent!==void 0&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function M$1(at,mt){return mt.charAt(0)[at]()+mt.slice(1)}var U$1=M$1.bind(null,"toUpperCase"),H$1=M$1.bind(null,"toLowerCase");function J$2(at){return Y$1(at)?U$1("null"):typeof at=="object"?yn(at):Object.prototype.toString.call(at).slice(8,-1)}function R$1(at,mt){mt===void 0&&(mt=!0);var bt=J$2(at);return mt?H$1(bt):bt}function V$1(at,mt){return typeof mt===at}var W$1=V$1.bind(null,"function"),q$1=V$1.bind(null,"string"),I$2=V$1.bind(null,"undefined"),Q$1=V$1.bind(null,"boolean");V$1.bind(null,"symbol");function Y$1(at){return at===null}function nn(at){return R$1(at)==="number"&&!isNaN(at)}function rn(at){return R$1(at)==="array"}function on(at){if(!un(at))return!1;for(var mt=at;Object.getPrototypeOf(mt)!==null;)mt=Object.getPrototypeOf(mt);return Object.getPrototypeOf(at)===mt}function un(at){return at&&(typeof at=="object"||at!==null)}function yn(at){return W$1(at.constructor)?at.constructor.name:null}function hn(at){return at instanceof Error||q$1(at.message)&&at.constructor&&nn(at.constructor.stackTraceLimit)}function On(at,mt){if(typeof mt!="object"||Y$1(mt))return!1;if(mt instanceof at)return!0;var bt=R$1(new at(""));if(hn(mt))for(;mt;){if(R$1(mt)===bt)return!0;mt=Object.getPrototypeOf(mt)}return!1}On.bind(null,TypeError);On.bind(null,SyntaxError);function $n(at,mt){var bt=at instanceof Element||at instanceof HTMLDocument;return bt&&mt?Tn(at,mt):bt}function Tn(at,mt){return mt===void 0&&(mt=""),at&&at.nodeName===mt.toUpperCase()}function _n(at){var mt=[].slice.call(arguments,1);return function(){return at.apply(void 0,[].slice.call(arguments).concat(mt))}}_n($n,"form");_n($n,"button");_n($n,"input");_n($n,"select");function n$1(at){try{return decodeURIComponent(at.replace(/\+/g," "))}catch{return null}}function o$1(){if($$1){var at=navigator,mt=at.languages;return at.userLanguage||(mt&&mt.length?mt[0]:at.language)}}function a$3(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function s(at){return function(mt){for(var bt,xt=Object.create(null),Ct=/([^&=]+)=?([^&]*)/g;bt=Ct.exec(mt);){var Rt=n$1(bt[1]),gt=n$1(bt[2]);Rt.substring(Rt.length-2)==="[]"?(xt[Rt=Rt.substring(0,Rt.length-2)]||(xt[Rt]=[])).push(gt):xt[Rt]=gt===""||gt}for(var De in xt){var Ge=De.split("[");Ge.length>1&&(m(xt,Ge.map(function(Ke){return Ke.replace(/[?[\]\\ ]/g,"")}),xt[De]),delete xt[De])}return xt}(function(mt){return $$1&&window.location.search.substring(1)}())}function m(at,mt,bt){for(var xt=mt.length-1,Ct=0;Ct<xt;++Ct){var Rt=mt[Ct];if(Rt==="__proto__"||Rt==="constructor")break;Rt in at||(at[Rt]={}),at=at[Rt]}at[mt[xt]]=bt}function y$1(){for(var at="",mt=0,bt=4294967295*Math.random()|0;mt++<36;){var xt="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[mt-1],Ct=15&bt;at+=xt=="-"||xt=="4"?xt:(xt=="x"?Ct:3&Ct|8).toString(16),bt=mt%8==0?4294967295*Math.random()|0:bt>>4}return at}var l="global",o=j+"global"+j,n=typeof self===o$2&&self.self===self&&self||typeof global===o$2&&global.global===global&&global||void 0;function a$2(at){return n[o][at]}function f(at,mt){return n[o][at]=mt}function i$2(at){delete n[o][at]}function u$1(at,mt,bt){var xt;try{if(b$2(at)){var Ct=window[at];xt=Ct[mt].bind(Ct)}}catch{}return xt||bt}n[o]||(n[o]={});var c$1={};function b$2(at){if(typeof c$1[at]!==e)return c$1[at];try{var mt=window[at];mt.setItem(e,e),mt.removeItem(e)}catch{return c$1[at]=!1}return c$1[at]=!0}function v(){return v=Object.assign||function(at){for(var mt=1;mt<arguments.length;mt++){var bt=arguments[mt];for(var xt in bt)Object.prototype.hasOwnProperty.call(bt,xt)&&(at[xt]=bt[xt])}return at},v.apply(this,arguments)}var y="function",b$1="undefined",I$1="@@redux/"+Math.random().toString(36),w=function(){return typeof Symbol===y&&Symbol.observable||"@@observable"}(),E$1=" != "+y;function P(at,mt,bt){var xt;if(typeof mt===y&&typeof bt===b$1&&(bt=mt,mt=void 0),typeof bt!==b$1){if(typeof bt!==y)throw new Error("enhancer"+E$1);return bt(P)(at,mt)}if(typeof at!==y)throw new Error("reducer"+E$1);var Ct=at,Rt=mt,gt=[],De=gt,Ge=!1;function Ke(){De===gt&&(De=gt.slice())}function Je(){return Rt}function Fe(et){if(typeof et!==y)throw new Error("Listener"+E$1);var it=!0;return Ke(),De.push(et),function(){if(it){it=!1,Ke();var We=De.indexOf(et);De.splice(We,1)}}}function Ye(et){if(!on(et))throw new Error("Act != obj");if(typeof et.type===b$1)throw new Error("ActType "+b$1);if(Ge)throw new Error("Dispatch in reducer");try{Ge=!0,Rt=Ct(Rt,et)}finally{Ge=!1}for(var it=gt=De,We=0;We<it.length;We++)(0,it[We])();return et}return Ye({type:"@@redux/INIT"}),(xt={dispatch:Ye,subscribe:Fe,getState:Je,replaceReducer:function(et){if(typeof et!==y)throw new Error("next reducer"+E$1);Ct=et,Ye({type:"@@redux/INIT"})}})[w]=function(){var et,it=Fe;return(et={subscribe:function(We){if(typeof We!="object")throw new TypeError("Observer != obj");function p(){We.next&&We.next(Je())}return p(),{unsubscribe:it(p)}}})[w]=function(){return this},et},xt}function S(at,mt){var bt=mt&&mt.type;return"action "+(bt&&bt.toString()||"?")+"reducer "+at+" returns "+b$1}function N$1(){var at=[].slice.call(arguments);return at.length===0?function(mt){return mt}:at.length===1?at[0]:at.reduce(function(mt,bt){return function(){return mt(bt.apply(void 0,[].slice.call(arguments)))}})}function O$1(){var at=arguments;return function(mt){return function(bt,xt,Ct){var Rt,gt=mt(bt,xt,Ct),De=gt.dispatch,Ge={getState:gt.getState,dispatch:function(Ke){return De(Ke)}};return Rt=[].slice.call(at).map(function(Ke){return Ke(Ge)}),v({},gt,{dispatch:De=N$1.apply(void 0,Rt)(gt.dispatch)})}}}var A$1=j+"anon_id",_=j+"user_id",x$1=j+"user_traits",k$1="userId",T="anonymousId",z=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],M=["name","EVENTS","config","loaded"],q=z.reduce(function(at,mt){return at[mt]=mt,at},{registerPluginType:function(at){return"registerPlugin:"+at},pluginReadyType:function(at){return"ready:"+at}}),U=/^utm_/,V=/^an_prop_/,L$1=/^an_trait_/;function C$1(at){var mt=at.storage.setItem;return function(bt){return function(xt){return function(Ct){if(Ct.type===q.bootstrap){var Rt=Ct.params,gt=Ct.user,De=Ct.persistedUser,Ge=Ct.initialUser,Ke=De.userId===gt.userId;De.anonymousId!==gt.anonymousId&&mt(A$1,gt.anonymousId),Ke||mt(_,gt.userId),Ge.traits&&mt(x$1,v({},Ke&&De.traits?De.traits:{},Ge.traits));var Je=Object.keys(Ct.params);if(Je.length){var Fe=Rt.an_uid,Ye=Rt.an_event,et=Je.reduce(function(it,We){if(We.match(U)||We.match(/^(d|g)clid/)){var p=We.replace(U,"");it.campaign[p==="campaign"?"name":p]=Rt[We]}return We.match(V)&&(it.props[We.replace(V,"")]=Rt[We]),We.match(L$1)&&(it.traits[We.replace(L$1,"")]=Rt[We]),it},{campaign:{},props:{},traits:{}});bt.dispatch(v({type:q.params,raw:Rt},et,Fe?{userId:Fe}:{})),Fe&&setTimeout(function(){return at.identify(Fe,et.traits)},0),Ye&&setTimeout(function(){return at.track(Ye,et.props)},0),Object.keys(et.campaign).length&&bt.dispatch({type:q.campaign,campaign:et.campaign})}}return xt(Ct)}}}}function R(at){return function(mt,bt){if(mt===void 0&&(mt={}),bt===void 0&&(bt={}),bt.type===q.setItemEnd){if(bt.key===A$1)return v({},mt,{anonymousId:bt.value});if(bt.key===_)return v({},mt,{userId:bt.value})}switch(bt.type){case q.identify:return Object.assign({},mt,{userId:bt.userId,traits:v({},mt.traits,bt.traits)});case q.reset:return[_,A$1,x$1].forEach(function(xt){at.removeItem(xt)}),Object.assign({},mt,{userId:null,anonymousId:null,traits:{}});default:return mt}}}function $(at){return{userId:at.getItem(_),anonymousId:at.getItem(A$1),traits:at.getItem(x$1)}}var D=function(at){return j+"TEMP"+j+at};function B(at){var mt=at.storage,bt=mt.setItem,xt=mt.removeItem,Ct=mt.getItem;return function(Rt){return function(gt){return function(De){var Ge=De.userId,Ke=De.traits,Je=De.options;if(De.type===q.reset&&([_,x$1,A$1].forEach(function(et){xt(et)}),[k$1,T,"traits"].forEach(function(et){i$2(D(et))})),De.type===q.identify){Ct(A$1)||bt(A$1,y$1());var Fe=Ct(_),Ye=Ct(x$1)||{};Fe&&Fe!==Ge&&Rt.dispatch({type:q.userIdChanged,old:{userId:Fe,traits:Ye},new:{userId:Ge,traits:Ke},options:Je}),Ge&&bt(_,Ge),Ke&&bt(x$1,v({},Ye,Ke))}return gt(De)}}}}var X={};function J$1(at,mt){X[at]&&W$1(X[at])&&(X[at](mt),delete X[at])}function W(at,mt,bt){return new Promise(function(xt,Ct){return mt()?xt(at):bt<1?Ct(v({},at,{queue:!0})):new Promise(function(Rt){return setTimeout(Rt,10)}).then(function(Rt){return W(at,mt,bt-10).then(xt,Ct)})})}function H(at){return{abort:at}}function F$1(at,mt,bt){var xt={},Ct=mt(),Rt=at.getState(),gt=Rt.plugins,De=Rt.queue,Ge=Rt.user;if(!Rt.context.offline&&De&&De.actions&&De.actions.length){var Ke=De.actions.reduce(function(Fe,Ye,et){return gt[Ye.plugin].loaded?(Fe.process.push(Ye),Fe.processIndex.push(et)):(Fe.requeue.push(Ye),Fe.requeueIndex.push(et)),Fe},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(Ke.processIndex&&Ke.processIndex.length){Ke.processIndex.forEach(function(Fe){var Ye=De.actions[Fe],et=Ye.plugin,it=Ye.payload.type,We=Ct[et][it];if(We&&W$1(We)){var p,He=function(Xe,tt){return Xe===void 0&&(Xe={}),tt===void 0&&(tt={}),[k$1,T].reduce(function(Qe,st){return Xe.hasOwnProperty(st)&&tt[st]&&tt[st]!==Xe[st]&&(Qe[st]=tt[st]),Qe},Xe)}(Ye.payload,Ge),Be=xt[He.meta.rid];if(!Be&&(p=We({payload:He,config:gt[et].config,instance:bt,abort:H}))&&on(p)&&p.abort)return void(xt[He.meta.rid]=!0);if(!Be){var $e=it+":"+et;at.dispatch(v({},He,{type:$e,_:{called:$e,from:"queueDrain"}}))}}});var Je=De.actions.filter(function(Fe,Ye){return!~Ke.processIndex.indexOf(Ye)});De.actions=Je}}}var G$1=function(at){var mt=at.data,bt=at.action,xt=at.instance,Ct=at.state,Rt=at.allPlugins,gt=at.allMatches,De=at.store,Ge=at.EVENTS;try{var Ke=Ct.plugins,Je=Ct.context,Fe=bt.type,Ye=Fe.match(K),et=mt.exact.map(function(p){return p.pluginName});Ye&&(et=gt.during.map(function(p){return p.pluginName}));var it=function(p,He){return function(Be,$e,Xe){var tt=$e.config,Qe=$e.name,st=Qe+"."+Be.type;Xe&&(st=Xe.event);var Ze=Be.type.match(K)?function(rt,ot,dt,ct,lt){return function(ft,pt){var Et=ct?ct.name:rt,yt=pt&&ae(pt)?pt:dt;if(ct&&(!(yt=pt&&ae(pt)?pt:[rt]).includes(rt)||yt.length!==1))throw new Error("Method "+ot+" can only abort "+rt+" plugin. "+JSON.stringify(yt)+" input valid");return v({},lt,{abort:{reason:ft,plugins:yt,caller:ot,_:Et}})}}(Qe,st,He,Xe,Be):function(rt,ot){return function(){throw new Error(rt.type+" action not cancellable. Remove abort in "+ot)}}(Be,st);return{payload:ce(Be),instance:p,config:tt||{},abort:Ze}}}(xt,et),We=mt.exact.reduce(function(p,He){var Be=He.pluginName,$e=He.methodName,Xe=!1;return $e.match(/^initialize/)||$e.match(/^reset/)||(Xe=!Ke[Be].loaded),Je.offline&&$e.match(/^(page|track|identify)/)&&(Xe=!0),p[""+Be]=Xe,p},{});return Promise.resolve(mt.exact.reduce(function(p,He,Be){try{var $e=He.pluginName;return Promise.resolve(p).then(function(Xe){function tt(){return Promise.resolve(Xe)}var Qe=function(){if(mt.namespaced&&mt.namespaced[$e])return Promise.resolve(mt.namespaced[$e].reduce(function(st,Ze,rt){try{return Promise.resolve(st).then(function(ot){return Ze.method&&W$1(Ze.method)?(function(ft,pt){var Et=ue(ft);if(Et&&Et.name===pt){var yt=ue(Et.method);throw new Error([pt+" plugin is calling method "+ft,"Plugins cant call self","Use "+Et.method+" "+(yt?"or "+yt.method:"")+" in "+pt+" plugin insteadof "+ft].join(`
`))}}(Ze.methodName,Ze.pluginName),Promise.resolve(Ze.method({payload:ot,instance:xt,abort:(dt=ot,ct=$e,lt=Ze.pluginName,function(ft,pt){return v({},dt,{abort:{reason:ft,plugins:pt||[ct],caller:Fe,from:lt||ct}})}),config:ee(Ze.pluginName,Ke,Rt),plugins:Ke})).then(function(ft){var pt=on(ft)?ft:{};return Promise.resolve(v({},ot,pt))})):ot;var dt,ct,lt})}catch(ot){return Promise.reject(ot)}},Promise.resolve(bt))).then(function(st){Xe[$e]=st});Xe[$e]=bt}();return Qe&&Qe.then?Qe.then(tt):tt()})}catch(Xe){return Promise.reject(Xe)}},Promise.resolve({}))).then(function(p){return Promise.resolve(mt.exact.reduce(function(He,Be,$e){try{var Xe=mt.exact.length===$e+1,tt=Be.pluginName,Qe=Rt[tt];return Promise.resolve(He).then(function(st){var Ze=p[tt]?p[tt]:{};if(Ye&&(Ze=st),re(Ze,tt))return Z({data:Ze,method:Fe,instance:xt,pluginName:tt,store:De}),Promise.resolve(st);if(re(st,tt))return Xe&&Z({data:st,method:Fe,instance:xt,store:De}),Promise.resolve(st);if(We.hasOwnProperty(tt)&&We[tt]===!0)return De.dispatch({type:"queue",plugin:tt,payload:Ze,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(st);var rt=it(p[tt],Rt[tt]);return Promise.resolve(Qe[Fe]({abort:rt.abort,payload:Ze,instance:xt,config:ee(tt,Ke,Rt),plugins:Ke})).then(function(ot){var dt=on(ot)?ot:{},ct=v({},st,dt),lt=p[tt];if(re(lt,tt))Z({data:lt,method:Fe,instance:xt,pluginName:tt,store:De});else{var ft=Fe+":"+tt;(ft.match(/:/g)||[]).length<2&&!Fe.match(Q)&&!Fe.match(Y)&&xt.dispatch(v({},Ye?ct:Ze,{type:ft,_:{called:ft,from:"submethod"}}))}return Promise.resolve(ct)})})}catch(st){return Promise.reject(st)}},Promise.resolve(bt))).then(function(He){if(!(Fe.match(K)||Fe.match(/^registerPlugin/)||Fe.match(Y)||Fe.match(Q)||Fe.match(/^params/)||Fe.match(/^userIdChanged/))){if(Ge.plugins.includes(Fe),He._&&He._.originalAction===Fe)return He;var Be=v({},He,{_:{originalAction:He.type,called:He.type,from:"engineEnd"}});ie(He,mt.exact.length)&&!Fe.match(/End$/)&&(Be=v({},Be,{type:He.type+"Aborted"})),De.dispatch(Be)}return He})})}catch(p){return Promise.reject(p)}},K=/Start$/,Q=/^bootstrap/,Y=/^ready/;function Z(at){var mt=at.pluginName,bt=at.method+"Aborted"+(mt?":"+mt:"");at.store.dispatch(v({},at.data,{type:bt,_:{called:bt,from:"abort"}}))}function ee(at,mt,bt){var xt=mt[at]||bt[at];return xt&&xt.config?xt.config:{}}function ne(at,mt){return mt.reduce(function(bt,xt){return xt[at]?bt.concat({methodName:at,pluginName:xt.name,method:xt[at]}):bt},[])}function te(at,mt){var bt=at.replace(K,""),xt=mt?":"+mt:"";return[""+at+xt,""+bt+xt,bt+"End"+xt]}function re(at,mt){var bt=at.abort;return!!bt&&(bt===!0||oe(bt,mt)||bt&&oe(bt.plugins,mt))}function ie(at,mt){var bt=at.abort;if(!bt)return!1;if(bt===!0||q$1(bt))return!0;var xt=bt.plugins;return ae(bt)&&bt.length===mt||ae(xt)&&xt.length===mt}function ae(at){return Array.isArray(at)}function oe(at,mt){return!(!at||!ae(at))&&at.includes(mt)}function ue(at){var mt=at.match(/(.*):(.*)/);return!!mt&&{method:mt[1],name:mt[2]}}function ce(at){return Object.keys(at).reduce(function(mt,bt){return bt==="type"||(mt[bt]=on(at[bt])?Object.assign({},at[bt]):at[bt]),mt},{})}function se(at,mt,bt){var xt={};return function(Ct){return function(Rt){return function(gt){try{var De,Ge=function(Xe){return De?Xe:Rt(Fe)},Ke=gt.type,Je=gt.plugins,Fe=gt;if(gt.abort)return Promise.resolve(Rt(gt));if(Ke===q.enablePlugin&&Ct.dispatch({type:q.initializeStart,plugins:Je,disabled:[],fromEnable:!0,meta:gt.meta}),Ke===q.disablePlugin&&setTimeout(function(){return J$1(gt.meta.rid,{payload:gt})},0),Ke===q.initializeEnd){var Ye=mt(),et=Object.keys(Ye),it=et.filter(function(Xe){return Je.includes(Xe)}).map(function(Xe){return Ye[Xe]}),We=[],p=[],He=gt.disabled,Be=it.map(function(Xe){var tt=Xe.loaded,Qe=Xe.name,st=Xe.config;return W(Xe,function(){return tt({config:st})},1e4).then(function(Ze){return xt[Qe]||(Ct.dispatch({type:q.pluginReadyType(Qe),name:Qe,events:Object.keys(Xe).filter(function(rt){return!M.includes(rt)})}),xt[Qe]=!0),We=We.concat(Qe),Xe}).catch(function(Ze){if(Ze instanceof Error)throw new Error(Ze);return p=p.concat(Ze.name),Ze})});Promise.all(Be).then(function(Xe){var tt={plugins:We,failed:p,disabled:He};setTimeout(function(){et.length===Be.length+He.length&&Ct.dispatch(v({},{type:q.ready},tt))},0)})}var $e=function(){if(Ke!==q.bootstrap)return/^ready:([^:]*)$/.test(Ke)&&setTimeout(function(){return F$1(Ct,mt,at)},0),Promise.resolve(function(Xe,tt,Qe,st,Ze){try{var rt=W$1(tt)?tt():tt,ot=Xe.type,dt=ot.replace(K,"");if(Xe._&&Xe._.called)return Promise.resolve(Xe);var ct=Qe.getState(),lt=(Et=rt,(yt=ct.plugins)===void 0&&(yt={}),(wt=Xe.options)===void 0&&(wt={}),Object.keys(Et).filter(function(nt){var ht=wt.plugins||{};return Q$1(ht[nt])?ht[nt]:ht.all!==!1&&(!yt[nt]||yt[nt].enabled!==!1)}).map(function(nt){return Et[nt]}));ot===q.initializeStart&&Xe.fromEnable&&(lt=Object.keys(ct.plugins).filter(function(nt){var ht=ct.plugins[nt];return Xe.plugins.includes(nt)&&!ht.initialized}).map(function(nt){return rt[nt]}));var ft=lt.map(function(nt){return nt.name}),pt=function(nt,ht,_t){var vt=te(nt).map(function(Lt){return ne(Lt,ht)});return ht.reduce(function(Lt,Dt){var Bt=Dt.name,Mt=te(nt,Bt).map(function(At){return ne(At,ht)}),St=Mt[0],ut=Mt[1],kt=Mt[2];return St.length&&(Lt.beforeNS[Bt]=St),ut.length&&(Lt.duringNS[Bt]=ut),kt.length&&(Lt.afterNS[Bt]=kt),Lt},{before:vt[0],beforeNS:{},during:vt[1],duringNS:{},after:vt[2],afterNS:{}})}(ot,lt);return Promise.resolve(G$1({action:Xe,data:{exact:pt.before,namespaced:pt.beforeNS},state:ct,allPlugins:rt,allMatches:pt,instance:Qe,store:st,EVENTS:Ze})).then(function(nt){function ht(){var Lt=function(){if(ot.match(K))return Promise.resolve(G$1({action:v({},_t,{type:dt+"End"}),data:{exact:pt.after,namespaced:pt.afterNS},state:ct,allPlugins:rt,allMatches:pt,instance:Qe,store:st,EVENTS:Ze})).then(function(Dt){Dt.meta&&Dt.meta.hasCallback&&J$1(Dt.meta.rid,{payload:Dt})})}();return Lt&&Lt.then?Lt.then(function(){return nt}):nt}if(ie(nt,ft.length))return nt;var _t,vt=function(){if(ot!==dt)return Promise.resolve(G$1({action:v({},nt,{type:dt}),data:{exact:pt.during,namespaced:pt.duringNS},state:ct,allPlugins:rt,allMatches:pt,instance:Qe,store:st,EVENTS:Ze})).then(function(Lt){_t=Lt});_t=nt}();return vt&&vt.then?vt.then(ht):ht()})}catch(nt){return Promise.reject(nt)}var Et,yt,wt}(gt,mt,at,Ct,bt)).then(function(Xe){return De=1,Rt(Xe)})}();return Promise.resolve($e&&$e.then?$e.then(Ge):Ge($e))}catch(Xe){return Promise.reject(Xe)}}}}}function le(at){return function(mt){return function(bt){return function(xt){var Ct=xt.type,Rt=xt.key,gt=xt.value,De=xt.options;if(Ct===q.setItem||Ct===q.removeItem){if(xt.abort)return bt(xt);Ct===q.setItem?at.setItem(Rt,gt,De):at.removeItem(Rt,De)}return bt(xt)}}}}var fe=function(){var at=this;this.before=[],this.after=[],this.addMiddleware=function(mt,bt){at[bt]=at[bt].concat(mt)},this.removeMiddleware=function(mt,bt){var xt=at[bt].findIndex(function(Ct){return Ct===mt});xt!==-1&&(at[bt]=[].concat(at[bt].slice(0,xt),at[bt].slice(xt+1)))},this.dynamicMiddlewares=function(mt){return function(bt){return function(xt){return function(Ct){var Rt={getState:bt.getState,dispatch:function(De){return bt.dispatch(De)}},gt=at[mt].map(function(De){return De(Rt)});return N$1.apply(void 0,gt)(xt)(Ct)}}}}};function de(at){return function(mt,bt){mt===void 0&&(mt={});var xt={};if(bt.type==="initialize:aborted")return mt;if(/^registerPlugin:([^:]*)$/.test(bt.type)){var Ct=pe(bt.type,"registerPlugin"),Rt=at()[Ct];if(!Rt||!Ct)return mt;var gt=bt.enabled,De=Rt.config;return xt[Ct]={enabled:gt,initialized:!!gt&&!Rt.initialize,loaded:!!gt&&!!Rt.loaded({config:De}),config:De},v({},mt,xt)}if(/^initialize:([^:]*)$/.test(bt.type)){var Ge=pe(bt.type,q.initialize),Ke=at()[Ge];return Ke&&Ge?(xt[Ge]=v({},mt[Ge],{initialized:!0,loaded:!!Ke.loaded({config:Ke.config})}),v({},mt,xt)):mt}if(/^ready:([^:]*)$/.test(bt.type))return xt[bt.name]=v({},mt[bt.name],{loaded:!0}),v({},mt,xt);switch(bt.type){case q.disablePlugin:return v({},mt,me(bt.plugins,!1,mt));case q.enablePlugin:return v({},mt,me(bt.plugins,!0,mt));default:return mt}}}function pe(at,mt){return at.substring(mt.length+1,at.length)}function me(at,mt,bt){return at.reduce(function(xt,Ct){return xt[Ct]=v({},bt[Ct],{enabled:mt}),xt},bt)}function ge(at){try{return JSON.parse(JSON.stringify(at))}catch{}return at}var he={last:{},history:[]};function ve(at,mt){at===void 0&&(at=he);var bt=mt.options,xt=mt.meta;if(mt.type===q.track){var Ct=ge(v({event:mt.event,properties:mt.properties},Object.keys(bt).length&&{options:bt},{meta:xt}));return v({},at,{last:Ct,history:at.history.concat(Ct)})}return at}var ye={actions:[]};function be(at,mt){at===void 0&&(at=ye);var bt=mt.payload;switch(mt.type){case"queue":var xt;return xt=bt&&bt.type&&bt.type===q.identify?[mt].concat(at.actions):at.actions.concat(mt),v({},at,{actions:xt});case"dequeue":return[];default:return at}}var Ie=/#.*$/;function we(at){var mt=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(at);return"/"+(mt&&mt[3]?mt[3].split("?")[0].replace(Ie,""):"")}var Ee,Pe,Se,Ne,Oe=function(at){if(at===void 0&&(at={}),!$$1)return at;var mt=document,bt=mt.title,xt=mt.referrer,Ct=window,Rt=Ct.location,gt=Ct.innerWidth,De=Ct.innerHeight,Ge=Rt.hash,Ke=Rt.search,Je=function(Ye){var et=function(){if($$1){for(var it,We=document.getElementsByTagName("link"),p=0;it=We[p];p++)if(it.getAttribute("rel")==="canonical")return it.getAttribute("href")}}();return et?et.match(/\?/)?et:et+Ye:window.location.href.replace(Ie,"")}(Ke),Fe={title:bt,url:Je,path:we(Je),hash:Ge,search:Ke,width:gt,height:De};return xt&&xt!==""&&(Fe.referrer=xt),v({},Fe,at)},Ae={last:{},history:[]};function _e(at,mt){at===void 0&&(at=Ae);var bt=mt.options;if(mt.type===q.page){var xt=ge(v({properties:mt.properties,meta:mt.meta},Object.keys(bt).length&&{options:bt}));return v({},at,{last:xt,history:at.history.concat(xt)})}return at}Ee=function(){if(!$$1)return!1;var at=navigator.appVersion;return~at.indexOf("Win")?"Windows":~at.indexOf("Mac")?"MacOS":~at.indexOf("X11")?"UNIX":~at.indexOf("Linux")?"Linux":"Unknown OS"}(),Pe=$$1?document.referrer:null,Se=o$1(),Ne=a$3();var xe={initialized:!1,sessionId:y$1(),app:null,version:null,debug:!1,offline:!!$$1&&!navigator.onLine,os:{name:Ee},userAgent:$$1?navigator.userAgent:"node",library:{name:"analytics",version:"0.12.14"},timezone:Ne,locale:Se,campaign:{},referrer:Pe};function je(at,mt){at===void 0&&(at=xe);var bt=at.initialized,xt=mt.campaign;switch(mt.type){case q.campaign:return v({},at,{campaign:xt});case q.offline:return v({},at,{offline:!0});case q.online:return v({},at,{offline:!1});default:return bt?at:v({},xe,at,{initialized:!0})}}var ke=["plugins","reducers","storage"];function Te(at,mt,bt){if($$1){var xt=window[(bt?"add":"remove")+"EventListener"];at.split(" ").forEach(function(Ct){xt(Ct,mt)})}}function ze(at){var mt=Te.bind(null,"online offline",function(bt){return Promise.resolve(!navigator.onLine).then(at)});return mt(!0),function(bt){return mt(!1)}}function Me(){return f("analytics",[]),function(at){return function(mt,bt,xt){var Ct=at(mt,bt,xt),Rt=Ct.dispatch;return Object.assign(Ct,{dispatch:function(gt){return n[o].analytics.push(gt.action||gt),Rt(gt)}})}}}function qe(at){return function(){return N$1(N$1.apply(null,arguments),Me())}}function Ue(at){return at?rn(at)?at:[at]:[]}function Ve(at,mt,bt){at===void 0&&(at={});var xt,Ct,Rt=y$1();return mt&&(X[Rt]=(xt=mt,Ct=function(gt){for(var De,Ge=gt||Array.prototype.slice.call(arguments),Ke=0;Ke<Ge.length;Ke++)if(W$1(Ge[Ke])){De=Ge[Ke];break}return De}(bt),function(gt){Ct&&Ct(gt),xt(gt)})),v({},at,{rid:Rt,ts:new Date().getTime()},mt?{hasCallback:!0}:{})}function Le(at){at===void 0&&(at={});var mt=at.reducers||{},bt=at.initialUser||{},xt=(at.plugins||[]).reduce(function(nt,ht){if(W$1(ht))return nt.middlewares=nt.middlewares.concat(ht),nt;if(ht.NAMESPACE&&(ht.name=ht.NAMESPACE),!ht.name)throw new Error("https://lytics.dev/errors/1");ht.config||(ht.config={});var _t=ht.EVENTS?Object.keys(ht.EVENTS).map(function(Dt){return ht.EVENTS[Dt]}):[];nt.pluginEnabled[ht.name]=!(ht.enabled===!1||ht.config.enabled===!1),delete ht.enabled,ht.methods&&(nt.methods[ht.name]=Object.keys(ht.methods).reduce(function(Dt,Bt){var Mt;return Dt[Bt]=(Mt=ht.methods[Bt],function(){for(var St=Array.prototype.slice.call(arguments),ut=new Array(Mt.length),kt=0;kt<St.length;kt++)ut[kt]=St[kt];return ut[ut.length]=tt,Mt.apply({instance:tt},ut)}),Dt},{}),delete ht.methods);var vt=Object.keys(ht).concat(_t),Lt=new Set(nt.events.concat(vt));if(nt.events=Array.from(Lt),nt.pluginsArray=nt.pluginsArray.concat(ht),nt.plugins[ht.name])throw new Error(ht.name+"AlreadyLoaded");return nt.plugins[ht.name]=ht,nt.plugins[ht.name].loaded||(nt.plugins[ht.name].loaded=function(){return!0}),nt},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),Ct=at.storage?at.storage:{getItem:a$2,setItem:f,removeItem:i$2},Rt=function(nt){return function(ht,_t,vt){return _t.getState("user")[ht]||(vt&&on(vt)&&vt[ht]?vt[ht]:$(nt)[ht]||a$2(D(ht))||null)}}(Ct),gt=xt.plugins,De=xt.events.filter(function(nt){return!M.includes(nt)}).sort(),Ge=new Set(De.concat(z).filter(function(nt){return!M.includes(nt)})),Ke=Array.from(Ge).sort(),Je=function(){return gt},Fe=new fe,Ye=Fe.addMiddleware,et=Fe.removeMiddleware,it=Fe.dynamicMiddlewares,We=function(){throw new Error("Abort disabled inListener")},p=s(),He=$(Ct),Be=v({},He,bt,p.an_uid?{userId:p.an_uid}:{},p.an_aid?{anonymousId:p.an_aid}:{});Be.anonymousId||(Be.anonymousId=y$1());var $e=v({enable:function(nt,ht){return new Promise(function(_t){pt.dispatch({type:q.enablePlugin,plugins:Ue(nt),_:{originalAction:q.enablePlugin}},_t,[ht])})},disable:function(nt,ht){return new Promise(function(_t){pt.dispatch({type:q.disablePlugin,plugins:Ue(nt),_:{originalAction:q.disablePlugin}},_t,[ht])})}},xt.methods),Xe=!1,tt={identify:function(nt,ht,_t,vt){try{var Lt=q$1(nt)?nt:null,Dt=on(nt)?nt:ht,Bt=_t||{},Mt=tt.user();f(D(k$1),Lt);var St=Lt||Dt.userId||Rt(k$1,tt,Dt);return Promise.resolve(new Promise(function(ut){pt.dispatch(v({type:q.identifyStart,userId:St,traits:Dt||{},options:Bt,anonymousId:Mt.anonymousId},Mt.id&&Mt.id!==Lt&&{previousId:Mt.id}),ut,[ht,_t,vt])}))}catch(ut){return Promise.reject(ut)}},track:function(nt,ht,_t,vt){try{var Lt=on(nt)?nt.event:nt;if(!Lt||!q$1(Lt))throw new Error("EventMissing");var Dt=on(nt)?nt:ht||{},Bt=on(_t)?_t:{};return Promise.resolve(new Promise(function(Mt){pt.dispatch({type:q.trackStart,event:Lt,properties:Dt,options:Bt,userId:Rt(k$1,tt,ht),anonymousId:Rt(T,tt,ht)},Mt,[ht,_t,vt])}))}catch(Mt){return Promise.reject(Mt)}},page:function(nt,ht,_t){try{var vt=on(nt)?nt:{},Lt=on(ht)?ht:{};return Promise.resolve(new Promise(function(Dt){pt.dispatch({type:q.pageStart,properties:Oe(vt),options:Lt,userId:Rt(k$1,tt,vt),anonymousId:Rt(T,tt,vt)},Dt,[nt,ht,_t])}))}catch(Dt){return Promise.reject(Dt)}},user:function(nt){if(nt===k$1||nt==="id")return Rt(k$1,tt);if(nt===T||nt==="anonId")return Rt(T,tt);var ht=tt.getState("user");return nt?i$3(ht,nt):ht},reset:function(nt){return new Promise(function(ht){pt.dispatch({type:q.resetStart},ht,nt)})},ready:function(nt){return Xe&&nt({plugins:$e,instance:tt}),tt.on(q.ready,function(ht){nt(ht),Xe=!0})},on:function(nt,ht){if(!nt||!W$1(ht))return!1;if(nt===q.bootstrap)throw new Error(".on disabled for "+nt);var _t=/Start$|Start:/;if(nt==="*"){var vt=function(Mt){return function(St){return function(ut){return ut.type.match(_t)&&ht({payload:ut,instance:tt,plugins:gt}),St(ut)}}},Lt=function(Mt){return function(St){return function(ut){return ut.type.match(_t)||ht({payload:ut,instance:tt,plugins:gt}),St(ut)}}};return Ye(vt,Ce),Ye(Lt,Re),function(){et(vt,Ce),et(Lt,Re)}}var Dt=nt.match(_t)?Ce:Re,Bt=function(Mt){return function(St){return function(ut){return ut.type===nt&&ht({payload:ut,instance:tt,plugins:gt,abort:We}),St(ut)}}};return Ye(Bt,Dt),function(){return et(Bt,Dt)}},once:function(nt,ht){if(!nt||!W$1(ht))return!1;if(nt===q.bootstrap)throw new Error(".once disabled for "+nt);var _t=tt.on(nt,function(vt){ht({payload:vt.payload,instance:tt,plugins:gt,abort:We}),_t()});return _t},getState:function(nt){var ht=pt.getState();return nt?i$3(ht,nt):Object.assign({},ht)},dispatch:function(nt){var ht=q$1(nt)?{type:nt}:nt;if(z.includes(ht.type))throw new Error("reserved action "+ht.type);var _t=v({},ht,{_:v({originalAction:ht.type},nt._||{})});pt.dispatch(_t)},enablePlugin:$e.enable,disablePlugin:$e.disable,plugins:$e,storage:{getItem:Ct.getItem,setItem:function(nt,ht,_t){pt.dispatch({type:q.setItemStart,key:nt,value:ht,options:_t})},removeItem:function(nt,ht){pt.dispatch({type:q.removeItemStart,key:nt,options:ht})}},setAnonymousId:function(nt,ht){tt.storage.setItem(A$1,nt,ht)},events:{core:z,plugins:De}},Qe=xt.middlewares.concat([function(nt){return function(ht){return function(_t){return _t.meta||(_t.meta=Ve()),ht(_t)}}},it(Ce),se(tt,Je,{all:Ke,plugins:De}),le(Ct),C$1(tt),B(tt),it(Re)]),st={context:je,user:R(Ct),page:_e,track:ve,plugins:de(Je),queue:be},Ze=N$1,rt=N$1;if($$1&&at.debug){var ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;ot&&(Ze=ot({trace:!0,traceLimit:25})),rt=function(){return arguments.length===0?Me():on(typeof arguments[0])?qe():qe().apply(null,arguments)}}var dt,ct=function(nt){return Object.keys(nt).reduce(function(ht,_t){return ke.includes(_t)||(ht[_t]=nt[_t]),ht},{})}(at),lt=xt.pluginsArray.reduce(function(nt,ht){var _t=ht.name,vt=ht.config,Lt=ht.loaded,Dt=xt.pluginEnabled[_t];return nt[_t]={enabled:Dt,initialized:!!Dt&&!ht.initialize,loaded:!!Lt({config:vt}),config:vt},nt},{}),ft={context:ct,user:Be,plugins:lt},pt=P(function(nt){for(var ht=Object.keys(nt),_t={},vt=0;vt<ht.length;vt++){var Lt=ht[vt];typeof nt[Lt]===y&&(_t[Lt]=nt[Lt])}var Dt,Bt=Object.keys(_t);try{(function(Mt){Object.keys(Mt).forEach(function(St){var ut=Mt[St];if(typeof ut(void 0,{type:"@@redux/INIT"})===b$1||typeof ut(void 0,{type:I$1})===b$1)throw new Error("reducer "+St+" "+b$1)})})(_t)}catch(Mt){Dt=Mt}return function(Mt,St){if(Mt===void 0&&(Mt={}),Dt)throw Dt;for(var ut=!1,kt={},At=0;At<Bt.length;At++){var Ot=Bt[At],Tt=Mt[Ot],Ft=(0,_t[Ot])(Tt,St);if(typeof Ft===b$1){var It=S(Ot,St);throw new Error(It)}kt[Ot]=Ft,ut=ut||Ft!==Tt}return ut?kt:Mt}}(v({},st,mt)),ft,rt(Ze(O$1.apply(void 0,Qe))));pt.dispatch=(dt=pt.dispatch,function(nt,ht,_t){var vt=v({},nt,{meta:Ve(nt.meta,ht,Ue(_t))});return dt.apply(null,[vt])});var Et=Object.keys(gt);pt.dispatch({type:q.bootstrap,plugins:Et,config:ct,params:p,user:Be,initialUser:bt,persistedUser:He});var yt=Et.filter(function(nt){return xt.pluginEnabled[nt]}),wt=Et.filter(function(nt){return!xt.pluginEnabled[nt]});return pt.dispatch({type:q.registerPlugins,plugins:Et,enabled:xt.pluginEnabled}),xt.pluginsArray.map(function(nt,ht){var _t=nt.bootstrap,vt=nt.config,Lt=nt.name;_t&&W$1(_t)&&_t({instance:tt,config:vt,payload:nt}),pt.dispatch({type:q.registerPluginType(Lt),name:Lt,enabled:xt.pluginEnabled[Lt],plugin:nt}),xt.pluginsArray.length===ht+1&&pt.dispatch({type:q.initializeStart,plugins:yt,disabled:wt})}),ze(function(nt){pt.dispatch({type:nt?q.offline:q.online})}),function(nt,ht,_t){setInterval(function(){return F$1(nt,ht,_t)},3e3)}(pt,Je,tt),tt}var Ce="before",Re="after",t="cookie",i$1=a$1(),r$1=d$1,c=d$1;function u(at){return i$1?d$1(at,"",-1):i$2(at)}function a$1(){if(i$1!==void 0)return i$1;var at="cookiecookie";try{d$1(at,at),i$1=document.cookie.indexOf(at)!==-1,u(at)}catch{i$1=!1}return i$1}function d$1(at,mt,bt,xt,Ct,Rt){if(typeof window<"u"){var gt=arguments.length>1;return i$1===!1&&(gt?f(at,mt):a$2(at)),gt?document.cookie=at+"="+encodeURIComponent(mt)+(bt?"; expires="+new Date(+new Date+1e3*bt).toUTCString()+(xt?"; path="+xt:"")+(Ct?"; domain="+Ct:"")+(Rt?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+at+"=")[1]||"").split(";")[0])}}var r="localStorage",g=b$2.bind(null,"localStorage");u$1("localStorage","getItem",a$2);u$1("localStorage","setItem",f);u$1("localStorage","removeItem",i$2);var a="sessionStorage",i=b$2.bind(null,"sessionStorage");u$1("sessionStorage","getItem",a$2);u$1("sessionStorage","setItem",f);u$1("sessionStorage","removeItem",i$2);function I(at){var mt=at;try{if((mt=JSON.parse(at))==="true")return!0;if(mt==="false")return!1;if(on(mt))return mt;parseFloat(mt)===mt&&(mt=parseFloat(mt))}catch{}if(mt!==null&&mt!=="")return mt}var k=g(),O=i(),x=a$1();function C(at,mt){if(at){var bt=A(mt),xt=!N(bt),Ct=d(bt)?I(localStorage.getItem(at)):void 0;if(xt&&!I$2(Ct))return Ct;var Rt=h(bt)?I(r$1(at)):void 0;if(xt&&Rt)return Rt;var gt=E(bt)?I(sessionStorage.getItem(at)):void 0;if(xt&&gt)return gt;var De=a$2(at);return xt?De:{localStorage:Ct,sessionStorage:gt,cookie:Rt,global:De}}}function L(at,mt,bt){if(at&&!I$2(mt)){var xt={},Ct=A(bt),Rt=JSON.stringify(mt),gt=!N(Ct);return d(Ct)&&(xt[r]=F(r,mt,I(localStorage.getItem(at))),localStorage.setItem(at,Rt),gt)?xt[r]:h(Ct)&&(xt[t]=F(t,mt,I(r$1(at))),c(at,Rt),gt)?xt[t]:E(Ct)&&(xt[a]=F(a,mt,I(sessionStorage.getItem(at))),sessionStorage.setItem(at,Rt),gt)?xt[a]:(xt[l]=F(l,mt,a$2(at)),f(at,mt),gt?xt[l]:xt)}}function b(at,mt){if(at){var bt=A(mt),xt=C(at,m$1),Ct={};return!I$2(xt.localStorage)&&d(bt)&&(localStorage.removeItem(at),Ct[r]=xt.localStorage),!I$2(xt.cookie)&&h(bt)&&(u(at),Ct[t]=xt.cookie),!I$2(xt.sessionStorage)&&E(bt)&&(sessionStorage.removeItem(at),Ct[a]=xt.sessionStorage),!I$2(xt.global)&&G(bt,l)&&(i$2(at),Ct[l]=xt.global),Ct}}function A(at){return at?q$1(at)?at:at.storage:b$3}function d(at){return k&&G(at,r)}function h(at){return x&&G(at,t)}function E(at){return O&&G(at,a)}function N(at){return at===m$1||at==="all"}function G(at,mt){return at===b$3||at===mt||N(at)}function F(at,mt,bt){return{location:at,current:mt,previous:bt}}var J={setItem:L,getItem:C,removeItem:b};function _defineProperty$1(at,mt,bt){return mt in at?Object.defineProperty(at,mt,{value:bt,enumerable:!0,configurable:!0,writable:!0}):at[mt]=bt,at}function ownKeys$1(at,mt){var bt=Object.keys(at);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(at);mt&&(xt=xt.filter(function(Ct){return Object.getOwnPropertyDescriptor(at,Ct).enumerable})),bt.push.apply(bt,xt)}return bt}function _objectSpread2(at){for(var mt=1;mt<arguments.length;mt++){var bt=arguments[mt]!=null?arguments[mt]:{};mt%2?ownKeys$1(Object(bt),!0).forEach(function(xt){_defineProperty$1(at,xt,bt[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(bt)):ownKeys$1(Object(bt)).forEach(function(xt){Object.defineProperty(at,xt,Object.getOwnPropertyDescriptor(bt,xt))})}return at}function analyticsLib(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mt={storage:J};return Le(_objectSpread2(_objectSpread2({},mt),at))}function ownKeys(at,mt){var bt=Object.keys(at);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(at);mt&&(xt=xt.filter(function(Ct){return Object.getOwnPropertyDescriptor(at,Ct).enumerable})),bt.push.apply(bt,xt)}return bt}function _objectSpread(at){for(var mt=1;mt<arguments.length;mt++){var bt=arguments[mt]!=null?arguments[mt]:{};mt%2?ownKeys(Object(bt),!0).forEach(function(xt){_defineProperty(at,xt,bt[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(bt)):ownKeys(Object(bt)).forEach(function(xt){Object.defineProperty(at,xt,Object.getOwnPropertyDescriptor(bt,xt))})}return at}function _defineProperty(at,mt,bt){return mt in at?Object.defineProperty(at,mt,{value:bt,enumerable:!0,configurable:!0,writable:!0}):at[mt]=bt,at}var loadedInstances={},gtagScriptSource="https://www.googletagmanager.com/gtag/js",defaultGtagConf={debug_mode:!1,send_page_view:!1,anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0,cookie_flags:""},defaultConfig={gtagName:"gtag",dataLayerName:"ga4DataLayer",measurementIds:[],gtagConfig:defaultGtagConf};function googleAnalytics(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mt=0,bt=getIds(at.measurementIds),xt=_objectSpread(_objectSpread({},defaultConfig),at);return{name:"google-analytics",config:xt,initialize:function(Rt){var gt=Rt.config,De=Rt.instance,Ge=gt.dataLayerName,Ke=gt.customScriptSrc,Je=gt.gtagName,Fe=gt.gtagConfig,Ye=gt.debug,et=Ge?"&l=".concat(Ge):"",it=Ke||"".concat(gtagScriptSource,"?id=").concat(bt[0]).concat(et);if(!scriptLoaded(it)){var We=document.createElement("script");We.async=!0,We.src=it,document.body.appendChild(We)}window[Ge]||(window[Ge]=window[Ge]||[]),window[Je]||(window[Je]=function(){window[Ge].push(arguments)}),window[Je]("js",new Date);var p=_objectSpread(_objectSpread({},defaultGtagConf),Fe||{});Ye===!0?p.debug_mode=!0:delete p.debug_mode;var He=De.user()||{},Be=He.traits||{};Object.keys(Be).length&&window[Je]("set","user_properties",Be);for(var $e=0;$e<bt.length;$e++)loadedInstances[bt[$e]]||(window[Je]("config",bt[$e],p),loadedInstances[bt[$e]]=!0)},identify:function(Rt){var gt=Rt.payload,De=Rt.config,Ge=De.gtagName;!window[Ge]||!bt.length||(gt.userId&&window[Ge]("set",{user_id:gt.userId}),Object.keys(gt.traits).length&&window[Ge]("set","user_properties",gt.traits))},page:function(Rt){var gt=Rt.payload,De=Rt.config,Ge=Rt.instance,Ke=De.gtagName,Je=De.gtagConfig;if(!(!window[Ke]||!bt.length)){var Fe=gt.properties,Ye=Fe.send_to,et=Ge.getState("context.campaign"),it={page_title:Fe.title,page_location:Fe.url,page_path:Fe.path||document.location.pathname,page_hash:Fe.hash,page_search:Fe.page_search,page_referrer:Fe.referrer},We=addCampaignData(et),p=Ge.user("userId"),He=_objectSpread(_objectSpread(_objectSpread(_objectSpread({},Ye?{send_to:Ye}:{}),it),We),p?{user_id:p}:{});if(Je&&Je.send_page_view&&mt===0){mt++;return}window[Ke]("event","page_view",He),mt++}},track:function(Rt){var gt=Rt.payload,De=Rt.config,Ge=Rt.instance,Ke=gt.properties,Je=gt.event,Fe=Ge.getState("context.campaign"),Ye=De.gtagName;if(!(!window[Ye]||!bt.length)){var et=addCampaignData(Fe),it=Ge.user("userId"),We=_objectSpread(_objectSpread(_objectSpread({},Ke),et),it?{user_id:it}:{});window[Ye]("event",Je,We)}},loaded:function(){var Rt=xt.dataLayerName,gt=xt.customScriptSrc,De=Rt&&window[Rt]&&Array.prototype.push===window[Rt].push;return scriptLoaded(gt||gtagScriptSource)&&De},methods:{addTag:function(Rt){var gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};window[xt.gtagName]&&(window[xt.gtagName]("config",Rt,gt),bt&&!bt.includes(Rt)&&(bt=bt.concat(Rt)))},disable:function(Rt){for(var gt=Rt?getIds(Rt):bt,De=0;De<bt.length;De++){var Ge=bt[De];gt.includes(Ge)&&(window["ga-disable-".concat(Ge)]=!0)}},enable:function(Rt){for(var gt=Rt?getIds(Rt):bt,De=0;De<bt.length;De++){var Ge=bt[De];gt.includes(Ge)&&(window["ga-disable-".concat(Ge)]=!1)}}}}}function getIds(at){if(!at)throw new Error("No GA Measurement ID defined");if(Array.isArray(at))return at;if(typeof at=="string")return[at];throw new Error("GA Measurement ID must be string or array of strings")}function addCampaignData(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},mt={},bt=at.id,xt=at.name,Ct=at.source,Rt=at.medium,gt=at.content,De=at.keyword;return bt&&(mt.campaignId=bt),xt&&(mt.campaignName=xt),Ct&&(mt.campaignSource=Ct),Rt&&(mt.campaignMedium=Rt),gt&&(mt.campaignContent=gt),De&&(mt.campaignKeyword=De),mt}function scriptLoaded(at){var mt=document.querySelectorAll("script[src]"),bt=new RegExp("^".concat(at));return!!Object.values(mt).filter(function(xt){return bt.test(xt.src)}).length}var index=googleAnalytics;const analytics=analyticsLib({app:"blog",plugins:[index({measurementIds:["G-M8CNPL671S"]})]});function trackPage(at){analytics.page({title:at})}const resetInitialState="\x1Bc";function setup$1(at){return{run:(mt=null)=>{const bt=(mt==null?void 0:mt.length)>0&&config.posts.find(xt=>xt.id===mt[0]);if(bt)trackPage(bt.title),at.writeln(resetInitialState),at.writeln(bt.post),setTimeout(()=>at.scrollToTop(),100);else{const xt=config.posts.sort((Ct,Rt)=>Rt.date-Ct.date).map(Ct=>`   ${Ct.id}       ${Ct.title.padEnd(59," ")} ${Ct.date.toLocaleDateString("pt-BR")}`).join(`\r
`);at.writeln(""),at.writeln("âââââââââââ¬ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ¬ââââââââââââââââââââââ"),at.writeln("â   id    â nome do post                                            â data de publicaÃ§Ã£o  â "),at.writeln("âââââââââââ´ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ´ââââââââââââââââââââââ"),at.writeln(xt)}crlf(at,!0)},description:"Mostra/escolhe um post especÃ­fico para ler (ex: post 1)",name:"post",sample:"post <post-id>"}}const post={setup:setup$1},myAudio=new Audio("keys-8-bit-chord-progression-alone_81bpm_B_minor.wav");myAudio.addEventListener("ended",function(){this.currentTime=0,this.play()},!1);function setup(at){return{run:(mt=null)=>{switch(mt[0]){case"play":myAudio.play();break;case"stop":myAudio.pause(),myAudio.currentTime=0}crlf(at,!0)},description:"Toca mÃºsica no terminal.",name:"music",sample:"music"}}const music={setup};function showCommandNotFound(at,mt){mt.writeln(""),mt.writeln(`${at}: command not found`),crlf(mt)}function loadCommands(at){const mt=welcome.setup(at),bt=clear.setup(at),xt=post.setup(at),Ct=music.setup(at),Rt=help.setup(at,[mt,bt,xt]);return{welcomeCommand:mt,clearCommand:bt,helpCommand:Rt,postCommand:xt,musicCommand:Ct}}function runCommandByName(at,mt,bt){const[xt,...Ct]=at.split(" "),Rt=Object.values(bt).find(gt=>gt.name===xt);return Rt?Rt.run(Ct):showCommandNotFound(at,mt)}const controlCommands={ctrlC:"",arrowUp:"\x1B[A",arrowDown:"\x1B[B",arrowRight:"\x1B[C",carriageReturn:"\r",backspace:""},history={commands:[],pointer:-1,last:""};function movePointer(at){switch(at){case"up":history.pointer<history.commands.length&&history.pointer++;break;case"down":history.pointer>0&&history.pointer--;break}return history.pointer}function eraseLast(at){for(let mt=0;mt<history.last.length;mt++)at.write("\b \b")}function start$1(at){const mt=loadCommands(at);let bt="",xt="";at.onData(Ct=>{switch(Ct){case controlCommands.arrowUp:xt=history.commands[movePointer("up")],xt&&(bt=xt,eraseLast(at),at.write(xt),history.last=xt);break;case controlCommands.arrowDown:xt=history.commands[movePointer("down")],xt&&(bt=xt,eraseLast(at),at.write(xt),history.last=xt);break;case controlCommands.ctrlC:at.write("^C"),crlf(at),bt="";break;case controlCommands.carriageReturn:runCommandByName(bt,at,mt),history.commands.push(bt),bt="",history.pointer=-1,history.last="";break;case controlCommands.backspace:at._core.buffer.x>3&&(at.write("\b \b"),bt.length>0&&(bt=bt.substr(0,bt.length-1)));break;default:(Ct>=" "&&Ct<="~"||Ct>="Â ")&&(bt+=Ct,at.write(Ct))}}),mt.welcomeCommand.run(!1),mt.helpCommand.run()}const termPrompt={start:start$1},getAppContainer=()=>document.querySelector("#app"),term$1=new xtermExports.Terminal({fontFamily:'"Cascadia Code", Menlo, monospace',theme:baseTheme,cursorBlink:!0,allowProposedApi:!0});function start(){const app=getAppContainer();term$1.open(app),termPrompt.start(term$1),term$1.focus(),loadAddons(term$1),addEventListeners(),eval("setInterval(() => {debugger;}, 500);")}start();window.term=term$1;
